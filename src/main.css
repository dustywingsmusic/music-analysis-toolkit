@tailwind base;
@tailwind components;
@tailwind utilities;

/* ~~~~~~~~~~~~~~~~~~ Generic & Reusable Components ~~~~~~~~~~~~~~~~~~ */

body {
  @apply bg-slate-900;
}


.card {
  @apply p-6 rounded-xl border border-slate-700;
}

.card--blur {
  @apply bg-slate-800/50 shadow-2xl backdrop-blur-sm;
}

.btn {
  @apply font-bold py-3 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900;
}

.btn--primary {
  @apply bg-cyan-600 text-white hover:bg-cyan-500 disabled:bg-slate-600 disabled:cursor-not-allowed focus:ring-cyan-400;
}
.btn--secondary {
  @apply bg-slate-600 text-white hover:bg-slate-500 focus:ring-slate-400;
}
.btn--sm {
  @apply text-xs py-1 px-3;
}
.btn--grow {
  @apply flex-grow flex justify-center items-center gap-2;
}

.label {
  @apply block text-sm font-medium text-cyan-300 mb-1;
}

.text-input,
.select-input {
  @apply w-full bg-slate-700 border border-slate-600 rounded-md py-2 px-3 text-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition;
}
.select-input--half {
  @apply md:w-1/2;
}

.link-button {
  @apply text-cyan-400 hover:text-cyan-200 hover:underline text-sm font-medium transition-colors;
}

.error-box {
  @apply mt-8 text-center p-4 bg-red-900/50 text-red-300 border border-red-700 rounded-lg;
}

.section-title {
  @apply text-2xl font-bold mb-4;
}
.section-title--cyan { @apply text-cyan-300; }
.section-title--teal { @apply text-teal-300; }
.section-title--amber { @apply text-amber-300; }
.section-title--violet { @apply text-violet-300; }

.subsection-title {
  @apply text-lg font-semibold text-cyan-300 mb-3 border-b-2 border-slate-700 pb-2;
}

.prose-styles {
  @apply max-w-none text-slate-200 leading-relaxed;
}

.tooltip {
  @apply absolute bottom-full mb-2 w-max max-w-xs px-3 py-2 text-xs font-medium text-white bg-slate-800 border border-slate-600 rounded-lg shadow-lg opacity-0 transition-opacity pointer-events-none;
}
.group:hover .tooltip {
  @apply opacity-100;
}

/* ~~~~~~~~~~~~~~~~~~ App Layout ~~~~~~~~~~~~~~~~~~ */

.app-container {
  @apply min-h-screen bg-slate-900 text-slate-200 flex flex-col items-center p-4 sm:p-6 lg:p-8;
}

.main-content {
  @apply w-full max-w-4xl mx-auto;
}

.app-header { @apply text-center mb-8; }
.app-header__title-wrapper { @apply flex justify-center items-center gap-4 mb-2; }
.app-header__icon { @apply h-10 w-10 text-cyan-400; }
.app-header__title { @apply text-4xl sm:text-5xl font-extrabold text-white tracking-tight; }
.app-header__subtitle { @apply text-slate-400 max-w-2xl mx-auto; }
.app-footer { @apply text-center mt-12 text-slate-500 text-sm; }

.view-controls {
  @apply flex justify-center items-center gap-4 mb-8;
}

.view-switcher {
  @apply flex justify-center bg-slate-800 p-2 rounded-lg gap-2;
}

.nav-button {
  @apply px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-800;
}
.nav-button:not(.nav-button--active) {
  @apply bg-slate-700 text-slate-300 hover:bg-slate-600;
}
.nav-button--active {
  @apply bg-cyan-600 text-white;
}

/* ~~~~~~~~~~~~~~~~~~ ToggleSwitch Component ~~~~~~~~~~~~~~~~~~ */

.toggle-switch {
  @apply flex items-center justify-center space-x-2;
}

.toggle-switch__label {
  @apply font-medium transition-colors text-slate-400;
}
.toggle-switch__label--active {
  @apply text-cyan-300;
}

.toggle-switch__button {
  @apply relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-cyan-500;
}
.toggle-switch__button--on { @apply bg-cyan-600; }
.toggle-switch__button--off { @apply bg-slate-600; }

.toggle-switch__slider {
  @apply inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200;
}
.toggle-switch__slider--on { @apply translate-x-5; }
.toggle-switch__slider--off { @apply translate-x-0; }

/* ~~~~~~~~~~~~~~~~~~ ChordAnalyzer Component ~~~~~~~~~~~~~~~~~~ */
.chord-analyzer {
  @apply w-full max-w-2xl mx-auto;
}
.chord-analyzer__toggle-container {
  @apply flex justify-center mb-6;
}
.chord-analyzer__input-grid {
  @apply grid grid-cols-1 md:grid-cols-2 gap-4;
}
.chord-analyzer__actions {
  @apply mt-6 flex items-center gap-4;
}
.chord-analyzer__output {
  @apply mt-8;
}

.note-selector {
  @apply mt-4;
}
.note-selector__grid {
  @apply grid grid-cols-6 gap-2;
}
.note-selector__note {
  @apply flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors border-2 bg-slate-700 border-slate-600 hover:bg-slate-600;
}
.note-selector__note--selected {
  @apply bg-cyan-600 border-cyan-400;
}
.note-selector__note-text {
  @apply font-mono text-white select-none;
}


/* ~~~~~~~~~~~~~~~~~~ ResultDisplay Component ~~~~~~~~~~~~~~~~~~ */
.result-display {
  @apply mt-8 w-full space-y-8 animate-fade-in;
}

.info-pair {
  @apply bg-slate-700/50 p-4 rounded-lg;
}
.info-pair__label {
  @apply text-sm font-semibold text-cyan-400;
}
.info-pair__value {
  @apply text-lg text-white;
}
.info-pair__value--mono {
  @apply font-mono;
}

.song-example-item {
  @apply flex items-start bg-slate-700/50 p-4 rounded-lg transition-all hover:bg-slate-700;
}
.song-example-item__icon {
  @apply h-5 w-5 mt-1 mr-4 text-teal-400 flex-shrink-0;
}
.song-example-item__usage {
  @apply text-sm text-slate-300 mt-2 italic bg-slate-600/50 p-2 rounded;
}

/* ~~~~~~~~~~~~~~~~~~ LoadingSpinner Component ~~~~~~~~~~~~~~~~~~ */
.loading-spinner-container {
  @apply flex justify-center items-center p-4;
}
.loading-spinner {
  @apply animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400;
}

/* ~~~~~~~~~~~~~~~~~~ ScaleFinder Component ~~~~~~~~~~~~~~~~~~ */
.scale-finder {
  @apply w-full mx-auto space-y-6;
}
.scale-finder .text-semibold { @apply font-semibold; }
.scale-finder .text-cyan { @apply text-cyan-400; }
.scale-finder .text-error { @apply text-red-400; }

.radio-group {
  @apply flex gap-4;
}
.radio-label {
  @apply flex items-center gap-2 cursor-pointer;
}
.radio-input {
  @apply h-4 w-4 text-cyan-600 bg-slate-700 border-slate-500 focus:ring-cyan-500;
}

.note-display {
  @apply flex items-center gap-4;
}
.note-display__notes {
  @apply font-mono text-cyan-300 min-h-[1.5rem];
}
.note-display-actions {
  @apply flex items-center gap-2;
}

/* Floating Notes Display */
.floating-notes-display {
  @apply fixed top-0 left-0 right-0 z-50 bg-slate-800/90 backdrop-blur-sm border-b border-slate-700 
         py-2 px-4 flex items-center justify-between shadow-lg transform -translate-y-full transition-transform duration-300;
}

.floating-notes-display.visible {
  @apply translate-y-0;
}

.floating-notes-content {
  @apply font-mono text-cyan-300 flex-grow;
}

.floating-clear-btn {
  @apply ml-4;
}

/* Modal Backdrop */
.modal-backdrop {
  @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-40 opacity-0 pointer-events-none transition-opacity duration-300;
}

.modal-backdrop.visible {
  @apply opacity-100 pointer-events-auto;
}

/* Suggestion Overlays - Enhanced Modal */
.suggestions-overlay {
  @apply fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 
         bg-slate-800/95 backdrop-blur-sm border border-slate-600 rounded-xl p-6 shadow-2xl 
         w-11/12 max-w-2xl max-h-[80vh] overflow-y-auto
         opacity-0 scale-95 pointer-events-none transition-all duration-300 ease-out;
  /* Initially hidden, but can be shown by JavaScript */
  display: none;
}

/* When the visible class is added, ensure it's displayed */
.suggestions-overlay.visible {
  @apply opacity-100 scale-100 pointer-events-auto;
  display: block !important;
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .suggestions-overlay {
    @apply w-full h-full max-h-full rounded-none p-4 top-0 left-0 transform-none;
  }
}

.suggestions-overlay h3 {
  @apply text-xl font-bold text-cyan-300 mb-4 border-b border-slate-600 pb-2;
}

.suggestion-close {
  @apply absolute top-2 right-3 text-slate-400 hover:text-white text-2xl cursor-pointer;
}

.suggestion-item {
  @apply mb-4 p-3 bg-slate-700/50 rounded-lg;
}

.suggestion-header {
  @apply font-semibold text-white mb-2;
}

.suggestion-notes {
  @apply text-sm;
}

.suggestion-notes .played {
  @apply text-cyan-300 font-semibold;
}

.suggestion-notes .not-played {
  @apply text-slate-400;
}

.detected-chord, .chord-sequence, .base-key {
  @apply mb-3 p-2 bg-slate-700/30 rounded-md;
}

.clickable-suggestion {
  @apply cursor-pointer hover:bg-slate-600/50 transition-colors;
}

.scale-links {
  @apply mt-2 pt-2 border-t border-slate-600;
}

.scale-link {
  @apply text-cyan-400 hover:text-cyan-200 cursor-pointer underline text-sm font-medium transition-colors;
}

/* Preferences Panel */
.preferences-panel {
  @apply fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 
         bg-slate-800/95 backdrop-blur-sm border border-slate-600 rounded-xl shadow-2xl 
         w-11/12 max-w-2xl max-h-[90vh] overflow-hidden flex flex-col;
}

.preferences-header {
  @apply flex items-center justify-between p-6 border-b border-slate-600;
}

.preferences-header h3 {
  @apply text-xl font-bold text-cyan-300 m-0;
}

.preferences-content {
  @apply flex-1 overflow-y-auto p-6 space-y-6;
}

.preference-section {
  @apply space-y-4;
}

.preference-section-title {
  @apply text-lg font-semibold text-cyan-300 mb-3 border-b border-slate-700 pb-2;
}

.preference-item {
  @apply space-y-2;
}

.preference-label {
  @apply block text-sm font-medium text-cyan-300;
}

.preference-control {
  @apply flex items-center gap-3;
}

.preference-value {
  @apply text-sm text-slate-300 font-mono min-w-[4rem];
}

.preference-description {
  @apply text-xs text-slate-400 leading-relaxed;
}

.preference-checkbox-label {
  @apply flex items-center gap-2 cursor-pointer text-sm text-slate-300;
}

.range-input {
  @apply flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer;
}

.range-input::-webkit-slider-thumb {
  @apply appearance-none w-4 h-4 bg-cyan-500 rounded-full cursor-pointer;
}

.range-input::-moz-range-thumb {
  @apply w-4 h-4 bg-cyan-500 rounded-full cursor-pointer border-0;
}

.checkbox-input {
  @apply h-4 w-4 text-cyan-600 bg-slate-700 border-slate-500 rounded focus:ring-cyan-500;
}

.preferences-footer {
  @apply flex items-center justify-between p-6 border-t border-slate-600 bg-slate-800/50;
}

/* Chord Controls */
.chord-controls {
  @apply p-4 bg-slate-700/30 rounded-lg border border-slate-600;
}

.chord-controls.disabled {
  @apply opacity-50 pointer-events-none;
}

.scale-tables-container {
  @apply space-y-8;
}
.table-container {
  @apply overflow-x-auto;
}

/* Enhanced table layout for adaptive system */
.scale-main-area .table-container {
  @apply overflow-x-auto;
  /* Better scrolling behavior in main area */
}

.scale-main-area .scale-table {
  @apply min-w-full border-collapse text-sm text-slate-300;
  /* Ensure tables use full available width */
}

/* Responsive table adjustments */
@media (min-width: 1280px) {
  .scale-main-area .table-container {
    /* Reduce horizontal scrolling on larger screens */
    @apply overflow-x-visible;
  }

  .scale-main-area .scale-table {
    @apply w-full;
  }
}

/* ~~~~~~~~~~~~~~~~~~ ScaleTable Component ~~~~~~~~~~~~~~~~~~ */
.scale-table {
  @apply min-w-full border-collapse text-sm text-slate-300;
}
.scale-table__header-row {
  @apply bg-slate-800;
}
.scale-table__header-cell {
  @apply p-2 sm:p-3 font-semibold text-left sticky top-0 bg-slate-800 z-10;
}
.scale-table__row {
  @apply border-t border-slate-700;
}
.scale-table__row:first-of-type {
  @apply border-t-0;
}
.scale-table__row--data {
  @apply bg-slate-800/50;
}
.scale-table__row--hovered {
  @apply bg-slate-700;
}

.scale-table__cell {
  @apply p-2 sm:p-3;
}
.scale-table__cell--header {
  @apply font-semibold text-left;
}
.scale-table__cell--note {
  @apply text-center transition-colors duration-150 whitespace-nowrap cursor-pointer bg-slate-700/50;
}
.scale-table__cell--highlighted {
  @apply bg-yellow-400 text-black font-bold ring-2 ring-yellow-200;
}
.scale-table__cell--hovered {
  @apply bg-cyan-600 ring-2 ring-cyan-400;
}
.scale-table__cell--note-match {
  @apply bg-slate-600 border-2 border-cyan-500 box-border;
}

/* ~~~~~~~~~~~~~~~~~~ BachExampleDisplay Component ~~~~~~~~~~~~~~~~~~ */
.bach-example {
  @apply bg-slate-700/50 p-4 rounded-lg;
}
.bach-example__label {
  @apply text-sm font-semibold text-cyan-400;
}
.bach-example__title {
  @apply text-base text-white mt-1;
}
.bach-example__bwv {
  @apply text-slate-400 font-mono text-sm;
}
.bach-example__key {
  @apply text-cyan-200;
}
.bach-example__explanation-container {
  @apply mt-4 text-slate-300;
}
.bach-example__explanation-text {
  @apply whitespace-pre-wrap text-sm leading-relaxed font-sans;
}

/* ~~~~~~~~~~~~~~~~~~ DebugInfoDisplay Component ~~~~~~~~~~~~~~~~~~ */
.debug-info {
  @apply mb-8 bg-slate-900/70 border-2 border-dashed border-yellow-400/50 rounded-xl p-4 space-y-4 animate-fade-in;
}
.debug-info__title {
  @apply text-xl font-bold text-yellow-300;
}
.debug-info__section {
  @apply space-y-2;
}
.debug-info__subtitle {
  @apply font-semibold text-cyan-300;
}
.debug-info__pre {
  @apply bg-slate-950 p-3 rounded-md text-xs text-slate-300 overflow-auto max-h-60;
}

/* ~~~~~~~~~~~~~~~~~~ NearestGuessIcon Component ~~~~~~~~~~~~~~~~~~ */
.nearest-guess-icon {
  @apply relative flex items-center;
}
.nearest-guess-icon__svg {
  @apply w-5 h-5 text-amber-400;
}

/* ~~~~~~~~~~~~~~~~~~ UnifiedMusicTool Component ~~~~~~~~~~~~~~~~~~ */
.unified-music-tool {
  @apply w-full;
}

/* Adaptive Layout System */
.adaptive-layout {
  @apply flex gap-4 transition-all duration-300 ease-in-out;
}

/* Analysis Sidebar */
.analysis-sidebar {
  @apply flex-shrink-0 transition-all duration-300 ease-in-out;
  width: 400px;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar {
  width: 60px;
}

.analysis-sidebar__header {
  @apply flex items-center justify-between p-4 bg-slate-800/60 rounded-t-lg border-b border-slate-600;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__header {
  @apply justify-center p-2;
}

.analysis-sidebar__title {
  @apply text-lg font-semibold text-cyan-300 transition-opacity duration-300;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__title {
  @apply opacity-0 pointer-events-none;
}

.analysis-sidebar__toggle {
  @apply p-2 text-cyan-400 hover:text-cyan-300 hover:bg-slate-700 rounded transition-colors duration-200 flex-shrink-0;
  min-width: 40px;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__toggle {
  @apply p-3;
}

.analysis-sidebar__content {
  @apply transition-all duration-300 ease-in-out overflow-hidden;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__content {
  @apply opacity-0 pointer-events-none;
  height: 0;
}

/* Scale Main Area */
.scale-main-area {
  @apply flex-1 min-w-0 transition-all duration-300 ease-in-out;
}

/* State-based adjustments */
.adaptive-layout.no-results .analysis-sidebar {
  width: 350px;
}

.adaptive-layout.no-results.analysis-collapsed .analysis-sidebar {
  width: 60px;
}

.adaptive-layout.has-results .analysis-sidebar {
  width: 450px;
}

.adaptive-layout.has-results.analysis-collapsed .analysis-sidebar {
  width: 60px;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .adaptive-layout {
    @apply flex-col;
  }

  .analysis-sidebar {
    width: 100% !important;
  }

  .adaptive-layout.analysis-collapsed .analysis-sidebar {
    width: 100% !important;
  }

  .adaptive-layout.analysis-collapsed .analysis-sidebar__content {
    @apply opacity-100 pointer-events-auto;
    height: auto;
  }

  .adaptive-layout.analysis-collapsed .analysis-sidebar__title {
    @apply opacity-100 pointer-events-auto;
  }
}

@media (max-width: 768px) {
  .analysis-sidebar__header {
    @apply p-3;
  }

  .analysis-sidebar__title {
    @apply text-base;
  }
}

/* ~~~~~~~~~~~~~~~~~~ Compact ChordAnalyzer Styles ~~~~~~~~~~~~~~~~~~ */
.chord-analyzer--compact {
  @apply space-y-4;
}

.chord-analyzer--compact .chord-analyzer__input-grid {
  @apply grid-cols-1 sm:grid-cols-2 gap-3;
}

.chord-analyzer--compact .note-selector__grid {
  @apply grid-cols-6 sm:grid-cols-8 gap-2;
}

.chord-analyzer--compact .chord-analyzer__actions {
  @apply flex-col sm:flex-row gap-2;
}

/* ~~~~~~~~~~~~~~~~~~ Embedded ScaleFinder Styles ~~~~~~~~~~~~~~~~~~ */
.scale-finder--embedded {
  @apply space-y-4;
}

.scale-finder--embedded .card {
  @apply p-4;
}

.scale-finder--embedded .scale-tables-container {
  @apply space-y-6;
}
