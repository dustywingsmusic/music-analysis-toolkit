@tailwind base;
@tailwind components;
@tailwind utilities;

/* ~~~~~~~~~~~~~~~~~~ Generic & Reusable Components ~~~~~~~~~~~~~~~~~~ */

body {
  @apply bg-slate-900;
  font-family: "Inter", sans-serif;
  background-color: #0f172a; /* Dark blue-gray background */
  color: #e2e8f0; /* Light gray text */
}


.card {
  @apply p-6 rounded-xl border border-slate-700;
}

.card--blur {
  @apply bg-slate-800/50 shadow-2xl backdrop-blur-sm;
}

.btn {
  @apply font-bold py-3 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900;
}

.btn--primary {
  @apply bg-cyan-600 text-white hover:bg-cyan-500 disabled:bg-slate-600 disabled:cursor-not-allowed focus:ring-cyan-400;
}
.btn--secondary {
  @apply bg-slate-600 text-white hover:bg-slate-500 focus:ring-slate-400;
}
.btn--sm {
  @apply text-xs py-1 px-3;
}
.btn--grow {
  @apply flex-grow flex justify-center items-center gap-2;
}

.label {
  @apply block text-sm font-medium text-cyan-300 mb-1;
}

.text-input,
.select-input {
  @apply w-full bg-slate-700 border border-slate-600 rounded-md py-2 px-3 text-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition;
}
.select-input--half {
  @apply md:w-1/2;
}

.link-button {
  @apply text-cyan-400 hover:text-cyan-200 hover:underline text-sm font-medium transition-colors;
}

.error-box {
  @apply mt-8 text-center p-4 bg-red-900/50 text-red-300 border border-red-700 rounded-lg;
}

.section-title {
  @apply text-2xl font-bold mb-4;
}
.section-title--cyan { @apply text-cyan-300; }
.section-title--teal { @apply text-teal-300; }
.section-title--amber { @apply text-amber-300; }
.section-title--violet { @apply text-violet-300; }

.subsection-title {
  @apply text-lg font-semibold text-cyan-300 mb-3 border-b-2 border-slate-700 pb-2;
}

.prose-styles {
  @apply max-w-none text-slate-200 leading-relaxed;
}

.tooltip {
  @apply absolute bottom-full mb-2 w-max max-w-xs px-3 py-2 text-xs font-medium text-white bg-slate-800 border border-slate-600 rounded-lg shadow-lg opacity-0 transition-opacity pointer-events-none;
}
.group:hover .tooltip {
  @apply opacity-100;
}

/* ~~~~~~~~~~~~~~~~~~ App Layout ~~~~~~~~~~~~~~~~~~ */

.app-container {
  @apply min-h-screen bg-slate-900 text-slate-200 flex flex-col;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.main-content {
  @apply w-full mx-auto px-4 sm:px-6 lg:px-8;
  @apply flex-1 flex flex-col;
}

.app-header { @apply text-center mb-8; }
.app-header__title-wrapper { @apply flex justify-center items-center gap-4 mb-2; }
.app-header__icon { @apply h-10 w-10 text-cyan-400; }
.app-header__title { @apply text-4xl sm:text-5xl font-extrabold text-white tracking-tight; }
.app-header__subtitle { @apply text-slate-400 max-w-2xl mx-auto; }
.app-footer { @apply text-center mt-12 text-slate-500 text-sm; }

.view-controls {
  @apply flex justify-center items-center gap-4 mb-8;
}

.view-switcher {
  @apply flex justify-center bg-slate-800 p-2 rounded-lg gap-2;
}

.nav-button {
  @apply px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-800;
}
.nav-button:not(.nav-button--active) {
  @apply bg-slate-700 text-slate-300 hover:bg-slate-600;
}
.nav-button--active {
  @apply bg-cyan-600 text-white;
}

/* ~~~~~~~~~~~~~~~~~~ ToggleSwitch Component ~~~~~~~~~~~~~~~~~~ */

.toggle-switch {
  @apply flex items-center justify-center space-x-2;
}

.toggle-switch__label {
  @apply font-medium transition-colors text-slate-400;
}
.toggle-switch__label--active {
  @apply text-cyan-300;
}

.toggle-switch__button {
  @apply relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-cyan-500;
}
.toggle-switch__button--on { @apply bg-cyan-600; }
.toggle-switch__button--off { @apply bg-slate-600; }

.toggle-switch__slider {
  @apply inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200;
}
.toggle-switch__slider--on { @apply translate-x-5; }
.toggle-switch__slider--off { @apply translate-x-0; }

/* ~~~~~~~~~~~~~~~~~~ ChordAnalyzer Component ~~~~~~~~~~~~~~~~~~ */
.chord-analyzer {
  @apply w-full max-w-2xl mx-auto;
}
.chord-analyzer__toggle-container {
  @apply flex justify-center mb-6;
}
.chord-analyzer__input-grid {
  @apply grid grid-cols-1 md:grid-cols-2 gap-4;
}
.chord-analyzer__actions {
  @apply mt-6 flex items-center gap-4;
}
.chord-analyzer__output {
  @apply mt-8;
}

.note-selector {
  @apply mt-4 flex flex-wrap gap-2;
}
.note-selector__grid {
  @apply grid grid-cols-6 gap-2;
}
.note-selector__note {
  @apply flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors border-2 bg-slate-700 border-slate-600 hover:bg-slate-600;
}
.note-selector__note--selected {
  @apply bg-cyan-600 border-cyan-400;
}
.note-selector__note-text {
  @apply font-mono text-white select-none;
}


/* ~~~~~~~~~~~~~~~~~~ ResultDisplay Component ~~~~~~~~~~~~~~~~~~ */
.result-display {
  @apply mt-8 w-full space-y-8 animate-fade-in;
}

.info-pair {
  @apply bg-slate-700/50 p-4 rounded-lg;
}
.info-pair__label {
  @apply text-sm font-bold text-cyan-400;
}
.info-pair__value {
  @apply text-lg text-white;
}
.info-pair__value--mono {
  @apply font-mono;
}

.song-example-item {
  @apply flex items-start bg-slate-700/50 p-4 rounded-lg transition-all hover:bg-slate-700;
}
.song-example-item__icon {
  @apply h-5 w-5 mt-1 mr-4 text-teal-400 flex-shrink-0;
}
.song-example-item__usage {
  @apply text-sm text-slate-300 mt-2 italic bg-slate-600/50 p-2 rounded;
}

/* ~~~~~~~~~~~~~~~~~~ LoadingSpinner Component ~~~~~~~~~~~~~~~~~~ */
.loading-spinner-container {
  @apply flex justify-center items-center p-4;
}
.loading-spinner {
  @apply animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400;
}

/* ~~~~~~~~~~~~~~~~~~ ScaleFinder Component ~~~~~~~~~~~~~~~~~~ */
.scale-finder {
  @apply w-full mx-auto space-y-6;
}
.scale-finder .text-semibold { @apply font-semibold; }
.scale-finder .text-cyan { @apply text-cyan-400; }
.scale-finder .text-error { @apply text-red-400; }

.radio-group {
  @apply flex gap-4;
}
.radio-label {
  @apply flex items-center gap-2 cursor-pointer;
}
.radio-input {
  @apply h-4 w-4 text-cyan-600 bg-slate-700 border-slate-500 focus:ring-cyan-500;
}

.note-display {
  @apply flex items-center gap-4;
}
.note-display__notes {
  @apply font-mono text-cyan-300 min-h-[1.5rem];
}
.note-display-actions {
  @apply flex items-center gap-2;
}


/* Modal Backdrop */
.modal-backdrop {
  @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-40 opacity-0 pointer-events-none transition-opacity duration-300;
}

.modal-backdrop.visible {
  @apply opacity-100 pointer-events-auto;
}

/* Suggestion Overlays - Enhanced Modal */
.suggestions-overlay {
  @apply fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 
         bg-slate-800/95 backdrop-blur-sm border border-slate-600 rounded-xl p-6 shadow-2xl 
         w-11/12 max-w-2xl max-h-[80vh] overflow-y-auto
         opacity-0 scale-95 pointer-events-none transition-all duration-300 ease-out;
  /* Initially hidden, but can be shown by JavaScript */
  display: none;
}

/* When the visible class is added, ensure it's displayed */
.suggestions-overlay.visible {
  @apply opacity-100 scale-100 pointer-events-auto;
  display: block !important;
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .suggestions-overlay {
    @apply w-full h-full max-h-full rounded-none p-4 top-0 left-0 transform-none;
  }
}

.suggestions-overlay h3 {
  @apply text-xl font-bold text-cyan-300 mb-4 border-b border-slate-600 pb-2;
}

.suggestion-close {
  @apply absolute top-2 right-3 text-slate-400 hover:text-white text-2xl cursor-pointer;
}

.suggestion-item {
  @apply mb-4 p-3 bg-slate-700/50 rounded-lg;
}

.suggestion-header {
  @apply font-semibold text-white mb-2;
}

.suggestion-notes {
  @apply text-sm;
}

.suggestion-notes .played {
  @apply text-cyan-300 font-semibold;
}

.suggestion-notes .not-played {
  @apply text-slate-400;
}

.detected-chord, .chord-sequence, .base-key {
  @apply mb-3 p-2 bg-slate-700/30 rounded-md;
}

.clickable-suggestion {
  @apply cursor-pointer hover:bg-slate-600/50 transition-colors;
}

.scale-links {
  @apply mt-2 pt-2 border-t border-slate-600;
}

.scale-link {
  @apply text-cyan-400 hover:text-cyan-200 cursor-pointer underline text-sm font-medium transition-colors;
}

/* Preferences Panel */
.preferences-panel {
  @apply fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 
         bg-slate-800/95 backdrop-blur-sm border border-slate-600 rounded-xl shadow-2xl 
         w-11/12 max-w-2xl max-h-[90vh] overflow-hidden flex flex-col;
}

.preferences-header {
  @apply flex items-center justify-between p-6 border-b border-slate-600;
}

.preferences-header h3 {
  @apply text-xl font-bold text-cyan-300 m-0;
}

.preferences-content {
  @apply flex-1 overflow-y-auto p-6 space-y-6;
}

.preference-section {
  @apply space-y-4;
}

.preference-section-title {
  @apply text-lg font-semibold text-cyan-300 mb-3 border-b border-slate-700 pb-2;
}

.preference-item {
  @apply space-y-2;
}

.preference-label {
  @apply block text-sm font-medium text-cyan-300;
}

.preference-control {
  @apply flex items-center gap-3;
}

.preference-value {
  @apply text-sm text-slate-300 font-mono min-w-[4rem];
}

.preference-description {
  @apply text-xs text-slate-400 leading-relaxed;
}

.preference-checkbox-label {
  @apply flex items-center gap-2 cursor-pointer text-sm text-slate-300;
}

.range-input {
  @apply flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer;
}

.range-input::-webkit-slider-thumb {
  @apply appearance-none w-4 h-4 bg-cyan-500 rounded-full cursor-pointer;
}

.range-input::-moz-range-thumb {
  @apply w-4 h-4 bg-cyan-500 rounded-full cursor-pointer border-0;
}

.checkbox-input {
  @apply h-4 w-4 text-cyan-600 bg-slate-700 border-slate-500 rounded focus:ring-cyan-500;
}

.preferences-footer {
  @apply flex items-center justify-between p-6 border-t border-slate-600 bg-slate-800/50;
}

/* Chord Controls */
.chord-controls {
  @apply p-4 bg-slate-700/30 rounded-lg border border-slate-600;
}

.chord-controls.disabled {
  @apply opacity-50 pointer-events-none;
}

.scale-tables-container {
  @apply space-y-8;
}
.table-container {
  @apply overflow-x-auto;
}

/* Enhanced table layout for adaptive system */
.scale-main-area .table-container {
  @apply overflow-x-auto;
  /* Better scrolling behavior in main area */
}

.scale-main-area .scale-table {
  @apply min-w-full border-collapse text-sm text-slate-300;
  /* Ensure tables use full available width */
}

/* Responsive table adjustments */
@media (min-width: 1280px) {
  .scale-main-area .table-container {
    /* Reduce horizontal scrolling on larger screens */
    @apply overflow-x-visible;
  }

  .scale-main-area .scale-table {
    @apply w-full;
  }
}

/* ~~~~~~~~~~~~~~~~~~ ScaleTable Component ~~~~~~~~~~~~~~~~~~ */
.scale-table {
  @apply min-w-full border-collapse text-sm text-slate-300;
}
.scale-table__header-row {
  @apply bg-slate-800;
}
.scale-table__header-cell {
  @apply p-2 sm:p-3 font-semibold text-left sticky top-0 bg-slate-800 z-10;
}
.scale-table__row {
  @apply border-t border-slate-700;
}
.scale-table__row:first-of-type {
  @apply border-t-0;
}
.scale-table__row--data {
  @apply bg-slate-800/50;
}
.scale-table__row--hovered {
  @apply bg-slate-700;
}

.scale-table__cell {
  @apply p-2 sm:p-3;
}
.scale-table__cell--header {
  @apply font-semibold text-left;
}
.scale-table__cell--note {
  @apply text-center transition-colors duration-150 whitespace-nowrap cursor-pointer bg-slate-700/50;
}
.scale-table__cell--highlighted {
  @apply bg-yellow-400 text-black font-bold ring-2 ring-yellow-200;
}
.scale-table__cell--hovered {
  @apply bg-cyan-600 ring-2 ring-cyan-400;
}
.scale-table__cell--note-match {
  @apply bg-slate-600 border-2 border-cyan-500 box-border;
}

/* ~~~~~~~~~~~~~~~~~~ BachExampleDisplay Component ~~~~~~~~~~~~~~~~~~ */
.bach-example {
  @apply bg-slate-700/50 p-4 rounded-lg;
}
.bach-example__label {
  @apply text-sm font-semibold text-cyan-400;
}
.bach-example__title {
  @apply text-base text-white mt-1;
}
.bach-example__bwv {
  @apply text-slate-400 font-mono text-sm;
}
.bach-example__key {
  @apply text-cyan-200;
}
.bach-example__explanation-container {
  @apply mt-4 text-slate-300;
}
.bach-example__explanation-text {
  @apply whitespace-pre-wrap text-sm leading-relaxed font-sans;
}

/* ~~~~~~~~~~~~~~~~~~ DebugInfoDisplay Component ~~~~~~~~~~~~~~~~~~ */
.debug-info {
  @apply mb-8 bg-slate-900/70 border-2 border-dashed border-yellow-400/50 rounded-xl p-4 space-y-4 animate-fade-in;
}
.debug-info__title {
  @apply text-xl font-bold text-yellow-300;
}
.debug-info__section {
  @apply space-y-2;
}
.debug-info__subtitle {
  @apply font-semibold text-cyan-300;
}
.debug-info__pre {
  @apply bg-slate-950 p-3 rounded-md text-xs text-slate-300 overflow-auto max-h-60;
}

/* ~~~~~~~~~~~~~~~~~~ NearestGuessIcon Component ~~~~~~~~~~~~~~~~~~ */
.nearest-guess-icon {
  @apply relative flex items-center;
}
.nearest-guess-icon__svg {
  @apply w-5 h-5 text-amber-400;
}

/* ~~~~~~~~~~~~~~~~~~ UnifiedMusicTool Component ~~~~~~~~~~~~~~~~~~ */
.unified-music-tool {
  @apply w-full;
}

/* Adaptive Layout System */
.adaptive-layout {
  @apply flex gap-4 transition-all duration-300 ease-in-out;
}

/* Analysis Sidebar */
.analysis-sidebar {
  @apply flex-shrink-0 transition-all duration-300 ease-in-out;
  width: 500px;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar {
  width: 60px;
}

.analysis-sidebar__header {
  @apply flex items-center justify-between p-4 bg-slate-800/60 rounded-t-lg border-b border-slate-600;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__header {
  @apply justify-center p-2;
}

.analysis-sidebar__title {
  @apply text-lg font-semibold text-cyan-300 transition-opacity duration-300;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__title {
  @apply opacity-0 pointer-events-none;
}

.analysis-sidebar__toggle {
  @apply p-2 text-cyan-400 hover:text-cyan-300 hover:bg-slate-700 rounded transition-colors duration-200 flex-shrink-0;
  min-width: 40px;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__toggle {
  @apply p-3;
}

.analysis-sidebar__content {
  @apply transition-all duration-300 ease-in-out overflow-hidden;
}

.adaptive-layout.analysis-collapsed .analysis-sidebar__content {
  @apply opacity-0 pointer-events-none;
  height: 0;
}

/* Scale Main Area */
.scale-main-area {
  @apply flex-1 min-w-0 transition-all duration-300 ease-in-out;
}

/* State-based adjustments */
.adaptive-layout.no-results .analysis-sidebar {
  width: 350px;
}

.adaptive-layout.no-results.analysis-collapsed .analysis-sidebar {
  width: 60px;
}

.adaptive-layout.has-results .analysis-sidebar {
  width: 450px;
}

.adaptive-layout.has-results.analysis-collapsed .analysis-sidebar {
  width: 60px;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .adaptive-layout {
    @apply flex-col;
  }

  .analysis-sidebar {
    width: 100% !important;
  }

  .adaptive-layout.analysis-collapsed .analysis-sidebar {
    width: 100% !important;
  }

  .adaptive-layout.analysis-collapsed .analysis-sidebar__content {
    @apply opacity-100 pointer-events-auto;
    height: auto;
  }

  .adaptive-layout.analysis-collapsed .analysis-sidebar__title {
    @apply opacity-100 pointer-events-auto;
  }
}

@media (max-width: 768px) {
  .analysis-sidebar__header {
    @apply p-3;
  }

  .analysis-sidebar__title {
    @apply text-base;
  }
}

/* ~~~~~~~~~~~~~~~~~~ Compact ChordAnalyzer Styles ~~~~~~~~~~~~~~~~~~ */
.chord-analyzer--compact {
  @apply space-y-4;
}

.chord-analyzer--compact .chord-analyzer__input-grid {
  @apply grid-cols-1 sm:grid-cols-2 gap-3;
}

.chord-analyzer--compact .note-selector__grid {
  @apply grid-cols-6 sm:grid-cols-8 gap-2;
}

.chord-analyzer--compact .chord-analyzer__actions {
  @apply flex-col sm:flex-row gap-2;
}

/* ~~~~~~~~~~~~~~~~~~ Embedded ScaleFinder Styles ~~~~~~~~~~~~~~~~~~ */
.scale-finder--embedded {
  @apply space-y-4;
}

.scale-finder--embedded .card {
  @apply p-4;
}

.scale-finder--embedded .scale-tables-container {
  @apply space-y-6;
}

/* ~~~~~~~~~~~~~~~~~~ Question-Driven Music Tool ~~~~~~~~~~~~~~~~~~ */
.question-driven-music-tool {
  @apply w-full flex-1 flex flex-col;
}

.tool-content {
  @apply flex gap-6;
}

/* New layout with sidebar similar to example_layout.html */
.tool-content-with-sidebar {
  @apply flex flex-1 overflow-hidden mt-6;
}

.main-panel {
  @apply flex-1 min-w-0;
}

/* Adjust main panel when sidebar is visible to prevent overlap */
.tool-content-with-sidebar--with-sidebar .main-panel {
  @apply pr-80 lg:pr-96;
}

/* Analysis Results Sidebar - matches example layout */
.analysis-results-sidebar {
  @apply w-80 lg:w-96 flex-shrink-0;
  @apply fixed top-0 right-0 h-screen overflow-y-auto z-40;
  @apply bg-slate-800 border-l border-slate-600;
  @apply transition-transform duration-300 ease-in-out;
}

.analysis-results-sidebar--hidden {
  @apply transform translate-x-full opacity-0 pointer-events-none;
}

/* Custom scrollbar styling for sidebar */
.analysis-results-sidebar::-webkit-scrollbar {
  width: 8px;
}

.analysis-results-sidebar::-webkit-scrollbar-track {
  background: #1e293b;
}

.analysis-results-sidebar::-webkit-scrollbar-thumb {
  background-color: #475569;
  border-radius: 4px;
  border: 2px solid #1e293b;
}

/* Fixed Analysis Sidebar that moves with scroll and sizes with content */
.analysis-sidebar {
  position: fixed;
  top: 4rem;
  right: 1.5rem;
  width: auto; /* Size based on content */
  min-width: 20rem; /* Minimum width for readability */
  max-width: 30rem; /* Maximum width to prevent excessive size */
  background-color: #1e293b; /* Slightly lighter dark blue for sidebar */
  border-left: 1px solid #334155; /* Subtle border */
  padding: 1.5rem; /* p-6 */
  border-radius: 0.5rem; /* rounded-lg for a softer look */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Subtle shadow */
  overflow-y: auto; /* Enable scrolling if content overflows */
  max-height: calc(100vh - 5rem); /* Full height minus top offset */
  height: auto; /* Size based on content height */
  z-index: 10; /* Ensure it stays above other content */
}

/* Basic scrollbar styling for better aesthetics */
.analysis-sidebar::-webkit-scrollbar {
  width: 8px;
}

.analysis-sidebar::-webkit-scrollbar-track {
  background: #1e293b;
}

.analysis-sidebar::-webkit-scrollbar-thumb {
  background-color: #475569;
  border-radius: 4px;
  border: 2px solid #1e293b;
}

/* Main content area adjustments when sidebar is visible */
.with-sidebar {
  margin-right: 22rem; /* Account for sidebar min-width + padding + margin */
}

/* Responsive adjustments for smaller screens */
@media (max-width: 1200px) {
  .with-sidebar {
    margin-right: 0; /* Remove margin on smaller screens */
  }

  .analysis-sidebar {
    position: fixed;
    top: 1rem;
    right: 1rem;
    left: 1rem;
    width: auto;
    min-width: auto;
    max-width: none;
  }
}

/* User Inputs Display Section */
.user-inputs-section {
  @apply mb-6 p-4 bg-slate-700/50 rounded-lg border border-slate-600;
}

.user-inputs-section h4 {
  @apply text-lg font-semibold text-cyan-300 mb-3;
}

.user-inputs-content {
  @apply space-y-2;
}

.input-display {
  @apply flex flex-col space-y-1;
}

.input-label {
  @apply text-sm font-medium text-slate-300;
}

.input-value {
  @apply text-white bg-slate-800 px-3 py-2 rounded border border-slate-600 font-mono text-sm;
  word-break: break-word;
}

.input-meta {
  @apply flex items-center justify-between text-xs text-slate-400;
}

.input-method {
  @apply capitalize;
}

.input-error {
  @apply text-red-400 font-medium;
}

.input-actions {
  @apply mt-3 flex justify-start;
}

/* Utility Classes */
.ml-2 {
  margin-left: 0.5rem;
}

/* History Input Display */
.unified-results-panel__history-input {
  @apply mt-1 mb-2 text-xs;
}

.history-input-label {
  @apply text-slate-400 font-medium;
}

.history-input-value {
  @apply text-slate-300 ml-1 font-mono;
}

/* Tab Content Wrapper - creates layout for tab content and results */
.tab-content-wrapper {
  @apply space-y-6;
}

/* Tab with Results Layout */
.tab-with-results {
  @apply flex gap-6;
}

.tab-with-results .mode-identification-tab,
.tab-with-results .mode-discovery-tab,
.tab-with-results .harmony-tab,
.tab-with-results .reference-tab {
  @apply flex-1 min-w-0;
}

.tab-with-results .unified-results-container {
  @apply w-96 flex-shrink-0;
}

.results-sidebar {
  @apply w-80 flex-shrink-0;
}

.debug-panel {
  @apply mt-8 p-4 bg-slate-800/50 rounded-lg border border-yellow-400/50;
}

/* ~~~~~~~~~~~~~~~~~~ Navigation Tabs ~~~~~~~~~~~~~~~~~~ */
.navigation-tabs {
  @apply w-full mb-6;
}

.navigation-tabs__container {
  @apply flex justify-center bg-slate-800 p-2 rounded-lg gap-2;
}

.navigation-tabs__tab {
  @apply px-6 py-3 text-sm font-medium rounded-md transition-colors duration-200 
         focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-800
         bg-slate-700 text-slate-300 hover:bg-slate-600;
}

.navigation-tabs__tab--active {
  @apply bg-cyan-600 text-white hover:bg-cyan-500;
}

/* Tab Status Indicators */
.navigation-tabs__tab-label {
  @apply mr-2;
}

.navigation-tabs__tab-status {
  @apply text-xs font-bold;
}

.navigation-tabs__tab-status--complete {
  @apply text-green-400;
}

.navigation-tabs__tab-status--partial {
  @apply text-yellow-400;
}

.navigation-tabs__tab-status--incomplete {
  @apply text-red-400;
}

/* Tab Status Styling */
.navigation-tabs__tab--complete {
  @apply border-l-4 border-green-400;
}

.navigation-tabs__tab--partial {
  @apply border-l-4 border-yellow-400 opacity-80;
}

.navigation-tabs__tab--incomplete {
  @apply border-l-4 border-red-400 opacity-60;
}

/* ~~~~~~~~~~~~~~~~~~ Tab Content Components ~~~~~~~~~~~~~~~~~~ */
.tab-header {
  @apply text-center mb-8;
}

.tab-header__title {
  @apply text-3xl font-bold text-white mb-2;
}

.tab-header__subtitle {
  @apply text-slate-400 max-w-2xl mx-auto;
}

/* Method Selector */
.method-selector {
  @apply mb-8;
}

.method-selector__grid {
  @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4;
}

.method-selector__card {
  @apply p-4 rounded-lg border-2 border-slate-600 bg-slate-700/50 
         hover:bg-slate-700 hover:border-slate-500 transition-all duration-200
         focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-900
         disabled:opacity-50 disabled:cursor-not-allowed;
}

.method-selector__card--active {
  @apply border-cyan-500 bg-cyan-600/20 hover:bg-cyan-600/30;
}

.method-selector__card-title {
  @apply text-lg font-semibold text-white mb-2;
}

.method-selector__card-description {
  @apply text-sm text-slate-300;
}

/* Method Card Status Indicators */
.method-selector__card-header {
  @apply flex justify-between items-start mb-2;
}

.method-selector__card-status {
  @apply text-xs font-bold ml-2 flex-shrink-0;
}

.method-selector__card-status--complete {
  @apply text-green-400;
}

.method-selector__card-status--partial {
  @apply text-yellow-400;
}

.method-selector__card-status--not-implemented {
  @apply text-red-400;
}

.method-selector__card-status-label {
  @apply text-xs text-slate-400 mt-2 font-medium;
}

/* Method Card Status Styling */
.method-selector__card--complete {
  @apply border-l-4 border-green-400;
}

.method-selector__card--partial {
  @apply border-l-4 border-yellow-400 opacity-80;
}

.method-selector__card--not-implemented {
  @apply border-l-4 border-red-400 opacity-60;
}

/* Input Panels */
.input-section {
  @apply space-y-6;
}

.input-panel {
  @apply space-y-4;
}

.input-panel__label {
  @apply block text-sm font-medium text-cyan-300 mb-2;
}

.input-panel__input {
  @apply w-full bg-slate-700 border border-slate-600 rounded-md py-3 px-4 text-white 
         focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition;
}

.input-panel__textarea {
  @apply w-full bg-slate-700 border border-slate-600 rounded-md py-3 px-4 text-white 
         focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition resize-y;
}

.input-panel__select {
  @apply w-full bg-slate-700 border border-slate-600 rounded-md py-3 px-4 text-white 
         focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition;
}

.input-panel__help {
  @apply text-sm text-slate-400;
}

/* Input Validation Feedback */
.validation-feedback {
  @apply mt-3 space-y-2;
}

.validation-feedback__issue {
  @apply p-3 bg-amber-900/30 border border-amber-600/50 rounded-md;
}

.validation-feedback__message {
  @apply flex items-center gap-2 text-amber-200 font-medium mb-2;
}

.validation-feedback__icon {
  @apply text-amber-400;
}

.validation-feedback__suggestion {
  @apply text-sm text-amber-100 mb-3;
}

.validation-feedback__switch-btn {
  @apply px-3 py-1 text-sm bg-amber-600 hover:bg-amber-500 text-white rounded 
         transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-amber-400;
}

.input-panel__placeholder {
  @apply text-center py-8 text-slate-400;
}

.input-section__actions {
  @apply flex justify-center;
}

/* Note Selector for Discovery Tab */
.note-selector__note {
  @apply px-4 py-2 rounded-md border-2 border-slate-600 bg-slate-700 text-white
         hover:bg-slate-600 transition-colors duration-200 cursor-pointer
         focus:outline-none focus:ring-2 focus:ring-cyan-400;
}

.note-selector__note--active {
  @apply border-cyan-500 bg-cyan-600 hover:bg-cyan-500;
}

/* Harmony Tab Specific */
.chord-examples {
  @apply mt-4;
}

.chord-examples__list {
  @apply flex flex-wrap gap-2 mt-2;
}

.chord-example {
  @apply px-3 py-1 text-sm bg-slate-600 text-white rounded hover:bg-slate-500 transition-colors;
}

.progression-examples {
  @apply mt-4;
}

.progression-examples__list {
  @apply space-y-2 mt-2;
}

.progression-example {
  @apply block w-full text-left px-3 py-2 text-sm bg-slate-600 text-white rounded 
         hover:bg-slate-500 transition-colors;
}

.compare-inputs {
  @apply grid grid-cols-1 md:grid-cols-2 gap-4;
}

.compare-input {
  @apply space-y-2;
}

.selected-notes {
  @apply mt-3 p-3 bg-slate-600/50 rounded-md text-sm text-cyan-300;
}

/* Mode Info */
.mode-info {
  @apply mt-4 space-y-2;
}

.substitution-options {
  @apply mt-4;
}

.substitution-options ul {
  @apply mt-2 space-y-1;
}

.substitution-options li {
  @apply text-sm text-slate-300;
}

/* Reference Tab */
.reference-controls {
  @apply grid grid-cols-1 md:grid-cols-2 gap-6 mb-8;
}

.search-section,
.filter-section {
  @apply space-y-2;
}

.reference-content {
  @apply space-y-8;
}

.quick-reference__title {
  @apply text-2xl font-bold text-cyan-300 mb-6;
}

.reference-section {
  @apply mb-8;
}

.reference-section__title {
  @apply text-xl font-semibold text-white mb-4;
}

.reference-grid {
  @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4;
}

.reference-card {
  @apply p-4 bg-slate-700/50 rounded-lg border border-slate-600;
}

.reference-card__name {
  @apply text-lg font-semibold text-cyan-300 mb-2;
}

.reference-card__formula {
  @apply font-mono text-sm text-slate-300 mb-2;
}

.reference-card__character {
  @apply text-sm text-slate-400 italic;
}

.scale-tables-section {
  @apply mt-8;
}

.scale-tables__title {
  @apply text-2xl font-bold text-cyan-300 mb-4;
}

.scale-tables__description {
  @apply text-slate-400 mb-6;
}

.scale-finder-container {
  @apply bg-slate-800/50 rounded-lg p-6;
}

.reference-footer {
  @apply mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-slate-700;
}

.legend__title,
.tips__title {
  @apply text-lg font-semibold text-cyan-300 mb-3;
}

.legend__items {
  @apply space-y-2;
}

.legend__item {
  @apply flex items-center gap-3;
}

.legend__symbol {
  @apply font-mono text-cyan-300 font-bold;
}

.legend__text {
  @apply text-sm text-slate-300;
}

.tips__list {
  @apply space-y-2 text-sm text-slate-300;
}

/* Results Panel */
.results-panel {
  @apply bg-slate-800/50 rounded-lg border border-slate-600 overflow-hidden;
}

.results-panel__header {
  @apply flex items-center justify-between p-4 border-b border-slate-600 bg-slate-800/70;
}

.results-panel__title {
  @apply text-lg font-semibold text-cyan-300;
}

.results-panel__close {
  @apply text-slate-400 hover:text-white text-xl cursor-pointer p-1;
}

.results-panel__content {
  @apply p-4 space-y-6;
}

.primary-result {
  @apply space-y-3;
}

.primary-result h4 {
  @apply text-lg font-semibold text-white;
}

.primary-result p {
  @apply text-slate-300;
}

.primary-result pre {
  @apply bg-slate-900 p-3 rounded text-xs text-slate-300 overflow-auto;
}

.secondary-results {
  @apply space-y-4;
}

.related-info {
  @apply space-y-3;
}

.related-info h5 {
  @apply font-semibold text-cyan-300;
}

.related-info ul {
  @apply space-y-1 text-sm text-slate-300;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .tool-content {
    @apply flex-col;
  }

  .results-sidebar {
    @apply w-full;
  }

  .method-selector__grid {
    @apply grid-cols-1 md:grid-cols-2;
  }

  /* Stack tab content and results vertically on smaller screens */
  .tab-with-results {
    @apply flex-col;
  }

  .tab-with-results .unified-results-container {
    @apply w-full;
  }
}

@media (max-width: 768px) {
  .navigation-tabs__container {
    @apply flex-wrap;
  }

  .navigation-tabs__tab {
    @apply px-4 py-2 text-xs;
  }

  .reference-grid {
    @apply grid-cols-1;
  }

  .compare-inputs {
    @apply grid-cols-1;
  }
}

/* ~~~~~~~~~~~~~~~~~~ Debug Overlay ~~~~~~~~~~~~~~~~~~ */
.debug-overlay {
  @apply fixed top-4 right-4 w-96 max-h-[80vh] overflow-y-auto z-50 bg-slate-900/95 border border-orange-500 rounded-lg shadow-2xl backdrop-blur-sm;
}

.debug-overlay__content {
  @apply p-4;
}

.debug-overlay__header {
  @apply flex items-center justify-between mb-4 pb-2 border-b border-orange-500/30;
}

.debug-overlay__header h3 {
  @apply text-lg font-bold text-orange-400;
}

.debug-overlay__timestamp {
  @apply text-xs text-slate-400 font-mono;
}

.debug-overlay__section {
  @apply mb-4 pb-4 border-b border-slate-700 last:border-b-0;
}

.debug-overlay__section h4 {
  @apply text-sm font-semibold text-orange-300 mb-3;
}

.debug-info-grid {
  @apply grid grid-cols-2 gap-2 mb-3;
}

.debug-info-item {
  @apply flex flex-col gap-1;
}

.debug-info-item--full {
  @apply col-span-2;
}

.debug-label {
  @apply text-xs font-medium text-slate-400;
}

.debug-value {
  @apply text-sm text-white;
}

.debug-value--mono {
  @apply font-mono text-xs;
}

.debug-value--success {
  @apply text-green-400;
}

.debug-value--warning {
  @apply text-yellow-400;
}

.debug-value--error {
  @apply text-red-400;
}

.debug-value--highlight {
  @apply text-orange-300 font-medium;
}

.debug-matches {
  @apply mt-3;
}

.debug-matches-list {
  @apply mt-2 space-y-2 max-h-32 overflow-y-auto;
}

.debug-match-item {
  @apply bg-slate-800/50 p-2 rounded text-xs border border-slate-700;
}

.debug-match-item--more {
  @apply text-slate-400 italic text-center;
}

.debug-match-name {
  @apply block font-medium text-white;
}

.debug-match-root {
  @apply block text-cyan-300;
}

.debug-match-id {
  @apply block text-slate-400 font-mono;
}

/* Responsive debug overlay */
@media (max-width: 768px) {
  .debug-overlay {
    @apply w-80 top-2 right-2;
  }
}

@media (max-width: 640px) {
  .debug-overlay {
    @apply w-72 max-h-[70vh];
  }
}

/* ~~~~~~~~~~~~~~~~~~ Unified Results Display System ~~~~~~~~~~~~~~~~~~ */

/* Always-visible Results Access Button */
.unified-results-access {
  @apply fixed top-20 right-4 z-40;
}

.unified-results-access__btn {
  @apply bg-cyan-600 hover:bg-cyan-500 text-white px-4 py-2 rounded-lg shadow-lg transition-all duration-200 text-sm font-medium;
}

.unified-results-access__btn:hover {
  @apply transform scale-105 shadow-xl;
}

/* Unified Results Container */
.unified-results-container {
  @apply relative;
  @apply transition-all duration-300 ease-in-out;
}

.unified-results-container--sidebar {
  @apply w-full max-w-md;
  @apply transform transition-transform duration-300 ease-in-out;
}

.unified-results-container--floating {
  @apply fixed top-24 right-4 w-96 max-w-[90vw] z-50;
  @apply transform transition-all duration-300 ease-in-out;
}

.unified-results-container--docked {
  @apply fixed z-50;
  @apply transform transition-all duration-300 ease-in-out;
}

/* Enhanced panel animations */
.unified-results-container--sidebar {
  @apply translate-x-0 opacity-100;
}

.unified-results-container--floating {
  @apply translate-x-0 translate-y-0 opacity-100 scale-100;
}

/* Hidden state animations */
.unified-results-container--hidden {
  @apply pointer-events-none;
}

.unified-results-container--sidebar.unified-results-container--hidden {
  @apply translate-x-full opacity-0;
}

.unified-results-container--floating.unified-results-container--hidden {
  @apply translate-x-4 translate-y-2 opacity-0 scale-95;
}

.unified-results-container--docked.unified-results-container--hidden {
  @apply translate-y-full opacity-0;
}

/* Unified Results Panel */
.unified-results-panel {
  @apply bg-slate-800/95 rounded-lg border border-slate-600 overflow-hidden shadow-2xl backdrop-blur-sm;
}

.unified-results-panel--sidebar {
  @apply h-full;
}

.unified-results-panel--floating {
  @apply max-h-[80vh] resize-y overflow-hidden;
}

.unified-results-panel--docked {
  @apply h-full;
}

/* Enhanced Header */
.unified-results-panel__header {
  @apply flex items-center justify-between p-4 border-b border-slate-600 bg-slate-800/90;
}

.unified-results-panel__title-section {
  @apply flex-1 min-w-0;
}

.unified-results-panel__title {
  @apply text-lg font-semibold text-cyan-300 truncate;
}

.unified-results-panel__meta {
  @apply mt-1;
}

.unified-results-panel__history-count {
  @apply text-xs text-slate-400;
}

.unified-results-panel__controls {
  @apply flex items-center gap-2 ml-4;
}

.unified-results-panel__control-btn {
  @apply w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded transition-colors duration-200 text-sm;
}

.unified-results-panel__control-btn:disabled {
  @apply opacity-50 cursor-not-allowed hover:text-slate-400 hover:bg-transparent;
}

.unified-results-panel__control-btn.active {
  @apply text-cyan-300 bg-slate-700;
}

.unified-results-panel__position-controls {
  @apply flex items-center gap-1 border-r border-slate-600 pr-2 mr-2;
}

.unified-results-panel__close {
  @apply text-slate-400 hover:text-white text-xl cursor-pointer p-1 hover:bg-slate-700 rounded transition-colors duration-200;
}

/* History Browser */
.unified-results-panel__history {
  @apply border-b border-slate-600 bg-slate-800/50 p-4;
}

.unified-results-panel__history h4 {
  @apply text-sm font-semibold text-cyan-300 mb-3;
}

.unified-results-panel__history-list {
  @apply space-y-2 max-h-48 overflow-y-auto;
}

.unified-results-panel__history-item {
  @apply p-3 bg-slate-700/50 hover:bg-slate-700 rounded cursor-pointer transition-colors duration-200 border border-transparent;
}

.unified-results-panel__history-item.active {
  @apply bg-cyan-900/30 border-cyan-500/50;
}

.unified-results-panel__history-item:hover {
  @apply border-slate-500;
}

.unified-results-panel__history-summary {
  @apply text-sm text-white font-medium mb-1 truncate;
}

.unified-results-panel__history-meta {
  @apply flex items-center justify-between text-xs text-slate-400;
}

.unified-results-panel__history-tab {
  @apply bg-slate-600 px-2 py-1 rounded text-xs font-medium;
}

.unified-results-panel__history-time {
  @apply font-mono;
}

/* Main Content */
.unified-results-panel__content {
  @apply p-4 space-y-6 overflow-y-auto;
}

.unified-results-panel--sidebar .unified-results-panel__content {
  @apply max-h-[calc(100vh-200px)];
}

.unified-results-panel--floating .unified-results-panel__content {
  @apply max-h-[60vh];
}

/* Placeholder State */
.placeholder-state {
  @apply text-center py-8 space-y-3;
}

.placeholder-state h4 {
  @apply text-lg font-semibold text-yellow-400;
}

.placeholder-state p {
  @apply text-slate-300;
}

.placeholder-note {
  @apply text-sm text-slate-400 italic;
}

/* Enhanced States */
.loading-state {
  @apply text-center py-8;
}

.loading-state p {
  @apply text-cyan-300 text-lg;
}

.error-state {
  @apply bg-red-900/20 border border-red-500/30 rounded-lg p-4;
}

.error-state h4 {
  @apply text-red-400 font-semibold mb-2;
}

.error-state p {
  @apply text-red-300;
}

/* Analysis Results */
.mode-analysis {
  @apply space-y-3;
}

.mode-analysis p {
  @apply text-slate-300;
}

.mode-analysis strong {
  @apply text-white font-semibold;
}

.explanation-section {
  @apply bg-slate-700/30 rounded-lg p-4 mt-4;
}

.explanation-section h5,
.explanation-section h6 {
  @apply text-cyan-300 font-semibold mb-2;
}

.explanation-section p {
  @apply text-slate-300 leading-relaxed;
}

.alternate-results {
  @apply space-y-4 border-t border-slate-600 pt-4;
}

.alternate-results h5 {
  @apply text-cyan-300 font-semibold mb-3;
}

.alternate-mode {
  @apply bg-slate-700/30 rounded-lg p-4 space-y-2;
}

.alternate-mode h6 {
  @apply text-white font-semibold;
}

.song-examples {
  @apply space-y-4 border-t border-slate-600 pt-4;
}

.song-examples h5 {
  @apply text-cyan-300 font-semibold mb-3;
}

.song-group {
  @apply space-y-2;
}

.song-group h6 {
  @apply text-white font-semibold;
}

.song-group ul {
  @apply space-y-1 ml-4;
}

.song-group li {
  @apply text-slate-300 text-sm;
}

.ai-error {
  @apply bg-orange-900/20 border border-orange-500/30 rounded-lg p-4;
}

.ai-error p {
  @apply text-orange-300;
}

/* Enhanced Mobile Responsive Design for Unified Results */
@media (max-width: 1024px) {
  .unified-results-container--sidebar {
    @apply w-full;
  }

  .unified-results-container--floating {
    @apply w-80 right-2;
  }
}

@media (max-width: 768px) {
  .unified-results-access {
    @apply top-16 right-2;
  }

  .unified-results-access__btn {
    @apply px-3 py-2 text-xs;
  }

  /* Mobile bottom drawer behavior */
  .unified-results-container--floating,
  .unified-results-container--sidebar {
    @apply fixed bottom-0 left-0 right-0 top-auto w-full max-w-none;
    @apply h-1/2 max-h-[60vh] min-h-[300px];
    @apply transform translate-y-0;
  }

  .unified-results-container--floating.unified-results-container--hidden,
  .unified-results-container--sidebar.unified-results-container--hidden {
    @apply translate-y-full opacity-100;
  }

  .unified-results-container--docked {
    @apply fixed bottom-0 left-0 right-0 top-auto w-full;
    @apply h-1/2 max-h-[60vh] min-h-[300px];
  }

  .unified-results-container--docked.unified-results-container--hidden {
    @apply translate-y-full;
  }

  .unified-results-panel {
    @apply rounded-t-lg rounded-b-none border-b-0;
    @apply h-full;
  }

  .unified-results-panel__header {
    @apply p-3;
    @apply border-b border-slate-600;
  }

  .unified-results-panel__title {
    @apply text-base;
  }

  .unified-results-panel__controls {
    @apply gap-1;
  }

  .unified-results-panel__control-btn {
    @apply w-7 h-7 text-xs;
  }

  .unified-results-panel__content {
    @apply p-3;
    @apply max-h-[calc(60vh-80px)] overflow-y-auto;
  }

  .unified-results-panel__history {
    @apply p-3;
  }

  .unified-results-panel__history-list {
    @apply max-h-32;
  }
}

@media (max-width: 640px) {
  .unified-results-container--floating {
    @apply w-full top-16 left-2 right-2;
  }

  .unified-results-panel--floating .unified-results-panel__content {
    @apply max-h-[50vh];
  }
}
