{
  "summary": {
    "executedAt": "2025-08-10T19:40:19.629Z",
    "totalTests": 728,
    "totalPassed": 0,
    "totalFailed": 728,
    "overallSuccessRate": "0.00%"
  },
  "categoryBreakdown": {
    "modal_characteristic": {
      "total": 224,
      "passed": 0,
      "failed": 224,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-1",
          "description": "C Ionian I-IV-I",
          "chords": [
            "C",
            "F",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "C Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-5",
          "description": "C Dorian i-IV-bVII-i",
          "chords": [
            "Cm",
            "F",
            "Bb",
            "Cm"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "C Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-6",
          "description": "C Dorian i-IV-i",
          "chords": [
            "Cm",
            "F",
            "Cm"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "C Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-11",
          "description": "C Phrygian i-bII-bVII-i",
          "chords": [
            "Cm",
            "Db",
            "Bb",
            "Cm"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "C Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-12",
          "description": "C Phrygian i-bII-i",
          "chords": [
            "Cm",
            "Db",
            "Cm"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "C Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-17",
          "description": "C Lydian I-II-V-I",
          "chords": [
            "C",
            "D",
            "G",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-18",
          "description": "C Lydian I-II-I-II",
          "chords": [
            "C",
            "D",
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-19",
          "description": "C Lydian I-II-I",
          "chords": [
            "C",
            "D",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-24",
          "description": "C Mixolydian I-bVII-IV-I",
          "chords": [
            "C",
            "Bb",
            "F",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "C Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-25",
          "description": "C Mixolydian I-bVII-I",
          "chords": [
            "C",
            "Bb",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "C Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-30",
          "description": "C Aeolian i-bVI-bVII-i",
          "chords": [
            "Cm",
            "Ab",
            "Bb",
            "Cm"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "C Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-31",
          "description": "C Aeolian i-bVII-i",
          "chords": [
            "Cm",
            "Bb",
            "Cm"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "C Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-36",
          "description": "C Locrian i°-bII-v-i°",
          "chords": [
            "Cdim",
            "Db",
            "Gbm",
            "Cdim"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "C Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-37",
          "description": "C Locrian i°-bII-i°",
          "chords": [
            "Cdim",
            "Db",
            "Cdim"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "C Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-42",
          "description": "Db Ionian I-IV-I",
          "chords": [
            "Db",
            "Gb",
            "Db"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Db Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-46",
          "description": "Db Dorian i-IV-bVII-i",
          "chords": [
            "Dbm",
            "Gb",
            "B",
            "Dbm"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Db Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-47",
          "description": "Db Dorian i-IV-i",
          "chords": [
            "Dbm",
            "Gb",
            "Dbm"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Db Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-52",
          "description": "Db Phrygian i-bII-bVII-i",
          "chords": [
            "Dbm",
            "D",
            "B",
            "Dbm"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Db Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-53",
          "description": "Db Phrygian i-bII-i",
          "chords": [
            "Dbm",
            "D",
            "Dbm"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Db Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-58",
          "description": "Db Lydian I-II-V-I",
          "chords": [
            "Db",
            "Eb",
            "Ab",
            "Db"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Db Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-59",
          "description": "Db Lydian I-II-I-II",
          "chords": [
            "Db",
            "Eb",
            "Db",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Db Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-60",
          "description": "Db Lydian I-II-I",
          "chords": [
            "Db",
            "Eb",
            "Db"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Db Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-65",
          "description": "Db Mixolydian I-bVII-IV-I",
          "chords": [
            "Db",
            "Cb",
            "Gb",
            "Db"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Db Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-66",
          "description": "Db Mixolydian I-bVII-I",
          "chords": [
            "Db",
            "Cb",
            "Db"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Db Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-71",
          "description": "Db Aeolian i-bVI-bVII-i",
          "chords": [
            "Dbm",
            "A",
            "B",
            "Dbm"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Db Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-72",
          "description": "Db Aeolian i-bVII-i",
          "chords": [
            "Dbm",
            "B",
            "Dbm"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Db Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-77",
          "description": "Db Locrian i°-bII-v-i°",
          "chords": [
            "Dbdim",
            "D",
            "Gm",
            "Dbdim"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "Db Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-78",
          "description": "Db Locrian i°-bII-i°",
          "chords": [
            "Dbdim",
            "D",
            "Dbdim"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "Db Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-83",
          "description": "D Ionian I-IV-I",
          "chords": [
            "D",
            "G",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "D Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-87",
          "description": "D Dorian i-IV-bVII-i",
          "chords": [
            "Dm",
            "G",
            "C",
            "Dm"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-88",
          "description": "D Dorian i-IV-i",
          "chords": [
            "Dm",
            "G",
            "Dm"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-93",
          "description": "D Phrygian i-bII-bVII-i",
          "chords": [
            "Dm",
            "Eb",
            "C",
            "Dm"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "D Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-94",
          "description": "D Phrygian i-bII-i",
          "chords": [
            "Dm",
            "Eb",
            "Dm"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "D Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-99",
          "description": "D Lydian I-II-V-I",
          "chords": [
            "D",
            "E",
            "A",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-100",
          "description": "D Lydian I-II-I-II",
          "chords": [
            "D",
            "E",
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-101",
          "description": "D Lydian I-II-I",
          "chords": [
            "D",
            "E",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-106",
          "description": "D Mixolydian I-bVII-IV-I",
          "chords": [
            "D",
            "C",
            "G",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-107",
          "description": "D Mixolydian I-bVII-I",
          "chords": [
            "D",
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-112",
          "description": "D Aeolian i-bVI-bVII-i",
          "chords": [
            "Dm",
            "Bb",
            "C",
            "Dm"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "D Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-113",
          "description": "D Aeolian i-bVII-i",
          "chords": [
            "Dm",
            "C",
            "Dm"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "D Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-118",
          "description": "D Locrian i°-bII-v-i°",
          "chords": [
            "Ddim",
            "Eb",
            "Abm",
            "Ddim"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "D Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-119",
          "description": "D Locrian i°-bII-i°",
          "chords": [
            "Ddim",
            "Eb",
            "Ddim"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "D Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-124",
          "description": "Eb Ionian I-IV-I",
          "chords": [
            "Eb",
            "Ab",
            "Eb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Eb Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-128",
          "description": "Eb Dorian i-IV-bVII-i",
          "chords": [
            "Ebm",
            "Ab",
            "Db",
            "Ebm"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Eb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-129",
          "description": "Eb Dorian i-IV-i",
          "chords": [
            "Ebm",
            "Ab",
            "Ebm"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Eb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-134",
          "description": "Eb Phrygian i-bII-bVII-i",
          "chords": [
            "Ebm",
            "E",
            "Db",
            "Ebm"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Eb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-135",
          "description": "Eb Phrygian i-bII-i",
          "chords": [
            "Ebm",
            "E",
            "Ebm"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Eb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-140",
          "description": "Eb Lydian I-II-V-I",
          "chords": [
            "Eb",
            "F",
            "Bb",
            "Eb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Eb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-141",
          "description": "Eb Lydian I-II-I-II",
          "chords": [
            "Eb",
            "F",
            "Eb",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Eb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-142",
          "description": "Eb Lydian I-II-I",
          "chords": [
            "Eb",
            "F",
            "Eb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Eb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-147",
          "description": "Eb Mixolydian I-bVII-IV-I",
          "chords": [
            "Eb",
            "Db",
            "Ab",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Eb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-148",
          "description": "Eb Mixolydian I-bVII-I",
          "chords": [
            "Eb",
            "Db",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Eb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-153",
          "description": "Eb Aeolian i-bVI-bVII-i",
          "chords": [
            "Ebm",
            "Cb",
            "Db",
            "Ebm"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Eb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-154",
          "description": "Eb Aeolian i-bVII-i",
          "chords": [
            "Ebm",
            "Db",
            "Ebm"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Eb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-159",
          "description": "Eb Locrian i°-bII-v-i°",
          "chords": [
            "Ebdim",
            "E",
            "Am",
            "Ebdim"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Eb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-160",
          "description": "Eb Locrian i°-bII-i°",
          "chords": [
            "Ebdim",
            "E",
            "Ebdim"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Eb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-165",
          "description": "E Ionian I-IV-I",
          "chords": [
            "E",
            "A",
            "E"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "E Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-169",
          "description": "E Dorian i-IV-bVII-i",
          "chords": [
            "Em",
            "A",
            "D",
            "Em"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-170",
          "description": "E Dorian i-IV-i",
          "chords": [
            "Em",
            "A",
            "Em"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-175",
          "description": "E Phrygian i-bII-bVII-i",
          "chords": [
            "Em",
            "F",
            "D",
            "Em"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-176",
          "description": "E Phrygian i-bII-i",
          "chords": [
            "Em",
            "F",
            "Em"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-181",
          "description": "E Lydian I-II-V-I",
          "chords": [
            "E",
            "F#",
            "B",
            "E"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "E Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-182",
          "description": "E Lydian I-II-I-II",
          "chords": [
            "E",
            "F#",
            "E",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "E Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-183",
          "description": "E Lydian I-II-I",
          "chords": [
            "E",
            "F#",
            "E"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "E Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-188",
          "description": "E Mixolydian I-bVII-IV-I",
          "chords": [
            "E",
            "D",
            "A",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-189",
          "description": "E Mixolydian I-bVII-I",
          "chords": [
            "E",
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-194",
          "description": "E Aeolian i-bVI-bVII-i",
          "chords": [
            "Em",
            "C",
            "D",
            "Em"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-195",
          "description": "E Aeolian i-bVII-i",
          "chords": [
            "Em",
            "D",
            "Em"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-200",
          "description": "E Locrian i°-bII-v-i°",
          "chords": [
            "Edim",
            "F",
            "Bbm",
            "Edim"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "E Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-201",
          "description": "E Locrian i°-bII-i°",
          "chords": [
            "Edim",
            "F",
            "Edim"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "E Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-206",
          "description": "F Ionian I-IV-I",
          "chords": [
            "F",
            "Bb",
            "F"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "F Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-210",
          "description": "F Dorian i-IV-bVII-i",
          "chords": [
            "Fm",
            "Bb",
            "Eb",
            "Fm"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "F Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-211",
          "description": "F Dorian i-IV-i",
          "chords": [
            "Fm",
            "Bb",
            "Fm"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "F Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-216",
          "description": "F Phrygian i-bII-bVII-i",
          "chords": [
            "Fm",
            "Gb",
            "Eb",
            "Fm"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-217",
          "description": "F Phrygian i-bII-i",
          "chords": [
            "Fm",
            "Gb",
            "Fm"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-222",
          "description": "F Lydian I-II-V-I",
          "chords": [
            "F",
            "G",
            "C",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-223",
          "description": "F Lydian I-II-I-II",
          "chords": [
            "F",
            "G",
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-224",
          "description": "F Lydian I-II-I",
          "chords": [
            "F",
            "G",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-229",
          "description": "F Mixolydian I-bVII-IV-I",
          "chords": [
            "F",
            "Eb",
            "Bb",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "F Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-230",
          "description": "F Mixolydian I-bVII-I",
          "chords": [
            "F",
            "Eb",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "F Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-235",
          "description": "F Aeolian i-bVI-bVII-i",
          "chords": [
            "Fm",
            "Db",
            "Eb",
            "Fm"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "F Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-236",
          "description": "F Aeolian i-bVII-i",
          "chords": [
            "Fm",
            "Eb",
            "Fm"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "F Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-241",
          "description": "F Locrian i°-bII-v-i°",
          "chords": [
            "Fdim",
            "Gb",
            "Cbm",
            "Fdim"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "F Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-242",
          "description": "F Locrian i°-bII-i°",
          "chords": [
            "Fdim",
            "Gb",
            "Fdim"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "F Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-247",
          "description": "F# Ionian I-IV-I",
          "chords": [
            "F#",
            "B",
            "F#"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "F# Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-251",
          "description": "F# Dorian i-IV-bVII-i",
          "chords": [
            "F#m",
            "B",
            "E",
            "F#m"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "F# Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-252",
          "description": "F# Dorian i-IV-i",
          "chords": [
            "F#m",
            "B",
            "F#m"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "F# Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-257",
          "description": "F# Phrygian i-bII-bVII-i",
          "chords": [
            "F#m",
            "G",
            "E",
            "F#m"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-258",
          "description": "F# Phrygian i-bII-i",
          "chords": [
            "F#m",
            "G",
            "F#m"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-263",
          "description": "F# Lydian I-II-V-I",
          "chords": [
            "F#",
            "Ab",
            "Db",
            "F#"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F# Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-264",
          "description": "F# Lydian I-II-I-II",
          "chords": [
            "F#",
            "Ab",
            "F#",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F# Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-265",
          "description": "F# Lydian I-II-I",
          "chords": [
            "F#",
            "Ab",
            "F#"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F# Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-270",
          "description": "F# Mixolydian I-bVII-IV-I",
          "chords": [
            "F#",
            "E",
            "B",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "F# Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-271",
          "description": "F# Mixolydian I-bVII-I",
          "chords": [
            "F#",
            "E",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "F# Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-276",
          "description": "F# Aeolian i-bVI-bVII-i",
          "chords": [
            "F#m",
            "D",
            "E",
            "F#m"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-277",
          "description": "F# Aeolian i-bVII-i",
          "chords": [
            "F#m",
            "E",
            "F#m"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-282",
          "description": "F# Locrian i°-bII-v-i°",
          "chords": [
            "F#dim",
            "G",
            "Cm",
            "F#dim"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-283",
          "description": "F# Locrian i°-bII-i°",
          "chords": [
            "F#dim",
            "G",
            "F#dim"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-288",
          "description": "G Ionian I-IV-I",
          "chords": [
            "G",
            "C",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "G Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-292",
          "description": "G Dorian i-IV-bVII-i",
          "chords": [
            "Gm",
            "C",
            "F",
            "Gm"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "G Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-293",
          "description": "G Dorian i-IV-i",
          "chords": [
            "Gm",
            "C",
            "Gm"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "G Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-298",
          "description": "G Phrygian i-bII-bVII-i",
          "chords": [
            "Gm",
            "Ab",
            "F",
            "Gm"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "G Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-299",
          "description": "G Phrygian i-bII-i",
          "chords": [
            "Gm",
            "Ab",
            "Gm"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "G Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-304",
          "description": "G Lydian I-II-V-I",
          "chords": [
            "G",
            "A",
            "D",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-305",
          "description": "G Lydian I-II-I-II",
          "chords": [
            "G",
            "A",
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-306",
          "description": "G Lydian I-II-I",
          "chords": [
            "G",
            "A",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-311",
          "description": "G Mixolydian I-bVII-IV-I",
          "chords": [
            "G",
            "F",
            "C",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-312",
          "description": "G Mixolydian I-bVII-I",
          "chords": [
            "G",
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-317",
          "description": "G Aeolian i-bVI-bVII-i",
          "chords": [
            "Gm",
            "Eb",
            "F",
            "Gm"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "G Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-318",
          "description": "G Aeolian i-bVII-i",
          "chords": [
            "Gm",
            "F",
            "Gm"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "G Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-323",
          "description": "G Locrian i°-bII-v-i°",
          "chords": [
            "Gdim",
            "Ab",
            "Dbm",
            "Gdim"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "G Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-324",
          "description": "G Locrian i°-bII-i°",
          "chords": [
            "Gdim",
            "Ab",
            "Gdim"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "G Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-329",
          "description": "Ab Ionian I-IV-I",
          "chords": [
            "Ab",
            "Db",
            "Ab"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Ab Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-333",
          "description": "Ab Dorian i-IV-bVII-i",
          "chords": [
            "Abm",
            "Db",
            "Gb",
            "Abm"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Ab Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-334",
          "description": "Ab Dorian i-IV-i",
          "chords": [
            "Abm",
            "Db",
            "Abm"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Ab Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-339",
          "description": "Ab Phrygian i-bII-bVII-i",
          "chords": [
            "Abm",
            "A",
            "Gb",
            "Abm"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Ab Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-340",
          "description": "Ab Phrygian i-bII-i",
          "chords": [
            "Abm",
            "A",
            "Abm"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Ab Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-345",
          "description": "Ab Lydian I-II-V-I",
          "chords": [
            "Ab",
            "Bb",
            "Eb",
            "Ab"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Ab Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-346",
          "description": "Ab Lydian I-II-I-II",
          "chords": [
            "Ab",
            "Bb",
            "Ab",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Ab Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-347",
          "description": "Ab Lydian I-II-I",
          "chords": [
            "Ab",
            "Bb",
            "Ab"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Ab Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-352",
          "description": "Ab Mixolydian I-bVII-IV-I",
          "chords": [
            "Ab",
            "Gb",
            "Db",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Ab Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-353",
          "description": "Ab Mixolydian I-bVII-I",
          "chords": [
            "Ab",
            "Gb",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Ab Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-358",
          "description": "Ab Aeolian i-bVI-bVII-i",
          "chords": [
            "Abm",
            "E",
            "Gb",
            "Abm"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Ab Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-359",
          "description": "Ab Aeolian i-bVII-i",
          "chords": [
            "Abm",
            "Gb",
            "Abm"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Ab Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-364",
          "description": "Ab Locrian i°-bII-v-i°",
          "chords": [
            "Abdim",
            "A",
            "Dm",
            "Abdim"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Ab Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-365",
          "description": "Ab Locrian i°-bII-i°",
          "chords": [
            "Abdim",
            "A",
            "Abdim"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Ab Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-370",
          "description": "A Ionian I-IV-I",
          "chords": [
            "A",
            "D",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "A Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-374",
          "description": "A Dorian i-IV-bVII-i",
          "chords": [
            "Am",
            "D",
            "G",
            "Am"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-375",
          "description": "A Dorian i-IV-i",
          "chords": [
            "Am",
            "D",
            "Am"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-380",
          "description": "A Phrygian i-bII-bVII-i",
          "chords": [
            "Am",
            "Bb",
            "G",
            "Am"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "A Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-381",
          "description": "A Phrygian i-bII-i",
          "chords": [
            "Am",
            "Bb",
            "Am"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "A Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-386",
          "description": "A Lydian I-II-V-I",
          "chords": [
            "A",
            "B",
            "E",
            "A"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "A Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-387",
          "description": "A Lydian I-II-I-II",
          "chords": [
            "A",
            "B",
            "A",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "A Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-388",
          "description": "A Lydian I-II-I",
          "chords": [
            "A",
            "B",
            "A"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "A Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-393",
          "description": "A Mixolydian I-bVII-IV-I",
          "chords": [
            "A",
            "G",
            "D",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-394",
          "description": "A Mixolydian I-bVII-I",
          "chords": [
            "A",
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-399",
          "description": "A Aeolian i-bVI-bVII-i",
          "chords": [
            "Am",
            "F",
            "G",
            "Am"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-400",
          "description": "A Aeolian i-bVII-i",
          "chords": [
            "Am",
            "G",
            "Am"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-405",
          "description": "A Locrian i°-bII-v-i°",
          "chords": [
            "Adim",
            "Bb",
            "Ebm",
            "Adim"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "A Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-406",
          "description": "A Locrian i°-bII-i°",
          "chords": [
            "Adim",
            "Bb",
            "Adim"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "A Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-411",
          "description": "Bb Ionian I-IV-I",
          "chords": [
            "Bb",
            "Eb",
            "Bb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Bb Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-415",
          "description": "Bb Dorian i-IV-bVII-i",
          "chords": [
            "Bbm",
            "Eb",
            "Ab",
            "Bbm"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Bb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-416",
          "description": "Bb Dorian i-IV-i",
          "chords": [
            "Bbm",
            "Eb",
            "Bbm"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Bb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-421",
          "description": "Bb Phrygian i-bII-bVII-i",
          "chords": [
            "Bbm",
            "Cb",
            "Ab",
            "Bbm"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Bb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-422",
          "description": "Bb Phrygian i-bII-i",
          "chords": [
            "Bbm",
            "Cb",
            "Bbm"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Bb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-427",
          "description": "Bb Lydian I-II-V-I",
          "chords": [
            "Bb",
            "C",
            "F",
            "Bb"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "Bb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-428",
          "description": "Bb Lydian I-II-I-II",
          "chords": [
            "Bb",
            "C",
            "Bb",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "Bb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-429",
          "description": "Bb Lydian I-II-I",
          "chords": [
            "Bb",
            "C",
            "Bb"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "Bb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-434",
          "description": "Bb Mixolydian I-bVII-IV-I",
          "chords": [
            "Bb",
            "Ab",
            "Eb",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Bb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-435",
          "description": "Bb Mixolydian I-bVII-I",
          "chords": [
            "Bb",
            "Ab",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Bb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-440",
          "description": "Bb Aeolian i-bVI-bVII-i",
          "chords": [
            "Bbm",
            "Gb",
            "Ab",
            "Bbm"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Bb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-441",
          "description": "Bb Aeolian i-bVII-i",
          "chords": [
            "Bbm",
            "Ab",
            "Bbm"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Bb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-446",
          "description": "Bb Locrian i°-bII-v-i°",
          "chords": [
            "Bbdim",
            "B",
            "Em",
            "Bbdim"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Bb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-447",
          "description": "Bb Locrian i°-bII-i°",
          "chords": [
            "Bbdim",
            "B",
            "Bbdim"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Bb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-452",
          "description": "B Ionian I-IV-I",
          "chords": [
            "B",
            "E",
            "B"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "B Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-456",
          "description": "B Dorian i-IV-bVII-i",
          "chords": [
            "Bm",
            "E",
            "A",
            "Bm"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-457",
          "description": "B Dorian i-IV-i",
          "chords": [
            "Bm",
            "E",
            "Bm"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-462",
          "description": "B Phrygian i-bII-bVII-i",
          "chords": [
            "Bm",
            "C",
            "A",
            "Bm"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-463",
          "description": "B Phrygian i-bII-i",
          "chords": [
            "Bm",
            "C",
            "Bm"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-468",
          "description": "B Lydian I-II-V-I",
          "chords": [
            "B",
            "C#",
            "F#",
            "B"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "B Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-469",
          "description": "B Lydian I-II-I-II",
          "chords": [
            "B",
            "C#",
            "B",
            "C#"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "B Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-470",
          "description": "B Lydian I-II-I",
          "chords": [
            "B",
            "C#",
            "B"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "B Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-475",
          "description": "B Mixolydian I-bVII-IV-I",
          "chords": [
            "B",
            "A",
            "E",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "B Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-476",
          "description": "B Mixolydian I-bVII-I",
          "chords": [
            "B",
            "A",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "B Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-481",
          "description": "B Aeolian i-bVI-bVII-i",
          "chords": [
            "Bm",
            "G",
            "A",
            "Bm"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-482",
          "description": "B Aeolian i-bVII-i",
          "chords": [
            "Bm",
            "A",
            "Bm"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-487",
          "description": "B Locrian i°-bII-v-i°",
          "chords": [
            "Bdim",
            "C",
            "Fm",
            "Bdim"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-488",
          "description": "B Locrian i°-bII-i°",
          "chords": [
            "Bdim",
            "C",
            "Bdim"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-565",
          "description": "C Ionian in C major context — I-IV-I",
          "chords": [
            "C",
            "F",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "C Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-569",
          "description": "D Dorian in C major context — i-IV-bVII-i",
          "chords": [
            "Dm",
            "G",
            "C",
            "Dm"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-571",
          "description": "D Dorian in C major context — i-IV-i",
          "chords": [
            "Dm",
            "G",
            "Dm"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-575",
          "description": "E Phrygian in C major context — i-bII-bVII-i",
          "chords": [
            "Em",
            "F",
            "D",
            "Em"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-577",
          "description": "E Phrygian in C major context — i-bII-i",
          "chords": [
            "Em",
            "F",
            "Em"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-581",
          "description": "F Lydian in C major context — I-II-V-I",
          "chords": [
            "F",
            "G",
            "C",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-583",
          "description": "F Lydian in C major context — I-II-I-II",
          "chords": [
            "F",
            "G",
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-584",
          "description": "F Lydian in C major context — I-II-I",
          "chords": [
            "F",
            "G",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-588",
          "description": "G Mixolydian in C major context — I-bVII-IV-I",
          "chords": [
            "G",
            "F",
            "C",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-590",
          "description": "G Mixolydian in C major context — I-bVII-I",
          "chords": [
            "G",
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-594",
          "description": "A Aeolian in C major context — i-bVI-bVII-i",
          "chords": [
            "Am",
            "F",
            "G",
            "Am"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-596",
          "description": "A Aeolian in C major context — i-bVII-i",
          "chords": [
            "Am",
            "G",
            "Am"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-600",
          "description": "B Locrian in C major context — i°-bII-v-i°",
          "chords": [
            "Bdim",
            "C",
            "Fm",
            "Bdim"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-602",
          "description": "B Locrian in C major context — i°-bII-i°",
          "chords": [
            "Bdim",
            "C",
            "Bdim"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-606",
          "description": "G Ionian in G major context — I-IV-I",
          "chords": [
            "G",
            "C",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "G Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-610",
          "description": "A Dorian in G major context — i-IV-bVII-i",
          "chords": [
            "Am",
            "D",
            "G",
            "Am"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-612",
          "description": "A Dorian in G major context — i-IV-i",
          "chords": [
            "Am",
            "D",
            "Am"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-616",
          "description": "B Phrygian in G major context — i-bII-bVII-i",
          "chords": [
            "Bm",
            "C",
            "A",
            "Bm"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-618",
          "description": "B Phrygian in G major context — i-bII-i",
          "chords": [
            "Bm",
            "C",
            "Bm"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-622",
          "description": "C Lydian in G major context — I-II-V-I",
          "chords": [
            "C",
            "D",
            "G",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-624",
          "description": "C Lydian in G major context — I-II-I-II",
          "chords": [
            "C",
            "D",
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-625",
          "description": "C Lydian in G major context — I-II-I",
          "chords": [
            "C",
            "D",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-629",
          "description": "D Mixolydian in G major context — I-bVII-IV-I",
          "chords": [
            "D",
            "C",
            "G",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-631",
          "description": "D Mixolydian in G major context — I-bVII-I",
          "chords": [
            "D",
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-635",
          "description": "E Aeolian in G major context — i-bVI-bVII-i",
          "chords": [
            "Em",
            "C",
            "D",
            "Em"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-637",
          "description": "E Aeolian in G major context — i-bVII-i",
          "chords": [
            "Em",
            "D",
            "Em"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-641",
          "description": "F# Locrian in G major context — i°-bII-v-i°",
          "chords": [
            "F#dim",
            "G",
            "Cm",
            "F#dim"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-643",
          "description": "F# Locrian in G major context — i°-bII-i°",
          "chords": [
            "F#dim",
            "G",
            "F#dim"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-647",
          "description": "D Ionian in D major context — I-IV-I",
          "chords": [
            "D",
            "G",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "D Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-651",
          "description": "E Dorian in D major context — i-IV-bVII-i",
          "chords": [
            "Em",
            "A",
            "D",
            "Em"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-653",
          "description": "E Dorian in D major context — i-IV-i",
          "chords": [
            "Em",
            "A",
            "Em"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-657",
          "description": "F# Phrygian in D major context — i-bII-bVII-i",
          "chords": [
            "F#m",
            "G",
            "E",
            "F#m"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-659",
          "description": "F# Phrygian in D major context — i-bII-i",
          "chords": [
            "F#m",
            "G",
            "F#m"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-663",
          "description": "G Lydian in D major context — I-II-V-I",
          "chords": [
            "G",
            "A",
            "D",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-665",
          "description": "G Lydian in D major context — I-II-I-II",
          "chords": [
            "G",
            "A",
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-666",
          "description": "G Lydian in D major context — I-II-I",
          "chords": [
            "G",
            "A",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-670",
          "description": "A Mixolydian in D major context — I-bVII-IV-I",
          "chords": [
            "A",
            "G",
            "D",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-672",
          "description": "A Mixolydian in D major context — I-bVII-I",
          "chords": [
            "A",
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-676",
          "description": "B Aeolian in D major context — i-bVI-bVII-i",
          "chords": [
            "Bm",
            "G",
            "A",
            "Bm"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-678",
          "description": "B Aeolian in D major context — i-bVII-i",
          "chords": [
            "Bm",
            "A",
            "Bm"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-682",
          "description": "C# Locrian in D major context — i°-bII-v-i°",
          "chords": [
            "C#dim",
            "D",
            "Gm",
            "C#dim"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "C# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-684",
          "description": "C# Locrian in D major context — i°-bII-i°",
          "chords": [
            "C#dim",
            "D",
            "C#dim"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "C# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-688",
          "description": "A Ionian in A major context — I-IV-I",
          "chords": [
            "A",
            "D",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "A Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-692",
          "description": "B Dorian in A major context — i-IV-bVII-i",
          "chords": [
            "Bm",
            "E",
            "A",
            "Bm"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-694",
          "description": "B Dorian in A major context — i-IV-i",
          "chords": [
            "Bm",
            "E",
            "Bm"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-698",
          "description": "C# Phrygian in A major context — i-bII-bVII-i",
          "chords": [
            "C#m",
            "D",
            "B",
            "C#m"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "C# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-700",
          "description": "C# Phrygian in A major context — i-bII-i",
          "chords": [
            "C#m",
            "D",
            "C#m"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "C# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-704",
          "description": "D Lydian in A major context — I-II-V-I",
          "chords": [
            "D",
            "E",
            "A",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-706",
          "description": "D Lydian in A major context — I-II-I-II",
          "chords": [
            "D",
            "E",
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-707",
          "description": "D Lydian in A major context — I-II-I",
          "chords": [
            "D",
            "E",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-711",
          "description": "E Mixolydian in A major context — I-bVII-IV-I",
          "chords": [
            "E",
            "D",
            "A",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-713",
          "description": "E Mixolydian in A major context — I-bVII-I",
          "chords": [
            "E",
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-717",
          "description": "F# Aeolian in A major context — i-bVI-bVII-i",
          "chords": [
            "F#m",
            "D",
            "E",
            "F#m"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-719",
          "description": "F# Aeolian in A major context — i-bVII-i",
          "chords": [
            "F#m",
            "E",
            "F#m"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-723",
          "description": "G# Locrian in A major context — i°-bII-v-i°",
          "chords": [
            "G#dim",
            "A",
            "Dm",
            "G#dim"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "G# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-725",
          "description": "G# Locrian in A major context — i°-bII-i°",
          "chords": [
            "G#dim",
            "A",
            "G#dim"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "G# Locrian",
          "error": "input.replace is not a function"
        }
      ]
    },
    "modal_seventh_variant": {
      "total": 112,
      "passed": 0,
      "failed": 112,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-2",
          "description": "C Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Cmaj7",
            "Fmaj7",
            "Cmaj7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "C Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-7",
          "description": "C Dorian i7-IVmaj7-i7",
          "chords": [
            "Cm7",
            "Fmaj7",
            "Cm7"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "C Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-13",
          "description": "C Phrygian i7-bII-i7",
          "chords": [
            "Cm7",
            "Db",
            "Cm7"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "C Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-20",
          "description": "C Lydian Imaj7-II-Imaj7",
          "chords": [
            "Cmaj7",
            "D",
            "Cmaj7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-26",
          "description": "C Mixolydian I7-IV-I7",
          "chords": [
            "C7",
            "F",
            "C7"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "C Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-32",
          "description": "C Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Cm7",
            "Ab",
            "Bb",
            "Cm7"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "C Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-38",
          "description": "C Locrian iø7-bII-iø7",
          "chords": [
            "Cm7b5",
            "Db",
            "Cm7b5"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "C Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-43",
          "description": "Db Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Dbmaj7",
            "Gbmaj7",
            "Dbmaj7"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Db Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-48",
          "description": "Db Dorian i7-IVmaj7-i7",
          "chords": [
            "Dbm7",
            "Gbmaj7",
            "Dbm7"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Db Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-54",
          "description": "Db Phrygian i7-bII-i7",
          "chords": [
            "Dbm7",
            "D",
            "Dbm7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Db Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-61",
          "description": "Db Lydian Imaj7-II-Imaj7",
          "chords": [
            "Dbmaj7",
            "Eb",
            "Dbmaj7"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Db Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-67",
          "description": "Db Mixolydian I7-IV-I7",
          "chords": [
            "Db7",
            "Gb",
            "Db7"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Db Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-73",
          "description": "Db Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Dbm7",
            "A",
            "B",
            "Dbm7"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Db Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-79",
          "description": "Db Locrian iø7-bII-iø7",
          "chords": [
            "Dbm7b5",
            "D",
            "Dbm7b5"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "Db Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-84",
          "description": "D Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Dmaj7",
            "Gmaj7",
            "Dmaj7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "D Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-89",
          "description": "D Dorian i7-IVmaj7-i7",
          "chords": [
            "Dm7",
            "Gmaj7",
            "Dm7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-95",
          "description": "D Phrygian i7-bII-i7",
          "chords": [
            "Dm7",
            "Eb",
            "Dm7"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "D Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-102",
          "description": "D Lydian Imaj7-II-Imaj7",
          "chords": [
            "Dmaj7",
            "E",
            "Dmaj7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-108",
          "description": "D Mixolydian I7-IV-I7",
          "chords": [
            "D7",
            "G",
            "D7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-114",
          "description": "D Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Dm7",
            "Bb",
            "C",
            "Dm7"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "D Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-120",
          "description": "D Locrian iø7-bII-iø7",
          "chords": [
            "Dm7b5",
            "Eb",
            "Dm7b5"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "D Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-125",
          "description": "Eb Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Ebmaj7",
            "Abmaj7",
            "Ebmaj7"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Eb Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-130",
          "description": "Eb Dorian i7-IVmaj7-i7",
          "chords": [
            "Ebm7",
            "Abmaj7",
            "Ebm7"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Eb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-136",
          "description": "Eb Phrygian i7-bII-i7",
          "chords": [
            "Ebm7",
            "E",
            "Ebm7"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Eb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-143",
          "description": "Eb Lydian Imaj7-II-Imaj7",
          "chords": [
            "Ebmaj7",
            "F",
            "Ebmaj7"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Eb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-149",
          "description": "Eb Mixolydian I7-IV-I7",
          "chords": [
            "Eb7",
            "Ab",
            "Eb7"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Eb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-155",
          "description": "Eb Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Ebm7",
            "Cb",
            "Db",
            "Ebm7"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Eb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-161",
          "description": "Eb Locrian iø7-bII-iø7",
          "chords": [
            "Ebm7b5",
            "E",
            "Ebm7b5"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Eb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-166",
          "description": "E Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Emaj7",
            "Amaj7",
            "Emaj7"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "E Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-171",
          "description": "E Dorian i7-IVmaj7-i7",
          "chords": [
            "Em7",
            "Amaj7",
            "Em7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-177",
          "description": "E Phrygian i7-bII-i7",
          "chords": [
            "Em7",
            "F",
            "Em7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-184",
          "description": "E Lydian Imaj7-II-Imaj7",
          "chords": [
            "Emaj7",
            "F#",
            "Emaj7"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "E Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-190",
          "description": "E Mixolydian I7-IV-I7",
          "chords": [
            "E7",
            "A",
            "E7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-196",
          "description": "E Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Em7",
            "C",
            "D",
            "Em7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-202",
          "description": "E Locrian iø7-bII-iø7",
          "chords": [
            "Em7b5",
            "F",
            "Em7b5"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "E Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-207",
          "description": "F Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Fmaj7",
            "Bbmaj7",
            "Fmaj7"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "F Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-212",
          "description": "F Dorian i7-IVmaj7-i7",
          "chords": [
            "Fm7",
            "Bbmaj7",
            "Fm7"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "F Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-218",
          "description": "F Phrygian i7-bII-i7",
          "chords": [
            "Fm7",
            "Gb",
            "Fm7"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-225",
          "description": "F Lydian Imaj7-II-Imaj7",
          "chords": [
            "Fmaj7",
            "G",
            "Fmaj7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-231",
          "description": "F Mixolydian I7-IV-I7",
          "chords": [
            "F7",
            "Bb",
            "F7"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "F Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-237",
          "description": "F Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Fm7",
            "Db",
            "Eb",
            "Fm7"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "F Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-243",
          "description": "F Locrian iø7-bII-iø7",
          "chords": [
            "Fm7b5",
            "Gb",
            "Fm7b5"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "F Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-248",
          "description": "F# Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "F#maj7",
            "Bmaj7",
            "F#maj7"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "F# Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-253",
          "description": "F# Dorian i7-IVmaj7-i7",
          "chords": [
            "F#m7",
            "Bmaj7",
            "F#m7"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "F# Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-259",
          "description": "F# Phrygian i7-bII-i7",
          "chords": [
            "F#m7",
            "G",
            "F#m7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-266",
          "description": "F# Lydian Imaj7-II-Imaj7",
          "chords": [
            "F#maj7",
            "Ab",
            "F#maj7"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F# Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-272",
          "description": "F# Mixolydian I7-IV-I7",
          "chords": [
            "F#7",
            "B",
            "F#7"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "F# Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-278",
          "description": "F# Aeolian i7-bVI-bVII-i7",
          "chords": [
            "F#m7",
            "D",
            "E",
            "F#m7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-284",
          "description": "F# Locrian iø7-bII-iø7",
          "chords": [
            "F#m7b5",
            "G",
            "F#m7b5"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-289",
          "description": "G Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Gmaj7",
            "Cmaj7",
            "Gmaj7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "G Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-294",
          "description": "G Dorian i7-IVmaj7-i7",
          "chords": [
            "Gm7",
            "Cmaj7",
            "Gm7"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "G Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-300",
          "description": "G Phrygian i7-bII-i7",
          "chords": [
            "Gm7",
            "Ab",
            "Gm7"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "G Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-307",
          "description": "G Lydian Imaj7-II-Imaj7",
          "chords": [
            "Gmaj7",
            "A",
            "Gmaj7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-313",
          "description": "G Mixolydian I7-IV-I7",
          "chords": [
            "G7",
            "C",
            "G7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-319",
          "description": "G Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Gm7",
            "Eb",
            "F",
            "Gm7"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "G Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-325",
          "description": "G Locrian iø7-bII-iø7",
          "chords": [
            "Gm7b5",
            "Ab",
            "Gm7b5"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "G Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-330",
          "description": "Ab Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Abmaj7",
            "Dbmaj7",
            "Abmaj7"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Ab Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-335",
          "description": "Ab Dorian i7-IVmaj7-i7",
          "chords": [
            "Abm7",
            "Dbmaj7",
            "Abm7"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Ab Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-341",
          "description": "Ab Phrygian i7-bII-i7",
          "chords": [
            "Abm7",
            "A",
            "Abm7"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Ab Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-348",
          "description": "Ab Lydian Imaj7-II-Imaj7",
          "chords": [
            "Abmaj7",
            "Bb",
            "Abmaj7"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Ab Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-354",
          "description": "Ab Mixolydian I7-IV-I7",
          "chords": [
            "Ab7",
            "Db",
            "Ab7"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Ab Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-360",
          "description": "Ab Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Abm7",
            "E",
            "Gb",
            "Abm7"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Ab Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-366",
          "description": "Ab Locrian iø7-bII-iø7",
          "chords": [
            "Abm7b5",
            "A",
            "Abm7b5"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Ab Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-371",
          "description": "A Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Amaj7",
            "Dmaj7",
            "Amaj7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "A Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-376",
          "description": "A Dorian i7-IVmaj7-i7",
          "chords": [
            "Am7",
            "Dmaj7",
            "Am7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-382",
          "description": "A Phrygian i7-bII-i7",
          "chords": [
            "Am7",
            "Bb",
            "Am7"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "A Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-389",
          "description": "A Lydian Imaj7-II-Imaj7",
          "chords": [
            "Amaj7",
            "B",
            "Amaj7"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "A Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-395",
          "description": "A Mixolydian I7-IV-I7",
          "chords": [
            "A7",
            "D",
            "A7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-401",
          "description": "A Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Am7",
            "F",
            "G",
            "Am7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-407",
          "description": "A Locrian iø7-bII-iø7",
          "chords": [
            "Am7b5",
            "Bb",
            "Am7b5"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "A Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-412",
          "description": "Bb Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Bbmaj7",
            "Ebmaj7",
            "Bbmaj7"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Bb Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-417",
          "description": "Bb Dorian i7-IVmaj7-i7",
          "chords": [
            "Bbm7",
            "Ebmaj7",
            "Bbm7"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Bb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-423",
          "description": "Bb Phrygian i7-bII-i7",
          "chords": [
            "Bbm7",
            "Cb",
            "Bbm7"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Bb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-430",
          "description": "Bb Lydian Imaj7-II-Imaj7",
          "chords": [
            "Bbmaj7",
            "C",
            "Bbmaj7"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "Bb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-436",
          "description": "Bb Mixolydian I7-IV-I7",
          "chords": [
            "Bb7",
            "Eb",
            "Bb7"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Bb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-442",
          "description": "Bb Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Bbm7",
            "Gb",
            "Ab",
            "Bbm7"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Bb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-448",
          "description": "Bb Locrian iø7-bII-iø7",
          "chords": [
            "Bbm7b5",
            "B",
            "Bbm7b5"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Bb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-453",
          "description": "B Ionian Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Bmaj7",
            "Emaj7",
            "Bmaj7"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "B Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-458",
          "description": "B Dorian i7-IVmaj7-i7",
          "chords": [
            "Bm7",
            "Emaj7",
            "Bm7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-464",
          "description": "B Phrygian i7-bII-i7",
          "chords": [
            "Bm7",
            "C",
            "Bm7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-471",
          "description": "B Lydian Imaj7-II-Imaj7",
          "chords": [
            "Bmaj7",
            "C#",
            "Bmaj7"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "B Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-477",
          "description": "B Mixolydian I7-IV-I7",
          "chords": [
            "B7",
            "E",
            "B7"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "B Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-483",
          "description": "B Aeolian i7-bVI-bVII-i7",
          "chords": [
            "Bm7",
            "G",
            "A",
            "Bm7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-489",
          "description": "B Locrian iø7-bII-iø7",
          "chords": [
            "Bm7b5",
            "C",
            "Bm7b5"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-566",
          "description": "C Ionian in C major context — Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Cmaj7",
            "Fmaj7",
            "Cmaj7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "C Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-572",
          "description": "D Dorian in C major context — i7-IVmaj7-i7",
          "chords": [
            "Dm7",
            "Gmaj7",
            "Dm7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-578",
          "description": "E Phrygian in C major context — i7-bII-i7",
          "chords": [
            "Em7",
            "F",
            "Em7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-585",
          "description": "F Lydian in C major context — Imaj7-II-Imaj7",
          "chords": [
            "Fmaj7",
            "G",
            "Fmaj7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-591",
          "description": "G Mixolydian in C major context — I7-IV-I7",
          "chords": [
            "G7",
            "C",
            "G7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-597",
          "description": "A Aeolian in C major context — i7-bVI-bVII-i7",
          "chords": [
            "Am7",
            "F",
            "G",
            "Am7"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-603",
          "description": "B Locrian in C major context — iø7-bII-iø7",
          "chords": [
            "Bm7b5",
            "C",
            "Bm7b5"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-607",
          "description": "G Ionian in G major context — Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Gmaj7",
            "Cmaj7",
            "Gmaj7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "G Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-613",
          "description": "A Dorian in G major context — i7-IVmaj7-i7",
          "chords": [
            "Am7",
            "Dmaj7",
            "Am7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-619",
          "description": "B Phrygian in G major context — i7-bII-i7",
          "chords": [
            "Bm7",
            "C",
            "Bm7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-626",
          "description": "C Lydian in G major context — Imaj7-II-Imaj7",
          "chords": [
            "Cmaj7",
            "D",
            "Cmaj7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-632",
          "description": "D Mixolydian in G major context — I7-IV-I7",
          "chords": [
            "D7",
            "G",
            "D7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-638",
          "description": "E Aeolian in G major context — i7-bVI-bVII-i7",
          "chords": [
            "Em7",
            "C",
            "D",
            "Em7"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-644",
          "description": "F# Locrian in G major context — iø7-bII-iø7",
          "chords": [
            "F#m7b5",
            "G",
            "F#m7b5"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-648",
          "description": "D Ionian in D major context — Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Dmaj7",
            "Gmaj7",
            "Dmaj7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "D Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-654",
          "description": "E Dorian in D major context — i7-IVmaj7-i7",
          "chords": [
            "Em7",
            "Amaj7",
            "Em7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-660",
          "description": "F# Phrygian in D major context — i7-bII-i7",
          "chords": [
            "F#m7",
            "G",
            "F#m7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-667",
          "description": "G Lydian in D major context — Imaj7-II-Imaj7",
          "chords": [
            "Gmaj7",
            "A",
            "Gmaj7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-673",
          "description": "A Mixolydian in D major context — I7-IV-I7",
          "chords": [
            "A7",
            "D",
            "A7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-679",
          "description": "B Aeolian in D major context — i7-bVI-bVII-i7",
          "chords": [
            "Bm7",
            "G",
            "A",
            "Bm7"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-685",
          "description": "C# Locrian in D major context — iø7-bII-iø7",
          "chords": [
            "C#m7b5",
            "D",
            "C#m7b5"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "C# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-689",
          "description": "A Ionian in A major context — Imaj7-IVmaj7-Imaj7",
          "chords": [
            "Amaj7",
            "Dmaj7",
            "Amaj7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "A Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-695",
          "description": "B Dorian in A major context — i7-IVmaj7-i7",
          "chords": [
            "Bm7",
            "Emaj7",
            "Bm7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-701",
          "description": "C# Phrygian in A major context — i7-bII-i7",
          "chords": [
            "C#m7",
            "D",
            "C#m7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "C# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-708",
          "description": "D Lydian in A major context — Imaj7-II-Imaj7",
          "chords": [
            "Dmaj7",
            "E",
            "Dmaj7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-714",
          "description": "E Mixolydian in A major context — I7-IV-I7",
          "chords": [
            "E7",
            "A",
            "E7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-720",
          "description": "F# Aeolian in A major context — i7-bVI-bVII-i7",
          "chords": [
            "F#m7",
            "D",
            "E",
            "F#m7"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-726",
          "description": "G# Locrian in A major context — iø7-bII-iø7",
          "chords": [
            "G#m7b5",
            "A",
            "G#m7b5"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "G# Locrian",
          "error": "input.replace is not a function"
        }
      ]
    },
    "modal_vamp": {
      "total": 112,
      "passed": 0,
      "failed": 112,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-3",
          "description": "C Ionian I-IV (vamp)",
          "chords": [
            "C",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "C Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-8",
          "description": "C Dorian i-IV (vamp)",
          "chords": [
            "Cm",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "C Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-14",
          "description": "C Phrygian i-bII (vamp)",
          "chords": [
            "Cm",
            "Db"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "C Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-21",
          "description": "C Lydian I-II (vamp)",
          "chords": [
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-27",
          "description": "C Mixolydian I-IV (vamp)",
          "chords": [
            "C",
            "F"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "C Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-33",
          "description": "C Aeolian i-bVII (vamp)",
          "chords": [
            "Cm",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "C Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-39",
          "description": "C Locrian i°-bII (vamp)",
          "chords": [
            "Cdim",
            "Db"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "C Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-44",
          "description": "Db Ionian I-IV (vamp)",
          "chords": [
            "Db",
            "Gb"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Db Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-49",
          "description": "Db Dorian i-IV (vamp)",
          "chords": [
            "Dbm",
            "Gb"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Db Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-55",
          "description": "Db Phrygian i-bII (vamp)",
          "chords": [
            "Dbm",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Db Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-62",
          "description": "Db Lydian I-II (vamp)",
          "chords": [
            "Db",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Db Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-68",
          "description": "Db Mixolydian I-IV (vamp)",
          "chords": [
            "Db",
            "Gb"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Db Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-74",
          "description": "Db Aeolian i-bVII (vamp)",
          "chords": [
            "Dbm",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Db Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-80",
          "description": "Db Locrian i°-bII (vamp)",
          "chords": [
            "Dbdim",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "Db Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-85",
          "description": "D Ionian I-IV (vamp)",
          "chords": [
            "D",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "D Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-90",
          "description": "D Dorian i-IV (vamp)",
          "chords": [
            "Dm",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-96",
          "description": "D Phrygian i-bII (vamp)",
          "chords": [
            "Dm",
            "Eb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "D Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-103",
          "description": "D Lydian I-II (vamp)",
          "chords": [
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-109",
          "description": "D Mixolydian I-IV (vamp)",
          "chords": [
            "D",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-115",
          "description": "D Aeolian i-bVII (vamp)",
          "chords": [
            "Dm",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "D Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-121",
          "description": "D Locrian i°-bII (vamp)",
          "chords": [
            "Ddim",
            "Eb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "D Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-126",
          "description": "Eb Ionian I-IV (vamp)",
          "chords": [
            "Eb",
            "Ab"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Eb Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-131",
          "description": "Eb Dorian i-IV (vamp)",
          "chords": [
            "Ebm",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Eb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-137",
          "description": "Eb Phrygian i-bII (vamp)",
          "chords": [
            "Ebm",
            "E"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Eb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-144",
          "description": "Eb Lydian I-II (vamp)",
          "chords": [
            "Eb",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Eb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-150",
          "description": "Eb Mixolydian I-IV (vamp)",
          "chords": [
            "Eb",
            "Ab"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Eb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-156",
          "description": "Eb Aeolian i-bVII (vamp)",
          "chords": [
            "Ebm",
            "Db"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Eb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-162",
          "description": "Eb Locrian i°-bII (vamp)",
          "chords": [
            "Ebdim",
            "E"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Eb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-167",
          "description": "E Ionian I-IV (vamp)",
          "chords": [
            "E",
            "A"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "E Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-172",
          "description": "E Dorian i-IV (vamp)",
          "chords": [
            "Em",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-178",
          "description": "E Phrygian i-bII (vamp)",
          "chords": [
            "Em",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-185",
          "description": "E Lydian I-II (vamp)",
          "chords": [
            "E",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "E Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-191",
          "description": "E Mixolydian I-IV (vamp)",
          "chords": [
            "E",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-197",
          "description": "E Aeolian i-bVII (vamp)",
          "chords": [
            "Em",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-203",
          "description": "E Locrian i°-bII (vamp)",
          "chords": [
            "Edim",
            "F"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "E Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-208",
          "description": "F Ionian I-IV (vamp)",
          "chords": [
            "F",
            "Bb"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "F Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-213",
          "description": "F Dorian i-IV (vamp)",
          "chords": [
            "Fm",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "F Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-219",
          "description": "F Phrygian i-bII (vamp)",
          "chords": [
            "Fm",
            "Gb"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-226",
          "description": "F Lydian I-II (vamp)",
          "chords": [
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-232",
          "description": "F Mixolydian I-IV (vamp)",
          "chords": [
            "F",
            "Bb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "F Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-238",
          "description": "F Aeolian i-bVII (vamp)",
          "chords": [
            "Fm",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "F Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-244",
          "description": "F Locrian i°-bII (vamp)",
          "chords": [
            "Fdim",
            "Gb"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "F Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-249",
          "description": "F# Ionian I-IV (vamp)",
          "chords": [
            "F#",
            "B"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "F# Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-254",
          "description": "F# Dorian i-IV (vamp)",
          "chords": [
            "F#m",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "F# Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-260",
          "description": "F# Phrygian i-bII (vamp)",
          "chords": [
            "F#m",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-267",
          "description": "F# Lydian I-II (vamp)",
          "chords": [
            "F#",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "F# Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-273",
          "description": "F# Mixolydian I-IV (vamp)",
          "chords": [
            "F#",
            "B"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "F# Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-279",
          "description": "F# Aeolian i-bVII (vamp)",
          "chords": [
            "F#m",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-285",
          "description": "F# Locrian i°-bII (vamp)",
          "chords": [
            "F#dim",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-290",
          "description": "G Ionian I-IV (vamp)",
          "chords": [
            "G",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "G Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-295",
          "description": "G Dorian i-IV (vamp)",
          "chords": [
            "Gm",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "G Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-301",
          "description": "G Phrygian i-bII (vamp)",
          "chords": [
            "Gm",
            "Ab"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "G Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-308",
          "description": "G Lydian I-II (vamp)",
          "chords": [
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-314",
          "description": "G Mixolydian I-IV (vamp)",
          "chords": [
            "G",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-320",
          "description": "G Aeolian i-bVII (vamp)",
          "chords": [
            "Gm",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "G Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-326",
          "description": "G Locrian i°-bII (vamp)",
          "chords": [
            "Gdim",
            "Ab"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "G Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-331",
          "description": "Ab Ionian I-IV (vamp)",
          "chords": [
            "Ab",
            "Db"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Ab Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-336",
          "description": "Ab Dorian i-IV (vamp)",
          "chords": [
            "Abm",
            "Db"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Ab Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-342",
          "description": "Ab Phrygian i-bII (vamp)",
          "chords": [
            "Abm",
            "A"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "Ab Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-349",
          "description": "Ab Lydian I-II (vamp)",
          "chords": [
            "Ab",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Ab Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-355",
          "description": "Ab Mixolydian I-IV (vamp)",
          "chords": [
            "Ab",
            "Db"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Ab Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-361",
          "description": "Ab Aeolian i-bVII (vamp)",
          "chords": [
            "Abm",
            "Gb"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Ab Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-367",
          "description": "Ab Locrian i°-bII (vamp)",
          "chords": [
            "Abdim",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "Ab Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-372",
          "description": "A Ionian I-IV (vamp)",
          "chords": [
            "A",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "A Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-377",
          "description": "A Dorian i-IV (vamp)",
          "chords": [
            "Am",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-383",
          "description": "A Phrygian i-bII (vamp)",
          "chords": [
            "Am",
            "Bb"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "A Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-390",
          "description": "A Lydian I-II (vamp)",
          "chords": [
            "A",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "A Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-396",
          "description": "A Mixolydian I-IV (vamp)",
          "chords": [
            "A",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-402",
          "description": "A Aeolian i-bVII (vamp)",
          "chords": [
            "Am",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-408",
          "description": "A Locrian i°-bII (vamp)",
          "chords": [
            "Adim",
            "Bb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "A Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-413",
          "description": "Bb Ionian I-IV (vamp)",
          "chords": [
            "Bb",
            "Eb"
          ],
          "parentKey": "Bb major",
          "expectedModal": true,
          "expectedMode": "Bb Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-418",
          "description": "Bb Dorian i-IV (vamp)",
          "chords": [
            "Bbm",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": true,
          "expectedMode": "Bb Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-424",
          "description": "Bb Phrygian i-bII (vamp)",
          "chords": [
            "Bbm",
            "Cb"
          ],
          "parentKey": "Gb major",
          "expectedModal": true,
          "expectedMode": "Bb Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-431",
          "description": "Bb Lydian I-II (vamp)",
          "chords": [
            "Bb",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "Bb Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-437",
          "description": "Bb Mixolydian I-IV (vamp)",
          "chords": [
            "Bb",
            "Eb"
          ],
          "parentKey": "Eb major",
          "expectedModal": true,
          "expectedMode": "Bb Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-443",
          "description": "Bb Aeolian i-bVII (vamp)",
          "chords": [
            "Bbm",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": true,
          "expectedMode": "Bb Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-449",
          "description": "Bb Locrian i°-bII (vamp)",
          "chords": [
            "Bbdim",
            "B"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "Bb Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-454",
          "description": "B Ionian I-IV (vamp)",
          "chords": [
            "B",
            "E"
          ],
          "parentKey": "B major",
          "expectedModal": true,
          "expectedMode": "B Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-459",
          "description": "B Dorian i-IV (vamp)",
          "chords": [
            "Bm",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-465",
          "description": "B Phrygian i-bII (vamp)",
          "chords": [
            "Bm",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-472",
          "description": "B Lydian I-II (vamp)",
          "chords": [
            "B",
            "C#"
          ],
          "parentKey": "F# major",
          "expectedModal": true,
          "expectedMode": "B Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-478",
          "description": "B Mixolydian I-IV (vamp)",
          "chords": [
            "B",
            "E"
          ],
          "parentKey": "E major",
          "expectedModal": true,
          "expectedMode": "B Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-484",
          "description": "B Aeolian i-bVII (vamp)",
          "chords": [
            "Bm",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-490",
          "description": "B Locrian i°-bII (vamp)",
          "chords": [
            "Bdim",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-567",
          "description": "C Ionian in C major context — I-IV (vamp)",
          "chords": [
            "C",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "C Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-573",
          "description": "D Dorian in C major context — i-IV (vamp)",
          "chords": [
            "Dm",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "D Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-579",
          "description": "E Phrygian in C major context — i-bII (vamp)",
          "chords": [
            "Em",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "E Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-586",
          "description": "F Lydian in C major context — I-II (vamp)",
          "chords": [
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "F Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-592",
          "description": "G Mixolydian in C major context — I-IV (vamp)",
          "chords": [
            "G",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-598",
          "description": "A Aeolian in C major context — i-bVII (vamp)",
          "chords": [
            "Am",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "A Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-604",
          "description": "B Locrian in C major context — i°-bII (vamp)",
          "chords": [
            "Bdim",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "B Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-608",
          "description": "G Ionian in G major context — I-IV (vamp)",
          "chords": [
            "G",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "G Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-614",
          "description": "A Dorian in G major context — i-IV (vamp)",
          "chords": [
            "Am",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "A Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-620",
          "description": "B Phrygian in G major context — i-bII (vamp)",
          "chords": [
            "Bm",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "B Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-627",
          "description": "C Lydian in G major context — I-II (vamp)",
          "chords": [
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "C Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-633",
          "description": "D Mixolydian in G major context — I-IV (vamp)",
          "chords": [
            "D",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-639",
          "description": "E Aeolian in G major context — i-bVII (vamp)",
          "chords": [
            "Em",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "E Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-645",
          "description": "F# Locrian in G major context — i°-bII (vamp)",
          "chords": [
            "F#dim",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "F# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-649",
          "description": "D Ionian in D major context — I-IV (vamp)",
          "chords": [
            "D",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "D Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-655",
          "description": "E Dorian in D major context — i-IV (vamp)",
          "chords": [
            "Em",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "E Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-661",
          "description": "F# Phrygian in D major context — i-bII (vamp)",
          "chords": [
            "F#m",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "F# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-668",
          "description": "G Lydian in D major context — I-II (vamp)",
          "chords": [
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "G Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-674",
          "description": "A Mixolydian in D major context — I-IV (vamp)",
          "chords": [
            "A",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-680",
          "description": "B Aeolian in D major context — i-bVII (vamp)",
          "chords": [
            "Bm",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "B Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-686",
          "description": "C# Locrian in D major context — i°-bII (vamp)",
          "chords": [
            "C#dim",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "C# Locrian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-690",
          "description": "A Ionian in A major context — I-IV (vamp)",
          "chords": [
            "A",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "A Ionian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-696",
          "description": "B Dorian in A major context — i-IV (vamp)",
          "chords": [
            "Bm",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "B Dorian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-702",
          "description": "C# Phrygian in A major context — i-bII (vamp)",
          "chords": [
            "C#m",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "C# Phrygian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-709",
          "description": "D Lydian in A major context — I-II (vamp)",
          "chords": [
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "D Lydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-715",
          "description": "E Mixolydian in A major context — I-IV (vamp)",
          "chords": [
            "E",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "E Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-721",
          "description": "F# Aeolian in A major context — i-bVII (vamp)",
          "chords": [
            "F#m",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "F# Aeolian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-727",
          "description": "G# Locrian in A major context — i°-bII (vamp)",
          "chords": [
            "G#dim",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": true,
          "expectedMode": "G# Locrian",
          "error": "input.replace is not a function"
        }
      ]
    },
    "modal_foil": {
      "total": 112,
      "passed": 0,
      "failed": 112,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-4",
          "description": "C Ionian I-V-I (foil)",
          "chords": [
            "C",
            "G",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-9",
          "description": "C Dorian i-iv-i (foil)",
          "chords": [
            "Cm",
            "Fm",
            "Cm"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-15",
          "description": "C Phrygian i-II-i (foil)",
          "chords": [
            "Cm",
            "D",
            "Cm"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-22",
          "description": "C Lydian I-V-I (foil)",
          "chords": [
            "C",
            "G",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-28",
          "description": "C Mixolydian I-V-I (foil)",
          "chords": [
            "C",
            "G",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-34",
          "description": "C Aeolian i-V7-i (foil)",
          "chords": [
            "Cm",
            "G7",
            "Cm"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-40",
          "description": "C Locrian i°-V7-i° (foil)",
          "chords": [
            "Cdim",
            "G7",
            "Cdim"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-45",
          "description": "Db Ionian I-V-I (foil)",
          "chords": [
            "Db",
            "Ab",
            "Db"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-50",
          "description": "Db Dorian i-iv-i (foil)",
          "chords": [
            "Dbm",
            "Gbm",
            "Dbm"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-56",
          "description": "Db Phrygian i-II-i (foil)",
          "chords": [
            "Dbm",
            "Eb",
            "Dbm"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-63",
          "description": "Db Lydian I-V-I (foil)",
          "chords": [
            "Db",
            "Ab",
            "Db"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-69",
          "description": "Db Mixolydian I-V-I (foil)",
          "chords": [
            "Db",
            "Ab",
            "Db"
          ],
          "parentKey": "Gb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-75",
          "description": "Db Aeolian i-V7-i (foil)",
          "chords": [
            "Dbm",
            "Ab7",
            "Dbm"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-81",
          "description": "Db Locrian i°-V7-i° (foil)",
          "chords": [
            "Dbdim",
            "Ab7",
            "Dbdim"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-86",
          "description": "D Ionian I-V-I (foil)",
          "chords": [
            "D",
            "A",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-91",
          "description": "D Dorian i-iv-i (foil)",
          "chords": [
            "Dm",
            "Gm",
            "Dm"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-97",
          "description": "D Phrygian i-II-i (foil)",
          "chords": [
            "Dm",
            "E",
            "Dm"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-104",
          "description": "D Lydian I-V-I (foil)",
          "chords": [
            "D",
            "A",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-110",
          "description": "D Mixolydian I-V-I (foil)",
          "chords": [
            "D",
            "A",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-116",
          "description": "D Aeolian i-V7-i (foil)",
          "chords": [
            "Dm",
            "A7",
            "Dm"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-122",
          "description": "D Locrian i°-V7-i° (foil)",
          "chords": [
            "Ddim",
            "A7",
            "Ddim"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-127",
          "description": "Eb Ionian I-V-I (foil)",
          "chords": [
            "Eb",
            "Bb",
            "Eb"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-132",
          "description": "Eb Dorian i-iv-i (foil)",
          "chords": [
            "Ebm",
            "Abm",
            "Ebm"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-138",
          "description": "Eb Phrygian i-II-i (foil)",
          "chords": [
            "Ebm",
            "F",
            "Ebm"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-145",
          "description": "Eb Lydian I-V-I (foil)",
          "chords": [
            "Eb",
            "Bb",
            "Eb"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-151",
          "description": "Eb Mixolydian I-V-I (foil)",
          "chords": [
            "Eb",
            "Bb",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-157",
          "description": "Eb Aeolian i-V7-i (foil)",
          "chords": [
            "Ebm",
            "Bb7",
            "Ebm"
          ],
          "parentKey": "Gb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-163",
          "description": "Eb Locrian i°-V7-i° (foil)",
          "chords": [
            "Ebdim",
            "Bb7",
            "Ebdim"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-168",
          "description": "E Ionian I-V-I (foil)",
          "chords": [
            "E",
            "B",
            "E"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-173",
          "description": "E Dorian i-iv-i (foil)",
          "chords": [
            "Em",
            "Am",
            "Em"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-179",
          "description": "E Phrygian i-II-i (foil)",
          "chords": [
            "Em",
            "F#",
            "Em"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-186",
          "description": "E Lydian I-V-I (foil)",
          "chords": [
            "E",
            "B",
            "E"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-192",
          "description": "E Mixolydian I-V-I (foil)",
          "chords": [
            "E",
            "B",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-198",
          "description": "E Aeolian i-V7-i (foil)",
          "chords": [
            "Em",
            "B7",
            "Em"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-204",
          "description": "E Locrian i°-V7-i° (foil)",
          "chords": [
            "Edim",
            "B7",
            "Edim"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-209",
          "description": "F Ionian I-V-I (foil)",
          "chords": [
            "F",
            "C",
            "F"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-214",
          "description": "F Dorian i-iv-i (foil)",
          "chords": [
            "Fm",
            "Bbm",
            "Fm"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-220",
          "description": "F Phrygian i-II-i (foil)",
          "chords": [
            "Fm",
            "G",
            "Fm"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-227",
          "description": "F Lydian I-V-I (foil)",
          "chords": [
            "F",
            "C",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-233",
          "description": "F Mixolydian I-V-I (foil)",
          "chords": [
            "F",
            "C",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-239",
          "description": "F Aeolian i-V7-i (foil)",
          "chords": [
            "Fm",
            "C7",
            "Fm"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-245",
          "description": "F Locrian i°-V7-i° (foil)",
          "chords": [
            "Fdim",
            "C7",
            "Fdim"
          ],
          "parentKey": "Gb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-250",
          "description": "F# Ionian I-V-I (foil)",
          "chords": [
            "F#",
            "C#",
            "F#"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-255",
          "description": "F# Dorian i-iv-i (foil)",
          "chords": [
            "F#m",
            "Bm",
            "F#m"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-261",
          "description": "F# Phrygian i-II-i (foil)",
          "chords": [
            "F#m",
            "G#",
            "F#m"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-268",
          "description": "F# Lydian I-V-I (foil)",
          "chords": [
            "F#",
            "Db",
            "F#"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-274",
          "description": "F# Mixolydian I-V-I (foil)",
          "chords": [
            "F#",
            "C#",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-280",
          "description": "F# Aeolian i-V7-i (foil)",
          "chords": [
            "F#m",
            "C#7",
            "F#m"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-286",
          "description": "F# Locrian i°-V7-i° (foil)",
          "chords": [
            "F#dim",
            "C#7",
            "F#dim"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-291",
          "description": "G Ionian I-V-I (foil)",
          "chords": [
            "G",
            "D",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-296",
          "description": "G Dorian i-iv-i (foil)",
          "chords": [
            "Gm",
            "Cm",
            "Gm"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-302",
          "description": "G Phrygian i-II-i (foil)",
          "chords": [
            "Gm",
            "A",
            "Gm"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-309",
          "description": "G Lydian I-V-I (foil)",
          "chords": [
            "G",
            "D",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-315",
          "description": "G Mixolydian I-V-I (foil)",
          "chords": [
            "G",
            "D",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-321",
          "description": "G Aeolian i-V7-i (foil)",
          "chords": [
            "Gm",
            "D7",
            "Gm"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-327",
          "description": "G Locrian i°-V7-i° (foil)",
          "chords": [
            "Gdim",
            "D7",
            "Gdim"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-332",
          "description": "Ab Ionian I-V-I (foil)",
          "chords": [
            "Ab",
            "Eb",
            "Ab"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-337",
          "description": "Ab Dorian i-iv-i (foil)",
          "chords": [
            "Abm",
            "Dbm",
            "Abm"
          ],
          "parentKey": "Gb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-343",
          "description": "Ab Phrygian i-II-i (foil)",
          "chords": [
            "Abm",
            "Bb",
            "Abm"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-350",
          "description": "Ab Lydian I-V-I (foil)",
          "chords": [
            "Ab",
            "Eb",
            "Ab"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-356",
          "description": "Ab Mixolydian I-V-I (foil)",
          "chords": [
            "Ab",
            "Eb",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-362",
          "description": "Ab Aeolian i-V7-i (foil)",
          "chords": [
            "Abm",
            "Eb7",
            "Abm"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-368",
          "description": "Ab Locrian i°-V7-i° (foil)",
          "chords": [
            "Abdim",
            "Eb7",
            "Abdim"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-373",
          "description": "A Ionian I-V-I (foil)",
          "chords": [
            "A",
            "E",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-378",
          "description": "A Dorian i-iv-i (foil)",
          "chords": [
            "Am",
            "Dm",
            "Am"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-384",
          "description": "A Phrygian i-II-i (foil)",
          "chords": [
            "Am",
            "B",
            "Am"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-391",
          "description": "A Lydian I-V-I (foil)",
          "chords": [
            "A",
            "E",
            "A"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-397",
          "description": "A Mixolydian I-V-I (foil)",
          "chords": [
            "A",
            "E",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-403",
          "description": "A Aeolian i-V7-i (foil)",
          "chords": [
            "Am",
            "E7",
            "Am"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-409",
          "description": "A Locrian i°-V7-i° (foil)",
          "chords": [
            "Adim",
            "E7",
            "Adim"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-414",
          "description": "Bb Ionian I-V-I (foil)",
          "chords": [
            "Bb",
            "F",
            "Bb"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-419",
          "description": "Bb Dorian i-iv-i (foil)",
          "chords": [
            "Bbm",
            "Ebm",
            "Bbm"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-425",
          "description": "Bb Phrygian i-II-i (foil)",
          "chords": [
            "Bbm",
            "C",
            "Bbm"
          ],
          "parentKey": "Gb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-432",
          "description": "Bb Lydian I-V-I (foil)",
          "chords": [
            "Bb",
            "F",
            "Bb"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-438",
          "description": "Bb Mixolydian I-V-I (foil)",
          "chords": [
            "Bb",
            "F",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-444",
          "description": "Bb Aeolian i-V7-i (foil)",
          "chords": [
            "Bbm",
            "F7",
            "Bbm"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-450",
          "description": "Bb Locrian i°-V7-i° (foil)",
          "chords": [
            "Bbdim",
            "F7",
            "Bbdim"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-455",
          "description": "B Ionian I-V-I (foil)",
          "chords": [
            "B",
            "F#",
            "B"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-460",
          "description": "B Dorian i-iv-i (foil)",
          "chords": [
            "Bm",
            "Em",
            "Bm"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-466",
          "description": "B Phrygian i-II-i (foil)",
          "chords": [
            "Bm",
            "C#",
            "Bm"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-473",
          "description": "B Lydian I-V-I (foil)",
          "chords": [
            "B",
            "F#",
            "B"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-479",
          "description": "B Mixolydian I-V-I (foil)",
          "chords": [
            "B",
            "F#",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-485",
          "description": "B Aeolian i-V7-i (foil)",
          "chords": [
            "Bm",
            "F#7",
            "Bm"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-491",
          "description": "B Locrian i°-V7-i° (foil)",
          "chords": [
            "Bdim",
            "F#7",
            "Bdim"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-568",
          "description": "C Ionian in C major context — I-V-I (foil)",
          "chords": [
            "C",
            "G",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-574",
          "description": "D Dorian in C major context — i-iv-i (foil)",
          "chords": [
            "Dm",
            "Gm",
            "Dm"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-580",
          "description": "E Phrygian in C major context — i-II-i (foil)",
          "chords": [
            "Em",
            "F#",
            "Em"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-587",
          "description": "F Lydian in C major context — I-V-I (foil)",
          "chords": [
            "F",
            "C",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-593",
          "description": "G Mixolydian in C major context — I-V-I (foil)",
          "chords": [
            "G",
            "D",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-599",
          "description": "A Aeolian in C major context — i-V7-i (foil)",
          "chords": [
            "Am",
            "E7",
            "Am"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-605",
          "description": "B Locrian in C major context — i°-V7-i° (foil)",
          "chords": [
            "Bdim",
            "F#7",
            "Bdim"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-609",
          "description": "G Ionian in G major context — I-V-I (foil)",
          "chords": [
            "G",
            "D",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-615",
          "description": "A Dorian in G major context — i-iv-i (foil)",
          "chords": [
            "Am",
            "Dm",
            "Am"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-621",
          "description": "B Phrygian in G major context — i-II-i (foil)",
          "chords": [
            "Bm",
            "C#",
            "Bm"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-628",
          "description": "C Lydian in G major context — I-V-I (foil)",
          "chords": [
            "C",
            "G",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-634",
          "description": "D Mixolydian in G major context — I-V-I (foil)",
          "chords": [
            "D",
            "A",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-640",
          "description": "E Aeolian in G major context — i-V7-i (foil)",
          "chords": [
            "Em",
            "B7",
            "Em"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-646",
          "description": "F# Locrian in G major context — i°-V7-i° (foil)",
          "chords": [
            "F#dim",
            "C#7",
            "F#dim"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-650",
          "description": "D Ionian in D major context — I-V-I (foil)",
          "chords": [
            "D",
            "A",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-656",
          "description": "E Dorian in D major context — i-iv-i (foil)",
          "chords": [
            "Em",
            "Am",
            "Em"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-662",
          "description": "F# Phrygian in D major context — i-II-i (foil)",
          "chords": [
            "F#m",
            "G#",
            "F#m"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-669",
          "description": "G Lydian in D major context — I-V-I (foil)",
          "chords": [
            "G",
            "D",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-675",
          "description": "A Mixolydian in D major context — I-V-I (foil)",
          "chords": [
            "A",
            "E",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-681",
          "description": "B Aeolian in D major context — i-V7-i (foil)",
          "chords": [
            "Bm",
            "F#7",
            "Bm"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-687",
          "description": "C# Locrian in D major context — i°-V7-i° (foil)",
          "chords": [
            "C#dim",
            "G#7",
            "C#dim"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-691",
          "description": "A Ionian in A major context — I-V-I (foil)",
          "chords": [
            "A",
            "E",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-697",
          "description": "B Dorian in A major context — i-iv-i (foil)",
          "chords": [
            "Bm",
            "Em",
            "Bm"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-703",
          "description": "C# Phrygian in A major context — i-II-i (foil)",
          "chords": [
            "C#m",
            "D#",
            "C#m"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-710",
          "description": "D Lydian in A major context — I-V-I (foil)",
          "chords": [
            "D",
            "A",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-716",
          "description": "E Mixolydian in A major context — I-V-I (foil)",
          "chords": [
            "E",
            "B",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-722",
          "description": "F# Aeolian in A major context — i-V7-i (foil)",
          "chords": [
            "F#m",
            "C#7",
            "F#m"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-728",
          "description": "G# Locrian in A major context — i°-V7-i° (foil)",
          "chords": [
            "G#dim",
            "D#7",
            "G#dim"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        }
      ]
    },
    "functional_clear": {
      "total": 60,
      "passed": 0,
      "failed": 60,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-493",
          "description": "C major I-IV-V-I functional",
          "chords": [
            "C",
            "F",
            "G",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-494",
          "description": "C major I-vi-IV-V functional",
          "chords": [
            "C",
            "A",
            "F",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-495",
          "description": "C major vi-IV-I-V functional",
          "chords": [
            "A",
            "F",
            "C",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-496",
          "description": "C major ii-V-I functional",
          "chords": [
            "D",
            "G",
            "C"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-497",
          "description": "C major I-V-vi-IV functional",
          "chords": [
            "C",
            "G",
            "A",
            "F"
          ],
          "parentKey": "C major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-498",
          "description": "Db major I-IV-V-I functional",
          "chords": [
            "Db",
            "Gb",
            "Ab",
            "Db"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-499",
          "description": "Db major I-vi-IV-V functional",
          "chords": [
            "Db",
            "Bb",
            "Gb",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-500",
          "description": "Db major vi-IV-I-V functional",
          "chords": [
            "Bb",
            "Gb",
            "Db",
            "Ab"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-501",
          "description": "Db major ii-V-I functional",
          "chords": [
            "Eb",
            "Ab",
            "Db"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-502",
          "description": "Db major I-V-vi-IV functional",
          "chords": [
            "Db",
            "Ab",
            "Bb",
            "Gb"
          ],
          "parentKey": "Db major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-503",
          "description": "D major I-IV-V-I functional",
          "chords": [
            "D",
            "G",
            "A",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-504",
          "description": "D major I-vi-IV-V functional",
          "chords": [
            "D",
            "B",
            "G",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-505",
          "description": "D major vi-IV-I-V functional",
          "chords": [
            "B",
            "G",
            "D",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-506",
          "description": "D major ii-V-I functional",
          "chords": [
            "E",
            "A",
            "D"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-507",
          "description": "D major I-V-vi-IV functional",
          "chords": [
            "D",
            "A",
            "B",
            "G"
          ],
          "parentKey": "D major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-508",
          "description": "Eb major I-IV-V-I functional",
          "chords": [
            "Eb",
            "Ab",
            "Bb",
            "Eb"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-509",
          "description": "Eb major I-vi-IV-V functional",
          "chords": [
            "Eb",
            "C",
            "Ab",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-510",
          "description": "Eb major vi-IV-I-V functional",
          "chords": [
            "C",
            "Ab",
            "Eb",
            "Bb"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-511",
          "description": "Eb major ii-V-I functional",
          "chords": [
            "F",
            "Bb",
            "Eb"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-512",
          "description": "Eb major I-V-vi-IV functional",
          "chords": [
            "Eb",
            "Bb",
            "C",
            "Ab"
          ],
          "parentKey": "Eb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-513",
          "description": "E major I-IV-V-I functional",
          "chords": [
            "E",
            "A",
            "B",
            "E"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-514",
          "description": "E major I-vi-IV-V functional",
          "chords": [
            "E",
            "C#",
            "A",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-515",
          "description": "E major vi-IV-I-V functional",
          "chords": [
            "C#",
            "A",
            "E",
            "B"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-516",
          "description": "E major ii-V-I functional",
          "chords": [
            "F#",
            "B",
            "E"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-517",
          "description": "E major I-V-vi-IV functional",
          "chords": [
            "E",
            "B",
            "C#",
            "A"
          ],
          "parentKey": "E major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-518",
          "description": "F major I-IV-V-I functional",
          "chords": [
            "F",
            "Bb",
            "C",
            "F"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-519",
          "description": "F major I-vi-IV-V functional",
          "chords": [
            "F",
            "D",
            "Bb",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-520",
          "description": "F major vi-IV-I-V functional",
          "chords": [
            "D",
            "Bb",
            "F",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-521",
          "description": "F major ii-V-I functional",
          "chords": [
            "G",
            "C",
            "F"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-522",
          "description": "F major I-V-vi-IV functional",
          "chords": [
            "F",
            "C",
            "D",
            "Bb"
          ],
          "parentKey": "F major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-523",
          "description": "F# major I-IV-V-I functional",
          "chords": [
            "F#",
            "B",
            "C#",
            "F#"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-524",
          "description": "F# major I-vi-IV-V functional",
          "chords": [
            "F#",
            "D#",
            "B",
            "C#"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-525",
          "description": "F# major vi-IV-I-V functional",
          "chords": [
            "D#",
            "B",
            "F#",
            "C#"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-526",
          "description": "F# major ii-V-I functional",
          "chords": [
            "G#",
            "C#",
            "F#"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-527",
          "description": "F# major I-V-vi-IV functional",
          "chords": [
            "F#",
            "C#",
            "D#",
            "B"
          ],
          "parentKey": "F# major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-528",
          "description": "G major I-IV-V-I functional",
          "chords": [
            "G",
            "C",
            "D",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-529",
          "description": "G major I-vi-IV-V functional",
          "chords": [
            "G",
            "E",
            "C",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-530",
          "description": "G major vi-IV-I-V functional",
          "chords": [
            "E",
            "C",
            "G",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-531",
          "description": "G major ii-V-I functional",
          "chords": [
            "A",
            "D",
            "G"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-532",
          "description": "G major I-V-vi-IV functional",
          "chords": [
            "G",
            "D",
            "E",
            "C"
          ],
          "parentKey": "G major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-533",
          "description": "Ab major I-IV-V-I functional",
          "chords": [
            "Ab",
            "Db",
            "Eb",
            "Ab"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-534",
          "description": "Ab major I-vi-IV-V functional",
          "chords": [
            "Ab",
            "F",
            "Db",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-535",
          "description": "Ab major vi-IV-I-V functional",
          "chords": [
            "F",
            "Db",
            "Ab",
            "Eb"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-536",
          "description": "Ab major ii-V-I functional",
          "chords": [
            "Bb",
            "Eb",
            "Ab"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-537",
          "description": "Ab major I-V-vi-IV functional",
          "chords": [
            "Ab",
            "Eb",
            "F",
            "Db"
          ],
          "parentKey": "Ab major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-538",
          "description": "A major I-IV-V-I functional",
          "chords": [
            "A",
            "D",
            "E",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-539",
          "description": "A major I-vi-IV-V functional",
          "chords": [
            "A",
            "F#",
            "D",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-540",
          "description": "A major vi-IV-I-V functional",
          "chords": [
            "F#",
            "D",
            "A",
            "E"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-541",
          "description": "A major ii-V-I functional",
          "chords": [
            "B",
            "E",
            "A"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-542",
          "description": "A major I-V-vi-IV functional",
          "chords": [
            "A",
            "E",
            "F#",
            "D"
          ],
          "parentKey": "A major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-543",
          "description": "Bb major I-IV-V-I functional",
          "chords": [
            "Bb",
            "Eb",
            "F",
            "Bb"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-544",
          "description": "Bb major I-vi-IV-V functional",
          "chords": [
            "Bb",
            "G",
            "Eb",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-545",
          "description": "Bb major vi-IV-I-V functional",
          "chords": [
            "G",
            "Eb",
            "Bb",
            "F"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-546",
          "description": "Bb major ii-V-I functional",
          "chords": [
            "C",
            "F",
            "Bb"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-547",
          "description": "Bb major I-V-vi-IV functional",
          "chords": [
            "Bb",
            "F",
            "G",
            "Eb"
          ],
          "parentKey": "Bb major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-548",
          "description": "B major I-IV-V-I functional",
          "chords": [
            "B",
            "E",
            "F#",
            "B"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-549",
          "description": "B major I-vi-IV-V functional",
          "chords": [
            "B",
            "G#",
            "E",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-550",
          "description": "B major vi-IV-I-V functional",
          "chords": [
            "G#",
            "E",
            "B",
            "F#"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-551",
          "description": "B major ii-V-I functional",
          "chords": [
            "C#",
            "F#",
            "B"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-552",
          "description": "B major I-V-vi-IV functional",
          "chords": [
            "B",
            "F#",
            "G#",
            "E"
          ],
          "parentKey": "B major",
          "expectedModal": false,
          "error": "input.replace is not a function"
        }
      ]
    },
    "ambiguous": {
      "total": 103,
      "passed": 0,
      "failed": 103,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-10",
          "description": "C Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Cm",
            "F",
            "Bb",
            "Cm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-16",
          "description": "C Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Cm",
            "Db",
            "Bb",
            "Cm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-23",
          "description": "C Lydian I-II-V-I (no parent key)",
          "chords": [
            "C",
            "D",
            "G",
            "C"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-29",
          "description": "C Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "C",
            "Bb",
            "F",
            "C"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-35",
          "description": "C Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Cm",
            "Ab",
            "Bb",
            "Cm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-41",
          "description": "C Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Cdim",
            "Db",
            "Gbm",
            "Cdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-51",
          "description": "Db Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Dbm",
            "Gb",
            "B",
            "Dbm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-57",
          "description": "Db Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Dbm",
            "D",
            "B",
            "Dbm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-64",
          "description": "Db Lydian I-II-V-I (no parent key)",
          "chords": [
            "Db",
            "Eb",
            "Ab",
            "Db"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-70",
          "description": "Db Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "Db",
            "Cb",
            "Gb",
            "Db"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-76",
          "description": "Db Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Dbm",
            "A",
            "B",
            "Dbm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-82",
          "description": "Db Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Dbdim",
            "D",
            "Gm",
            "Dbdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-92",
          "description": "D Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Dm",
            "G",
            "C",
            "Dm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-98",
          "description": "D Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Dm",
            "Eb",
            "C",
            "Dm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-105",
          "description": "D Lydian I-II-V-I (no parent key)",
          "chords": [
            "D",
            "E",
            "A",
            "D"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-111",
          "description": "D Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "D",
            "C",
            "G",
            "D"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-117",
          "description": "D Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Dm",
            "Bb",
            "C",
            "Dm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-123",
          "description": "D Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Ddim",
            "Eb",
            "Abm",
            "Ddim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-133",
          "description": "Eb Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Ebm",
            "Ab",
            "Db",
            "Ebm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-139",
          "description": "Eb Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Ebm",
            "E",
            "Db",
            "Ebm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-146",
          "description": "Eb Lydian I-II-V-I (no parent key)",
          "chords": [
            "Eb",
            "F",
            "Bb",
            "Eb"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-152",
          "description": "Eb Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "Eb",
            "Db",
            "Ab",
            "Eb"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-158",
          "description": "Eb Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Ebm",
            "Cb",
            "Db",
            "Ebm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-164",
          "description": "Eb Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Ebdim",
            "E",
            "Am",
            "Ebdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-174",
          "description": "E Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Em",
            "A",
            "D",
            "Em"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-180",
          "description": "E Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Em",
            "F",
            "D",
            "Em"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-187",
          "description": "E Lydian I-II-V-I (no parent key)",
          "chords": [
            "E",
            "F#",
            "B",
            "E"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-193",
          "description": "E Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "E",
            "D",
            "A",
            "E"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-199",
          "description": "E Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Em",
            "C",
            "D",
            "Em"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-205",
          "description": "E Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Edim",
            "F",
            "Bbm",
            "Edim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-215",
          "description": "F Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Fm",
            "Bb",
            "Eb",
            "Fm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-221",
          "description": "F Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Fm",
            "Gb",
            "Eb",
            "Fm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-228",
          "description": "F Lydian I-II-V-I (no parent key)",
          "chords": [
            "F",
            "G",
            "C",
            "F"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-234",
          "description": "F Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "F",
            "Eb",
            "Bb",
            "F"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-240",
          "description": "F Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Fm",
            "Db",
            "Eb",
            "Fm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-246",
          "description": "F Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Fdim",
            "Gb",
            "Cbm",
            "Fdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-256",
          "description": "F# Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "F#m",
            "B",
            "E",
            "F#m"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-262",
          "description": "F# Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "F#m",
            "G",
            "E",
            "F#m"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-269",
          "description": "F# Lydian I-II-V-I (no parent key)",
          "chords": [
            "F#",
            "Ab",
            "Db",
            "F#"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-275",
          "description": "F# Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "F#",
            "E",
            "B",
            "F#"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-281",
          "description": "F# Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "F#m",
            "D",
            "E",
            "F#m"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-287",
          "description": "F# Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "F#dim",
            "G",
            "Cm",
            "F#dim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-297",
          "description": "G Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Gm",
            "C",
            "F",
            "Gm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-303",
          "description": "G Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Gm",
            "Ab",
            "F",
            "Gm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-310",
          "description": "G Lydian I-II-V-I (no parent key)",
          "chords": [
            "G",
            "A",
            "D",
            "G"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-316",
          "description": "G Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "G",
            "F",
            "C",
            "G"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-322",
          "description": "G Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Gm",
            "Eb",
            "F",
            "Gm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-328",
          "description": "G Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Gdim",
            "Ab",
            "Dbm",
            "Gdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-338",
          "description": "Ab Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Abm",
            "Db",
            "Gb",
            "Abm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-344",
          "description": "Ab Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Abm",
            "A",
            "Gb",
            "Abm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-351",
          "description": "Ab Lydian I-II-V-I (no parent key)",
          "chords": [
            "Ab",
            "Bb",
            "Eb",
            "Ab"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-357",
          "description": "Ab Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "Ab",
            "Gb",
            "Db",
            "Ab"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-363",
          "description": "Ab Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Abm",
            "E",
            "Gb",
            "Abm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-369",
          "description": "Ab Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Abdim",
            "A",
            "Dm",
            "Abdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-379",
          "description": "A Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Am",
            "D",
            "G",
            "Am"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-385",
          "description": "A Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Am",
            "Bb",
            "G",
            "Am"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-392",
          "description": "A Lydian I-II-V-I (no parent key)",
          "chords": [
            "A",
            "B",
            "E",
            "A"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-398",
          "description": "A Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "A",
            "G",
            "D",
            "A"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-404",
          "description": "A Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Am",
            "F",
            "G",
            "Am"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-410",
          "description": "A Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Adim",
            "Bb",
            "Ebm",
            "Adim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-420",
          "description": "Bb Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Bbm",
            "Eb",
            "Ab",
            "Bbm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-426",
          "description": "Bb Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Bbm",
            "Cb",
            "Ab",
            "Bbm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-433",
          "description": "Bb Lydian I-II-V-I (no parent key)",
          "chords": [
            "Bb",
            "C",
            "F",
            "Bb"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-439",
          "description": "Bb Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "Bb",
            "Ab",
            "Eb",
            "Bb"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-445",
          "description": "Bb Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Bbm",
            "Gb",
            "Ab",
            "Bbm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-451",
          "description": "Bb Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Bbdim",
            "B",
            "Em",
            "Bbdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-461",
          "description": "B Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Bm",
            "E",
            "A",
            "Bm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-467",
          "description": "B Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Bm",
            "C",
            "A",
            "Bm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-474",
          "description": "B Lydian I-II-V-I (no parent key)",
          "chords": [
            "B",
            "C#",
            "F#",
            "B"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-480",
          "description": "B Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "B",
            "A",
            "E",
            "B"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-486",
          "description": "B Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Bm",
            "G",
            "A",
            "Bm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-492",
          "description": "B Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Bdim",
            "C",
            "Fm",
            "Bdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-553",
          "description": "Ambiguous: Could be C major functional or C Ionian modal",
          "chords": [
            "C",
            "F",
            "G",
            "C"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-554",
          "description": "Ambiguous: Could be A Aeolian or vi-IV-I-V in C",
          "chords": [
            "Am",
            "F",
            "C",
            "G"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-555",
          "description": "Ambiguous: Could be D major or D Mixolydian in G",
          "chords": [
            "D",
            "G",
            "A",
            "D"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-556",
          "description": "C Mixolydian with parent key context",
          "chords": [
            "C",
            "A#",
            "F",
            "C"
          ],
          "parentKey": "F major",
          "expectedModal": true,
          "expectedMode": "C Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-557",
          "description": "G Mixolydian with parent key context",
          "chords": [
            "G",
            "F",
            "C",
            "G"
          ],
          "parentKey": "C major",
          "expectedModal": true,
          "expectedMode": "G Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-558",
          "description": "D Mixolydian with parent key context",
          "chords": [
            "D",
            "C",
            "G",
            "D"
          ],
          "parentKey": "G major",
          "expectedModal": true,
          "expectedMode": "D Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-559",
          "description": "A Mixolydian with parent key context",
          "chords": [
            "A",
            "G",
            "D",
            "A"
          ],
          "parentKey": "D major",
          "expectedModal": true,
          "expectedMode": "A Mixolydian",
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-570",
          "description": "D Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Dm",
            "G",
            "C",
            "Dm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-576",
          "description": "E Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Em",
            "F",
            "D",
            "Em"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-582",
          "description": "F Lydian I-II-V-I (no parent key)",
          "chords": [
            "F",
            "G",
            "C",
            "F"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-589",
          "description": "G Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "G",
            "F",
            "C",
            "G"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-595",
          "description": "A Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Am",
            "F",
            "G",
            "Am"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-601",
          "description": "B Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "Bdim",
            "C",
            "Fm",
            "Bdim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-611",
          "description": "A Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Am",
            "D",
            "G",
            "Am"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-617",
          "description": "B Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "Bm",
            "C",
            "A",
            "Bm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-623",
          "description": "C Lydian I-II-V-I (no parent key)",
          "chords": [
            "C",
            "D",
            "G",
            "C"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-630",
          "description": "D Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "D",
            "C",
            "G",
            "D"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-636",
          "description": "E Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Em",
            "C",
            "D",
            "Em"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-642",
          "description": "F# Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "F#dim",
            "G",
            "Cm",
            "F#dim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-652",
          "description": "E Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Em",
            "A",
            "D",
            "Em"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-658",
          "description": "F# Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "F#m",
            "G",
            "E",
            "F#m"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-664",
          "description": "G Lydian I-II-V-I (no parent key)",
          "chords": [
            "G",
            "A",
            "D",
            "G"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-671",
          "description": "A Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "A",
            "G",
            "D",
            "A"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-677",
          "description": "B Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "Bm",
            "G",
            "A",
            "Bm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-683",
          "description": "C# Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "C#dim",
            "D",
            "Gm",
            "C#dim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-693",
          "description": "B Dorian i-IV-bVII-i (no parent key)",
          "chords": [
            "Bm",
            "E",
            "A",
            "Bm"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-699",
          "description": "C# Phrygian i-bII-bVII-i (no parent key)",
          "chords": [
            "C#m",
            "D",
            "B",
            "C#m"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-705",
          "description": "D Lydian I-II-V-I (no parent key)",
          "chords": [
            "D",
            "E",
            "A",
            "D"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-712",
          "description": "E Mixolydian I-bVII-IV-I (no parent key)",
          "chords": [
            "E",
            "D",
            "A",
            "E"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-718",
          "description": "F# Aeolian i-bVI-bVII-i (no parent key)",
          "chords": [
            "F#m",
            "D",
            "E",
            "F#m"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-724",
          "description": "G# Locrian i°-bII-v-i° (no parent key)",
          "chords": [
            "G#dim",
            "A",
            "Dm",
            "G#dim"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        }
      ]
    },
    "edge_case": {
      "total": 5,
      "passed": 0,
      "failed": 5,
      "successRate": "0.00%",
      "failures": [
        {
          "testId": "test-560",
          "description": "Edge case: Single chord",
          "chords": [
            "C"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-561",
          "description": "Edge case: Repeated chord",
          "chords": [
            "G",
            "G",
            "G"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-562",
          "description": "Edge case: Chromatic progression",
          "chords": [
            "C",
            "C#",
            "D"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-563",
          "description": "Edge case: Enharmonic equivalents",
          "chords": [
            "F#",
            "Gb"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        },
        {
          "testId": "test-564",
          "description": "Edge case: Wide interval jumps",
          "chords": [
            "C",
            "F#",
            "B",
            "E"
          ],
          "expectedModal": false,
          "error": "input.replace is not a function"
        }
      ]
    }
  },
  "allTestExecutions": [
    {
      "testId": "test-1",
      "description": "C Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "F",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "C Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.944Z"
    },
    {
      "testId": "test-2",
      "description": "C Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cmaj7",
        "Fmaj7",
        "Cmaj7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "C Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.977Z"
    },
    {
      "testId": "test-3",
      "description": "C Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "C Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.978Z"
    },
    {
      "testId": "test-4",
      "description": "C Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "C",
        "G",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.979Z"
    },
    {
      "testId": "test-5",
      "description": "C Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Cm",
        "F",
        "Bb",
        "Cm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "C Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.980Z"
    },
    {
      "testId": "test-6",
      "description": "C Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Cm",
        "F",
        "Cm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "C Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.981Z"
    },
    {
      "testId": "test-7",
      "description": "C Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cm7",
        "Fmaj7",
        "Cm7"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "C Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.989Z"
    },
    {
      "testId": "test-8",
      "description": "C Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Cm",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "C Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.990Z"
    },
    {
      "testId": "test-9",
      "description": "C Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Cm",
        "Fm",
        "Cm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.991Z"
    },
    {
      "testId": "test-10",
      "description": "C Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Cm",
        "F",
        "Bb",
        "Cm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.992Z"
    },
    {
      "testId": "test-11",
      "description": "C Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Cm",
        "Db",
        "Bb",
        "Cm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "C Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:18.993Z"
    },
    {
      "testId": "test-12",
      "description": "C Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Cm",
        "Db",
        "Cm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "C Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.006Z"
    },
    {
      "testId": "test-13",
      "description": "C Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cm7",
        "Db",
        "Cm7"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "C Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.006Z"
    },
    {
      "testId": "test-14",
      "description": "C Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Cm",
        "Db"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "C Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.007Z"
    },
    {
      "testId": "test-15",
      "description": "C Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Cm",
        "D",
        "Cm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.021Z"
    },
    {
      "testId": "test-16",
      "description": "C Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Cm",
        "Db",
        "Bb",
        "Cm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.022Z"
    },
    {
      "testId": "test-17",
      "description": "C Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "D",
        "G",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.023Z"
    },
    {
      "testId": "test-18",
      "description": "C Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "D",
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.024Z"
    },
    {
      "testId": "test-19",
      "description": "C Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "D",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.024Z"
    },
    {
      "testId": "test-20",
      "description": "C Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cmaj7",
        "D",
        "Cmaj7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.025Z"
    },
    {
      "testId": "test-21",
      "description": "C Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.030Z"
    },
    {
      "testId": "test-22",
      "description": "C Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "C",
        "G",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.030Z"
    },
    {
      "testId": "test-23",
      "description": "C Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "C",
        "D",
        "G",
        "C"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.030Z"
    },
    {
      "testId": "test-24",
      "description": "C Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "Bb",
        "F",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "C Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.031Z"
    },
    {
      "testId": "test-25",
      "description": "C Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "Bb",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "C Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.031Z"
    },
    {
      "testId": "test-26",
      "description": "C Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "C7",
        "F",
        "C7"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "C Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.032Z"
    },
    {
      "testId": "test-27",
      "description": "C Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C",
        "F"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "C Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.032Z"
    },
    {
      "testId": "test-28",
      "description": "C Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "C",
        "G",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.033Z"
    },
    {
      "testId": "test-29",
      "description": "C Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "C",
        "Bb",
        "F",
        "C"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.033Z"
    },
    {
      "testId": "test-30",
      "description": "C Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Cm",
        "Ab",
        "Bb",
        "Cm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "C Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.034Z"
    },
    {
      "testId": "test-31",
      "description": "C Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Cm",
        "Bb",
        "Cm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "C Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.037Z"
    },
    {
      "testId": "test-32",
      "description": "C Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cm7",
        "Ab",
        "Bb",
        "Cm7"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "C Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.038Z"
    },
    {
      "testId": "test-33",
      "description": "C Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Cm",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "C Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.039Z"
    },
    {
      "testId": "test-34",
      "description": "C Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Cm",
        "G7",
        "Cm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.040Z"
    },
    {
      "testId": "test-35",
      "description": "C Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Cm",
        "Ab",
        "Bb",
        "Cm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.041Z"
    },
    {
      "testId": "test-36",
      "description": "C Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Cdim",
        "Db",
        "Gbm",
        "Cdim"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "C Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.041Z"
    },
    {
      "testId": "test-37",
      "description": "C Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Cdim",
        "Db",
        "Cdim"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "C Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.043Z"
    },
    {
      "testId": "test-38",
      "description": "C Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cm7b5",
        "Db",
        "Cm7b5"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "C Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.043Z"
    },
    {
      "testId": "test-39",
      "description": "C Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Cdim",
        "Db"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "C Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.043Z"
    },
    {
      "testId": "test-40",
      "description": "C Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Cdim",
        "G7",
        "Cdim"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.044Z"
    },
    {
      "testId": "test-41",
      "description": "C Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Cdim",
        "Db",
        "Gbm",
        "Cdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.044Z"
    },
    {
      "testId": "test-42",
      "description": "Db Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Db",
        "Gb",
        "Db"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Db Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.045Z"
    },
    {
      "testId": "test-43",
      "description": "Db Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dbmaj7",
        "Gbmaj7",
        "Dbmaj7"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Db Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.045Z"
    },
    {
      "testId": "test-44",
      "description": "Db Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Db",
        "Gb"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Db Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.046Z"
    },
    {
      "testId": "test-45",
      "description": "Db Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Db",
        "Ab",
        "Db"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.074Z"
    },
    {
      "testId": "test-46",
      "description": "Db Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dbm",
        "Gb",
        "B",
        "Dbm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Db Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.075Z"
    },
    {
      "testId": "test-47",
      "description": "Db Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Dbm",
        "Gb",
        "Dbm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Db Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.075Z"
    },
    {
      "testId": "test-48",
      "description": "Db Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dbm7",
        "Gbmaj7",
        "Dbm7"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Db Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.076Z"
    },
    {
      "testId": "test-49",
      "description": "Db Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dbm",
        "Gb"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Db Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.076Z"
    },
    {
      "testId": "test-50",
      "description": "Db Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dbm",
        "Gbm",
        "Dbm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.077Z"
    },
    {
      "testId": "test-51",
      "description": "Db Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dbm",
        "Gb",
        "B",
        "Dbm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.077Z"
    },
    {
      "testId": "test-52",
      "description": "Db Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dbm",
        "D",
        "B",
        "Dbm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Db Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.099Z"
    },
    {
      "testId": "test-53",
      "description": "Db Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dbm",
        "D",
        "Dbm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Db Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.100Z"
    },
    {
      "testId": "test-54",
      "description": "Db Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dbm7",
        "D",
        "Dbm7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Db Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.100Z"
    },
    {
      "testId": "test-55",
      "description": "Db Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dbm",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Db Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.102Z"
    },
    {
      "testId": "test-56",
      "description": "Db Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dbm",
        "Eb",
        "Dbm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.102Z"
    },
    {
      "testId": "test-57",
      "description": "Db Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dbm",
        "D",
        "B",
        "Dbm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.104Z"
    },
    {
      "testId": "test-58",
      "description": "Db Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "Db",
        "Eb",
        "Ab",
        "Db"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Db Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.104Z"
    },
    {
      "testId": "test-59",
      "description": "Db Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "Db",
        "Eb",
        "Db",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Db Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.106Z"
    },
    {
      "testId": "test-60",
      "description": "Db Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "Db",
        "Eb",
        "Db"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Db Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.107Z"
    },
    {
      "testId": "test-61",
      "description": "Db Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dbmaj7",
        "Eb",
        "Dbmaj7"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Db Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.108Z"
    },
    {
      "testId": "test-62",
      "description": "Db Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Db",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Db Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.109Z"
    },
    {
      "testId": "test-63",
      "description": "Db Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Db",
        "Ab",
        "Db"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.110Z"
    },
    {
      "testId": "test-64",
      "description": "Db Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Db",
        "Eb",
        "Ab",
        "Db"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.111Z"
    },
    {
      "testId": "test-65",
      "description": "Db Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Db",
        "Cb",
        "Gb",
        "Db"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Db Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.112Z"
    },
    {
      "testId": "test-66",
      "description": "Db Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "Db",
        "Cb",
        "Db"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Db Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.114Z"
    },
    {
      "testId": "test-67",
      "description": "Db Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "Db7",
        "Gb",
        "Db7"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Db Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.115Z"
    },
    {
      "testId": "test-68",
      "description": "Db Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Db",
        "Gb"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Db Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.117Z"
    },
    {
      "testId": "test-69",
      "description": "Db Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Db",
        "Ab",
        "Db"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.118Z"
    },
    {
      "testId": "test-70",
      "description": "Db Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Db",
        "Cb",
        "Gb",
        "Db"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.119Z"
    },
    {
      "testId": "test-71",
      "description": "Db Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dbm",
        "A",
        "B",
        "Dbm"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Db Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.119Z"
    },
    {
      "testId": "test-72",
      "description": "Db Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dbm",
        "B",
        "Dbm"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Db Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.121Z"
    },
    {
      "testId": "test-73",
      "description": "Db Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dbm7",
        "A",
        "B",
        "Dbm7"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Db Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.123Z"
    },
    {
      "testId": "test-74",
      "description": "Db Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dbm",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Db Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.124Z"
    },
    {
      "testId": "test-75",
      "description": "Db Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dbm",
        "Ab7",
        "Dbm"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.125Z"
    },
    {
      "testId": "test-76",
      "description": "Db Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dbm",
        "A",
        "B",
        "Dbm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.126Z"
    },
    {
      "testId": "test-77",
      "description": "Db Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Dbdim",
        "D",
        "Gm",
        "Dbdim"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "Db Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.127Z"
    },
    {
      "testId": "test-78",
      "description": "Db Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Dbdim",
        "D",
        "Dbdim"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "Db Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.128Z"
    },
    {
      "testId": "test-79",
      "description": "Db Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dbm7b5",
        "D",
        "Dbm7b5"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "Db Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.129Z"
    },
    {
      "testId": "test-80",
      "description": "Db Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dbdim",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "Db Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.129Z"
    },
    {
      "testId": "test-81",
      "description": "Db Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Dbdim",
        "Ab7",
        "Dbdim"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.130Z"
    },
    {
      "testId": "test-82",
      "description": "Db Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dbdim",
        "D",
        "Gm",
        "Dbdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.131Z"
    },
    {
      "testId": "test-83",
      "description": "D Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "G",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "D Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.132Z"
    },
    {
      "testId": "test-84",
      "description": "D Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dmaj7",
        "Gmaj7",
        "Dmaj7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "D Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.133Z"
    },
    {
      "testId": "test-85",
      "description": "D Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "D",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "D Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.171Z"
    },
    {
      "testId": "test-86",
      "description": "D Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "D",
        "A",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.172Z"
    },
    {
      "testId": "test-87",
      "description": "D Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "G",
        "C",
        "Dm"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.172Z"
    },
    {
      "testId": "test-88",
      "description": "D Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "G",
        "Dm"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.173Z"
    },
    {
      "testId": "test-89",
      "description": "D Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dm7",
        "Gmaj7",
        "Dm7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.173Z"
    },
    {
      "testId": "test-90",
      "description": "D Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dm",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.174Z"
    },
    {
      "testId": "test-91",
      "description": "D Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dm",
        "Gm",
        "Dm"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.174Z"
    },
    {
      "testId": "test-92",
      "description": "D Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dm",
        "G",
        "C",
        "Dm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.174Z"
    },
    {
      "testId": "test-93",
      "description": "D Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "Eb",
        "C",
        "Dm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "D Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.181Z"
    },
    {
      "testId": "test-94",
      "description": "D Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "Eb",
        "Dm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "D Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.182Z"
    },
    {
      "testId": "test-95",
      "description": "D Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dm7",
        "Eb",
        "Dm7"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "D Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.182Z"
    },
    {
      "testId": "test-96",
      "description": "D Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dm",
        "Eb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "D Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.183Z"
    },
    {
      "testId": "test-97",
      "description": "D Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dm",
        "E",
        "Dm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.183Z"
    },
    {
      "testId": "test-98",
      "description": "D Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dm",
        "Eb",
        "C",
        "Dm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.183Z"
    },
    {
      "testId": "test-99",
      "description": "D Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "E",
        "A",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.184Z"
    },
    {
      "testId": "test-100",
      "description": "D Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "E",
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.184Z"
    },
    {
      "testId": "test-101",
      "description": "D Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "E",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.184Z"
    },
    {
      "testId": "test-102",
      "description": "D Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dmaj7",
        "E",
        "Dmaj7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.185Z"
    },
    {
      "testId": "test-103",
      "description": "D Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.185Z"
    },
    {
      "testId": "test-104",
      "description": "D Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "D",
        "A",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.185Z"
    },
    {
      "testId": "test-105",
      "description": "D Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "D",
        "E",
        "A",
        "D"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.186Z"
    },
    {
      "testId": "test-106",
      "description": "D Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "C",
        "G",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.186Z"
    },
    {
      "testId": "test-107",
      "description": "D Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.187Z"
    },
    {
      "testId": "test-108",
      "description": "D Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "D7",
        "G",
        "D7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.187Z"
    },
    {
      "testId": "test-109",
      "description": "D Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "D",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.187Z"
    },
    {
      "testId": "test-110",
      "description": "D Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "D",
        "A",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.188Z"
    },
    {
      "testId": "test-111",
      "description": "D Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "D",
        "C",
        "G",
        "D"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.188Z"
    },
    {
      "testId": "test-112",
      "description": "D Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "Bb",
        "C",
        "Dm"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "D Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.188Z"
    },
    {
      "testId": "test-113",
      "description": "D Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "C",
        "Dm"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "D Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.209Z"
    },
    {
      "testId": "test-114",
      "description": "D Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dm7",
        "Bb",
        "C",
        "Dm7"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "D Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.211Z"
    },
    {
      "testId": "test-115",
      "description": "D Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dm",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "D Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.214Z"
    },
    {
      "testId": "test-116",
      "description": "D Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dm",
        "A7",
        "Dm"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.215Z"
    },
    {
      "testId": "test-117",
      "description": "D Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dm",
        "Bb",
        "C",
        "Dm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.216Z"
    },
    {
      "testId": "test-118",
      "description": "D Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Ddim",
        "Eb",
        "Abm",
        "Ddim"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "D Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.216Z"
    },
    {
      "testId": "test-119",
      "description": "D Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Ddim",
        "Eb",
        "Ddim"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "D Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.217Z"
    },
    {
      "testId": "test-120",
      "description": "D Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dm7b5",
        "Eb",
        "Dm7b5"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "D Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.217Z"
    },
    {
      "testId": "test-121",
      "description": "D Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ddim",
        "Eb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "D Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.218Z"
    },
    {
      "testId": "test-122",
      "description": "D Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Ddim",
        "A7",
        "Ddim"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.218Z"
    },
    {
      "testId": "test-123",
      "description": "D Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ddim",
        "Eb",
        "Abm",
        "Ddim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.218Z"
    },
    {
      "testId": "test-124",
      "description": "Eb Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Eb",
        "Ab",
        "Eb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Eb Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.219Z"
    },
    {
      "testId": "test-125",
      "description": "Eb Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ebmaj7",
        "Abmaj7",
        "Ebmaj7"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Eb Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.219Z"
    },
    {
      "testId": "test-126",
      "description": "Eb Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Eb",
        "Ab"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Eb Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.219Z"
    },
    {
      "testId": "test-127",
      "description": "Eb Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Eb",
        "Bb",
        "Eb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.220Z"
    },
    {
      "testId": "test-128",
      "description": "Eb Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Ebm",
        "Ab",
        "Db",
        "Ebm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Eb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.220Z"
    },
    {
      "testId": "test-129",
      "description": "Eb Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Ebm",
        "Ab",
        "Ebm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Eb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.224Z"
    },
    {
      "testId": "test-130",
      "description": "Eb Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ebm7",
        "Abmaj7",
        "Ebm7"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Eb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.225Z"
    },
    {
      "testId": "test-131",
      "description": "Eb Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ebm",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Eb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.225Z"
    },
    {
      "testId": "test-132",
      "description": "Eb Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Ebm",
        "Abm",
        "Ebm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.225Z"
    },
    {
      "testId": "test-133",
      "description": "Eb Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ebm",
        "Ab",
        "Db",
        "Ebm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.226Z"
    },
    {
      "testId": "test-134",
      "description": "Eb Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Ebm",
        "E",
        "Db",
        "Ebm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Eb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.251Z"
    },
    {
      "testId": "test-135",
      "description": "Eb Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Ebm",
        "E",
        "Ebm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Eb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.252Z"
    },
    {
      "testId": "test-136",
      "description": "Eb Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ebm7",
        "E",
        "Ebm7"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Eb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.252Z"
    },
    {
      "testId": "test-137",
      "description": "Eb Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ebm",
        "E"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Eb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.252Z"
    },
    {
      "testId": "test-138",
      "description": "Eb Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Ebm",
        "F",
        "Ebm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.253Z"
    },
    {
      "testId": "test-139",
      "description": "Eb Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ebm",
        "E",
        "Db",
        "Ebm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.253Z"
    },
    {
      "testId": "test-140",
      "description": "Eb Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "Eb",
        "F",
        "Bb",
        "Eb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Eb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.253Z"
    },
    {
      "testId": "test-141",
      "description": "Eb Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "Eb",
        "F",
        "Eb",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Eb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.254Z"
    },
    {
      "testId": "test-142",
      "description": "Eb Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "Eb",
        "F",
        "Eb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Eb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.258Z"
    },
    {
      "testId": "test-143",
      "description": "Eb Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ebmaj7",
        "F",
        "Ebmaj7"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Eb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.271Z"
    },
    {
      "testId": "test-144",
      "description": "Eb Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Eb",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Eb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.271Z"
    },
    {
      "testId": "test-145",
      "description": "Eb Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Eb",
        "Bb",
        "Eb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.272Z"
    },
    {
      "testId": "test-146",
      "description": "Eb Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Eb",
        "F",
        "Bb",
        "Eb"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.272Z"
    },
    {
      "testId": "test-147",
      "description": "Eb Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Eb",
        "Db",
        "Ab",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Eb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.273Z"
    },
    {
      "testId": "test-148",
      "description": "Eb Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "Eb",
        "Db",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Eb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.273Z"
    },
    {
      "testId": "test-149",
      "description": "Eb Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "Eb7",
        "Ab",
        "Eb7"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Eb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.273Z"
    },
    {
      "testId": "test-150",
      "description": "Eb Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Eb",
        "Ab"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Eb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.274Z"
    },
    {
      "testId": "test-151",
      "description": "Eb Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Eb",
        "Bb",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.274Z"
    },
    {
      "testId": "test-152",
      "description": "Eb Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Eb",
        "Db",
        "Ab",
        "Eb"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.275Z"
    },
    {
      "testId": "test-153",
      "description": "Eb Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Ebm",
        "Cb",
        "Db",
        "Ebm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Eb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.277Z"
    },
    {
      "testId": "test-154",
      "description": "Eb Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Ebm",
        "Db",
        "Ebm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Eb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.278Z"
    },
    {
      "testId": "test-155",
      "description": "Eb Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ebm7",
        "Cb",
        "Db",
        "Ebm7"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Eb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.279Z"
    },
    {
      "testId": "test-156",
      "description": "Eb Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ebm",
        "Db"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Eb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.279Z"
    },
    {
      "testId": "test-157",
      "description": "Eb Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Ebm",
        "Bb7",
        "Ebm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.280Z"
    },
    {
      "testId": "test-158",
      "description": "Eb Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ebm",
        "Cb",
        "Db",
        "Ebm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.280Z"
    },
    {
      "testId": "test-159",
      "description": "Eb Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Ebdim",
        "E",
        "Am",
        "Ebdim"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Eb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.280Z"
    },
    {
      "testId": "test-160",
      "description": "Eb Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Ebdim",
        "E",
        "Ebdim"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Eb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.281Z"
    },
    {
      "testId": "test-161",
      "description": "Eb Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ebm7b5",
        "E",
        "Ebm7b5"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Eb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.281Z"
    },
    {
      "testId": "test-162",
      "description": "Eb Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ebdim",
        "E"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Eb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.281Z"
    },
    {
      "testId": "test-163",
      "description": "Eb Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Ebdim",
        "Bb7",
        "Ebdim"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.282Z"
    },
    {
      "testId": "test-164",
      "description": "Eb Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ebdim",
        "E",
        "Am",
        "Ebdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.282Z"
    },
    {
      "testId": "test-165",
      "description": "E Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "A",
        "E"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "E Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.282Z"
    },
    {
      "testId": "test-166",
      "description": "E Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Emaj7",
        "Amaj7",
        "Emaj7"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "E Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.283Z"
    },
    {
      "testId": "test-167",
      "description": "E Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "E",
        "A"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "E Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.283Z"
    },
    {
      "testId": "test-168",
      "description": "E Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "E",
        "B",
        "E"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.283Z"
    },
    {
      "testId": "test-169",
      "description": "E Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "A",
        "D",
        "Em"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.284Z"
    },
    {
      "testId": "test-170",
      "description": "E Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "A",
        "Em"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.284Z"
    },
    {
      "testId": "test-171",
      "description": "E Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7",
        "Amaj7",
        "Em7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.284Z"
    },
    {
      "testId": "test-172",
      "description": "E Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Em",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.285Z"
    },
    {
      "testId": "test-173",
      "description": "E Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Em",
        "Am",
        "Em"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.285Z"
    },
    {
      "testId": "test-174",
      "description": "E Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Em",
        "A",
        "D",
        "Em"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.285Z"
    },
    {
      "testId": "test-175",
      "description": "E Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "F",
        "D",
        "Em"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.287Z"
    },
    {
      "testId": "test-176",
      "description": "E Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "F",
        "Em"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.287Z"
    },
    {
      "testId": "test-177",
      "description": "E Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7",
        "F",
        "Em7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.288Z"
    },
    {
      "testId": "test-178",
      "description": "E Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Em",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.288Z"
    },
    {
      "testId": "test-179",
      "description": "E Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Em",
        "F#",
        "Em"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.288Z"
    },
    {
      "testId": "test-180",
      "description": "E Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Em",
        "F",
        "D",
        "Em"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.289Z"
    },
    {
      "testId": "test-181",
      "description": "E Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "F#",
        "B",
        "E"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "E Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.289Z"
    },
    {
      "testId": "test-182",
      "description": "E Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "F#",
        "E",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "E Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.290Z"
    },
    {
      "testId": "test-183",
      "description": "E Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "F#",
        "E"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "E Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.290Z"
    },
    {
      "testId": "test-184",
      "description": "E Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Emaj7",
        "F#",
        "Emaj7"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "E Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.290Z"
    },
    {
      "testId": "test-185",
      "description": "E Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "E",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "E Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.291Z"
    },
    {
      "testId": "test-186",
      "description": "E Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "E",
        "B",
        "E"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.291Z"
    },
    {
      "testId": "test-187",
      "description": "E Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "E",
        "F#",
        "B",
        "E"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.291Z"
    },
    {
      "testId": "test-188",
      "description": "E Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "D",
        "A",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.292Z"
    },
    {
      "testId": "test-189",
      "description": "E Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.292Z"
    },
    {
      "testId": "test-190",
      "description": "E Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "E7",
        "A",
        "E7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.292Z"
    },
    {
      "testId": "test-191",
      "description": "E Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "E",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.293Z"
    },
    {
      "testId": "test-192",
      "description": "E Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "E",
        "B",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.293Z"
    },
    {
      "testId": "test-193",
      "description": "E Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "E",
        "D",
        "A",
        "E"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.293Z"
    },
    {
      "testId": "test-194",
      "description": "E Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "C",
        "D",
        "Em"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.294Z"
    },
    {
      "testId": "test-195",
      "description": "E Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "D",
        "Em"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.295Z"
    },
    {
      "testId": "test-196",
      "description": "E Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7",
        "C",
        "D",
        "Em7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.295Z"
    },
    {
      "testId": "test-197",
      "description": "E Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Em",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.296Z"
    },
    {
      "testId": "test-198",
      "description": "E Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Em",
        "B7",
        "Em"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.296Z"
    },
    {
      "testId": "test-199",
      "description": "E Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Em",
        "C",
        "D",
        "Em"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.296Z"
    },
    {
      "testId": "test-200",
      "description": "E Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Edim",
        "F",
        "Bbm",
        "Edim"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "E Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.297Z"
    },
    {
      "testId": "test-201",
      "description": "E Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Edim",
        "F",
        "Edim"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "E Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.297Z"
    },
    {
      "testId": "test-202",
      "description": "E Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7b5",
        "F",
        "Em7b5"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "E Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.298Z"
    },
    {
      "testId": "test-203",
      "description": "E Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Edim",
        "F"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "E Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.298Z"
    },
    {
      "testId": "test-204",
      "description": "E Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Edim",
        "B7",
        "Edim"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.298Z"
    },
    {
      "testId": "test-205",
      "description": "E Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Edim",
        "F",
        "Bbm",
        "Edim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.299Z"
    },
    {
      "testId": "test-206",
      "description": "F Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "Bb",
        "F"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "F Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.299Z"
    },
    {
      "testId": "test-207",
      "description": "F Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fmaj7",
        "Bbmaj7",
        "Fmaj7"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "F Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.299Z"
    },
    {
      "testId": "test-208",
      "description": "F Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F",
        "Bb"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "F Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.300Z"
    },
    {
      "testId": "test-209",
      "description": "F Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F",
        "C",
        "F"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.300Z"
    },
    {
      "testId": "test-210",
      "description": "F Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Fm",
        "Bb",
        "Eb",
        "Fm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "F Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.300Z"
    },
    {
      "testId": "test-211",
      "description": "F Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Fm",
        "Bb",
        "Fm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "F Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.301Z"
    },
    {
      "testId": "test-212",
      "description": "F Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fm7",
        "Bbmaj7",
        "Fm7"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "F Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.301Z"
    },
    {
      "testId": "test-213",
      "description": "F Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Fm",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "F Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.301Z"
    },
    {
      "testId": "test-214",
      "description": "F Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Fm",
        "Bbm",
        "Fm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.302Z"
    },
    {
      "testId": "test-215",
      "description": "F Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Fm",
        "Bb",
        "Eb",
        "Fm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.304Z"
    },
    {
      "testId": "test-216",
      "description": "F Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Fm",
        "Gb",
        "Eb",
        "Fm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.304Z"
    },
    {
      "testId": "test-217",
      "description": "F Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Fm",
        "Gb",
        "Fm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.305Z"
    },
    {
      "testId": "test-218",
      "description": "F Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fm7",
        "Gb",
        "Fm7"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.305Z"
    },
    {
      "testId": "test-219",
      "description": "F Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Fm",
        "Gb"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.305Z"
    },
    {
      "testId": "test-220",
      "description": "F Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Fm",
        "G",
        "Fm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.306Z"
    },
    {
      "testId": "test-221",
      "description": "F Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Fm",
        "Gb",
        "Eb",
        "Fm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.306Z"
    },
    {
      "testId": "test-222",
      "description": "F Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "G",
        "C",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.306Z"
    },
    {
      "testId": "test-223",
      "description": "F Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "G",
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.307Z"
    },
    {
      "testId": "test-224",
      "description": "F Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "G",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.307Z"
    },
    {
      "testId": "test-225",
      "description": "F Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fmaj7",
        "G",
        "Fmaj7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.308Z"
    },
    {
      "testId": "test-226",
      "description": "F Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.308Z"
    },
    {
      "testId": "test-227",
      "description": "F Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F",
        "C",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.308Z"
    },
    {
      "testId": "test-228",
      "description": "F Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F",
        "G",
        "C",
        "F"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.308Z"
    },
    {
      "testId": "test-229",
      "description": "F Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "Eb",
        "Bb",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "F Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.309Z"
    },
    {
      "testId": "test-230",
      "description": "F Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "Eb",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "F Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.309Z"
    },
    {
      "testId": "test-231",
      "description": "F Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "F7",
        "Bb",
        "F7"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "F Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.310Z"
    },
    {
      "testId": "test-232",
      "description": "F Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F",
        "Bb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "F Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.310Z"
    },
    {
      "testId": "test-233",
      "description": "F Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F",
        "C",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.310Z"
    },
    {
      "testId": "test-234",
      "description": "F Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F",
        "Eb",
        "Bb",
        "F"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.310Z"
    },
    {
      "testId": "test-235",
      "description": "F Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Fm",
        "Db",
        "Eb",
        "Fm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "F Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.311Z"
    },
    {
      "testId": "test-236",
      "description": "F Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Fm",
        "Eb",
        "Fm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "F Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.312Z"
    },
    {
      "testId": "test-237",
      "description": "F Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fm7",
        "Db",
        "Eb",
        "Fm7"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "F Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.313Z"
    },
    {
      "testId": "test-238",
      "description": "F Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Fm",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "F Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.313Z"
    },
    {
      "testId": "test-239",
      "description": "F Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Fm",
        "C7",
        "Fm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.313Z"
    },
    {
      "testId": "test-240",
      "description": "F Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Fm",
        "Db",
        "Eb",
        "Fm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.314Z"
    },
    {
      "testId": "test-241",
      "description": "F Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Fdim",
        "Gb",
        "Cbm",
        "Fdim"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "F Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.314Z"
    },
    {
      "testId": "test-242",
      "description": "F Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Fdim",
        "Gb",
        "Fdim"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "F Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.314Z"
    },
    {
      "testId": "test-243",
      "description": "F Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fm7b5",
        "Gb",
        "Fm7b5"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "F Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.315Z"
    },
    {
      "testId": "test-244",
      "description": "F Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Fdim",
        "Gb"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "F Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.315Z"
    },
    {
      "testId": "test-245",
      "description": "F Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Fdim",
        "C7",
        "Fdim"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.316Z"
    },
    {
      "testId": "test-246",
      "description": "F Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Fdim",
        "Gb",
        "Cbm",
        "Fdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.316Z"
    },
    {
      "testId": "test-247",
      "description": "F# Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "F#",
        "B",
        "F#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "F# Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.316Z"
    },
    {
      "testId": "test-248",
      "description": "F# Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#maj7",
        "Bmaj7",
        "F#maj7"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "F# Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.317Z"
    },
    {
      "testId": "test-249",
      "description": "F# Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#",
        "B"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "F# Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.317Z"
    },
    {
      "testId": "test-250",
      "description": "F# Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F#",
        "C#",
        "F#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.317Z"
    },
    {
      "testId": "test-251",
      "description": "F# Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "B",
        "E",
        "F#m"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "F# Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.317Z"
    },
    {
      "testId": "test-252",
      "description": "F# Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "B",
        "F#m"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "F# Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.318Z"
    },
    {
      "testId": "test-253",
      "description": "F# Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7",
        "Bmaj7",
        "F#m7"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "F# Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.318Z"
    },
    {
      "testId": "test-254",
      "description": "F# Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#m",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "F# Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.318Z"
    },
    {
      "testId": "test-255",
      "description": "F# Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "F#m",
        "Bm",
        "F#m"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.319Z"
    },
    {
      "testId": "test-256",
      "description": "F# Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#m",
        "B",
        "E",
        "F#m"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.319Z"
    },
    {
      "testId": "test-257",
      "description": "F# Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "G",
        "E",
        "F#m"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.321Z"
    },
    {
      "testId": "test-258",
      "description": "F# Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "G",
        "F#m"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.322Z"
    },
    {
      "testId": "test-259",
      "description": "F# Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7",
        "G",
        "F#m7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.322Z"
    },
    {
      "testId": "test-260",
      "description": "F# Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#m",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.322Z"
    },
    {
      "testId": "test-261",
      "description": "F# Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "F#m",
        "G#",
        "F#m"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.323Z"
    },
    {
      "testId": "test-262",
      "description": "F# Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#m",
        "G",
        "E",
        "F#m"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.323Z"
    },
    {
      "testId": "test-263",
      "description": "F# Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "F#",
        "Ab",
        "Db",
        "F#"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F# Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.324Z"
    },
    {
      "testId": "test-264",
      "description": "F# Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "F#",
        "Ab",
        "F#",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F# Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.324Z"
    },
    {
      "testId": "test-265",
      "description": "F# Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "F#",
        "Ab",
        "F#"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F# Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.324Z"
    },
    {
      "testId": "test-266",
      "description": "F# Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#maj7",
        "Ab",
        "F#maj7"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F# Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.325Z"
    },
    {
      "testId": "test-267",
      "description": "F# Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "F# Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.325Z"
    },
    {
      "testId": "test-268",
      "description": "F# Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F#",
        "Db",
        "F#"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.325Z"
    },
    {
      "testId": "test-269",
      "description": "F# Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#",
        "Ab",
        "Db",
        "F#"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.326Z"
    },
    {
      "testId": "test-270",
      "description": "F# Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "F#",
        "E",
        "B",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "F# Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.326Z"
    },
    {
      "testId": "test-271",
      "description": "F# Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "F#",
        "E",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "F# Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.326Z"
    },
    {
      "testId": "test-272",
      "description": "F# Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#7",
        "B",
        "F#7"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "F# Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.327Z"
    },
    {
      "testId": "test-273",
      "description": "F# Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#",
        "B"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "F# Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.327Z"
    },
    {
      "testId": "test-274",
      "description": "F# Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F#",
        "C#",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.327Z"
    },
    {
      "testId": "test-275",
      "description": "F# Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#",
        "E",
        "B",
        "F#"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.328Z"
    },
    {
      "testId": "test-276",
      "description": "F# Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "D",
        "E",
        "F#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.328Z"
    },
    {
      "testId": "test-277",
      "description": "F# Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "E",
        "F#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.329Z"
    },
    {
      "testId": "test-278",
      "description": "F# Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7",
        "D",
        "E",
        "F#m7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.330Z"
    },
    {
      "testId": "test-279",
      "description": "F# Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#m",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.330Z"
    },
    {
      "testId": "test-280",
      "description": "F# Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "F#m",
        "C#7",
        "F#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.330Z"
    },
    {
      "testId": "test-281",
      "description": "F# Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#m",
        "D",
        "E",
        "F#m"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.331Z"
    },
    {
      "testId": "test-282",
      "description": "F# Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "F#dim",
        "G",
        "Cm",
        "F#dim"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.331Z"
    },
    {
      "testId": "test-283",
      "description": "F# Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "F#dim",
        "G",
        "F#dim"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.332Z"
    },
    {
      "testId": "test-284",
      "description": "F# Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7b5",
        "G",
        "F#m7b5"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.332Z"
    },
    {
      "testId": "test-285",
      "description": "F# Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#dim",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.332Z"
    },
    {
      "testId": "test-286",
      "description": "F# Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "F#dim",
        "C#7",
        "F#dim"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.333Z"
    },
    {
      "testId": "test-287",
      "description": "F# Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#dim",
        "G",
        "Cm",
        "F#dim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.333Z"
    },
    {
      "testId": "test-288",
      "description": "G Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "C",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "G Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.333Z"
    },
    {
      "testId": "test-289",
      "description": "G Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gmaj7",
        "Cmaj7",
        "Gmaj7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "G Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.334Z"
    },
    {
      "testId": "test-290",
      "description": "G Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "G Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.334Z"
    },
    {
      "testId": "test-291",
      "description": "G Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "G",
        "D",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.334Z"
    },
    {
      "testId": "test-292",
      "description": "G Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Gm",
        "C",
        "F",
        "Gm"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "G Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.334Z"
    },
    {
      "testId": "test-293",
      "description": "G Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Gm",
        "C",
        "Gm"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "G Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.335Z"
    },
    {
      "testId": "test-294",
      "description": "G Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gm7",
        "Cmaj7",
        "Gm7"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "G Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.335Z"
    },
    {
      "testId": "test-295",
      "description": "G Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Gm",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "G Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.336Z"
    },
    {
      "testId": "test-296",
      "description": "G Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Gm",
        "Cm",
        "Gm"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.336Z"
    },
    {
      "testId": "test-297",
      "description": "G Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Gm",
        "C",
        "F",
        "Gm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.336Z"
    },
    {
      "testId": "test-298",
      "description": "G Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Gm",
        "Ab",
        "F",
        "Gm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "G Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.339Z"
    },
    {
      "testId": "test-299",
      "description": "G Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Gm",
        "Ab",
        "Gm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "G Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.343Z"
    },
    {
      "testId": "test-300",
      "description": "G Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gm7",
        "Ab",
        "Gm7"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "G Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.343Z"
    },
    {
      "testId": "test-301",
      "description": "G Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Gm",
        "Ab"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "G Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.343Z"
    },
    {
      "testId": "test-302",
      "description": "G Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Gm",
        "A",
        "Gm"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.344Z"
    },
    {
      "testId": "test-303",
      "description": "G Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Gm",
        "Ab",
        "F",
        "Gm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.344Z"
    },
    {
      "testId": "test-304",
      "description": "G Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "A",
        "D",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.345Z"
    },
    {
      "testId": "test-305",
      "description": "G Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "A",
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.345Z"
    },
    {
      "testId": "test-306",
      "description": "G Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "A",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.345Z"
    },
    {
      "testId": "test-307",
      "description": "G Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gmaj7",
        "A",
        "Gmaj7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.346Z"
    },
    {
      "testId": "test-308",
      "description": "G Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.346Z"
    },
    {
      "testId": "test-309",
      "description": "G Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "G",
        "D",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.346Z"
    },
    {
      "testId": "test-310",
      "description": "G Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "G",
        "A",
        "D",
        "G"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.347Z"
    },
    {
      "testId": "test-311",
      "description": "G Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "F",
        "C",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.348Z"
    },
    {
      "testId": "test-312",
      "description": "G Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.348Z"
    },
    {
      "testId": "test-313",
      "description": "G Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "G7",
        "C",
        "G7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.349Z"
    },
    {
      "testId": "test-314",
      "description": "G Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.349Z"
    },
    {
      "testId": "test-315",
      "description": "G Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "G",
        "D",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.349Z"
    },
    {
      "testId": "test-316",
      "description": "G Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "G",
        "F",
        "C",
        "G"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.350Z"
    },
    {
      "testId": "test-317",
      "description": "G Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Gm",
        "Eb",
        "F",
        "Gm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "G Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.350Z"
    },
    {
      "testId": "test-318",
      "description": "G Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Gm",
        "F",
        "Gm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "G Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.351Z"
    },
    {
      "testId": "test-319",
      "description": "G Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gm7",
        "Eb",
        "F",
        "Gm7"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "G Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.352Z"
    },
    {
      "testId": "test-320",
      "description": "G Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Gm",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "G Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.352Z"
    },
    {
      "testId": "test-321",
      "description": "G Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Gm",
        "D7",
        "Gm"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.353Z"
    },
    {
      "testId": "test-322",
      "description": "G Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Gm",
        "Eb",
        "F",
        "Gm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.353Z"
    },
    {
      "testId": "test-323",
      "description": "G Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Gdim",
        "Ab",
        "Dbm",
        "Gdim"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "G Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.353Z"
    },
    {
      "testId": "test-324",
      "description": "G Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Gdim",
        "Ab",
        "Gdim"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "G Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.354Z"
    },
    {
      "testId": "test-325",
      "description": "G Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gm7b5",
        "Ab",
        "Gm7b5"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "G Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.354Z"
    },
    {
      "testId": "test-326",
      "description": "G Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Gdim",
        "Ab"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "G Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.354Z"
    },
    {
      "testId": "test-327",
      "description": "G Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Gdim",
        "D7",
        "Gdim"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.355Z"
    },
    {
      "testId": "test-328",
      "description": "G Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Gdim",
        "Ab",
        "Dbm",
        "Gdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.355Z"
    },
    {
      "testId": "test-329",
      "description": "Ab Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Ab",
        "Db",
        "Ab"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Ab Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.355Z"
    },
    {
      "testId": "test-330",
      "description": "Ab Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Abmaj7",
        "Dbmaj7",
        "Abmaj7"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Ab Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.356Z"
    },
    {
      "testId": "test-331",
      "description": "Ab Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ab",
        "Db"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Ab Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.356Z"
    },
    {
      "testId": "test-332",
      "description": "Ab Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Ab",
        "Eb",
        "Ab"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.356Z"
    },
    {
      "testId": "test-333",
      "description": "Ab Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Abm",
        "Db",
        "Gb",
        "Abm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Ab Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.356Z"
    },
    {
      "testId": "test-334",
      "description": "Ab Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Abm",
        "Db",
        "Abm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Ab Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.357Z"
    },
    {
      "testId": "test-335",
      "description": "Ab Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Abm7",
        "Dbmaj7",
        "Abm7"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Ab Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.357Z"
    },
    {
      "testId": "test-336",
      "description": "Ab Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Abm",
        "Db"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Ab Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.358Z"
    },
    {
      "testId": "test-337",
      "description": "Ab Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Abm",
        "Dbm",
        "Abm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.358Z"
    },
    {
      "testId": "test-338",
      "description": "Ab Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Abm",
        "Db",
        "Gb",
        "Abm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.359Z"
    },
    {
      "testId": "test-339",
      "description": "Ab Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Abm",
        "A",
        "Gb",
        "Abm"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Ab Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.360Z"
    },
    {
      "testId": "test-340",
      "description": "Ab Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Abm",
        "A",
        "Abm"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Ab Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.360Z"
    },
    {
      "testId": "test-341",
      "description": "Ab Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Abm7",
        "A",
        "Abm7"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Ab Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.361Z"
    },
    {
      "testId": "test-342",
      "description": "Ab Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Abm",
        "A"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "Ab Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.361Z"
    },
    {
      "testId": "test-343",
      "description": "Ab Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Abm",
        "Bb",
        "Abm"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.361Z"
    },
    {
      "testId": "test-344",
      "description": "Ab Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Abm",
        "A",
        "Gb",
        "Abm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.362Z"
    },
    {
      "testId": "test-345",
      "description": "Ab Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "Ab",
        "Bb",
        "Eb",
        "Ab"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Ab Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.362Z"
    },
    {
      "testId": "test-346",
      "description": "Ab Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "Ab",
        "Bb",
        "Ab",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Ab Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.363Z"
    },
    {
      "testId": "test-347",
      "description": "Ab Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "Ab",
        "Bb",
        "Ab"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Ab Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.364Z"
    },
    {
      "testId": "test-348",
      "description": "Ab Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Abmaj7",
        "Bb",
        "Abmaj7"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Ab Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.364Z"
    },
    {
      "testId": "test-349",
      "description": "Ab Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ab",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Ab Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.364Z"
    },
    {
      "testId": "test-350",
      "description": "Ab Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Ab",
        "Eb",
        "Ab"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.365Z"
    },
    {
      "testId": "test-351",
      "description": "Ab Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ab",
        "Bb",
        "Eb",
        "Ab"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.365Z"
    },
    {
      "testId": "test-352",
      "description": "Ab Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Ab",
        "Gb",
        "Db",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Ab Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.365Z"
    },
    {
      "testId": "test-353",
      "description": "Ab Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "Ab",
        "Gb",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Ab Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.366Z"
    },
    {
      "testId": "test-354",
      "description": "Ab Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "Ab7",
        "Db",
        "Ab7"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Ab Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.366Z"
    },
    {
      "testId": "test-355",
      "description": "Ab Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Ab",
        "Db"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Ab Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.366Z"
    },
    {
      "testId": "test-356",
      "description": "Ab Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Ab",
        "Eb",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.367Z"
    },
    {
      "testId": "test-357",
      "description": "Ab Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Ab",
        "Gb",
        "Db",
        "Ab"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.367Z"
    },
    {
      "testId": "test-358",
      "description": "Ab Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Abm",
        "E",
        "Gb",
        "Abm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Ab Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.374Z"
    },
    {
      "testId": "test-359",
      "description": "Ab Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Abm",
        "Gb",
        "Abm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Ab Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.374Z"
    },
    {
      "testId": "test-360",
      "description": "Ab Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Abm7",
        "E",
        "Gb",
        "Abm7"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Ab Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.375Z"
    },
    {
      "testId": "test-361",
      "description": "Ab Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Abm",
        "Gb"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Ab Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.375Z"
    },
    {
      "testId": "test-362",
      "description": "Ab Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Abm",
        "Eb7",
        "Abm"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.376Z"
    },
    {
      "testId": "test-363",
      "description": "Ab Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Abm",
        "E",
        "Gb",
        "Abm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.378Z"
    },
    {
      "testId": "test-364",
      "description": "Ab Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Abdim",
        "A",
        "Dm",
        "Abdim"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Ab Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.379Z"
    },
    {
      "testId": "test-365",
      "description": "Ab Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Abdim",
        "A",
        "Abdim"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Ab Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.381Z"
    },
    {
      "testId": "test-366",
      "description": "Ab Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Abm7b5",
        "A",
        "Abm7b5"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Ab Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.382Z"
    },
    {
      "testId": "test-367",
      "description": "Ab Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Abdim",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "Ab Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.383Z"
    },
    {
      "testId": "test-368",
      "description": "Ab Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Abdim",
        "Eb7",
        "Abdim"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.384Z"
    },
    {
      "testId": "test-369",
      "description": "Ab Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Abdim",
        "A",
        "Dm",
        "Abdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.384Z"
    },
    {
      "testId": "test-370",
      "description": "A Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "D",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "A Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.385Z"
    },
    {
      "testId": "test-371",
      "description": "A Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Amaj7",
        "Dmaj7",
        "Amaj7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "A Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.385Z"
    },
    {
      "testId": "test-372",
      "description": "A Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "A",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "A Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.385Z"
    },
    {
      "testId": "test-373",
      "description": "A Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "A",
        "E",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.385Z"
    },
    {
      "testId": "test-374",
      "description": "A Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "D",
        "G",
        "Am"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.386Z"
    },
    {
      "testId": "test-375",
      "description": "A Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "D",
        "Am"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.386Z"
    },
    {
      "testId": "test-376",
      "description": "A Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Am7",
        "Dmaj7",
        "Am7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.386Z"
    },
    {
      "testId": "test-377",
      "description": "A Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Am",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.387Z"
    },
    {
      "testId": "test-378",
      "description": "A Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Am",
        "Dm",
        "Am"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.387Z"
    },
    {
      "testId": "test-379",
      "description": "A Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Am",
        "D",
        "G",
        "Am"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.389Z"
    },
    {
      "testId": "test-380",
      "description": "A Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "Bb",
        "G",
        "Am"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "A Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.390Z"
    },
    {
      "testId": "test-381",
      "description": "A Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "Bb",
        "Am"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "A Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.391Z"
    },
    {
      "testId": "test-382",
      "description": "A Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Am7",
        "Bb",
        "Am7"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "A Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.391Z"
    },
    {
      "testId": "test-383",
      "description": "A Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Am",
        "Bb"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "A Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.392Z"
    },
    {
      "testId": "test-384",
      "description": "A Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Am",
        "B",
        "Am"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.392Z"
    },
    {
      "testId": "test-385",
      "description": "A Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Am",
        "Bb",
        "G",
        "Am"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.392Z"
    },
    {
      "testId": "test-386",
      "description": "A Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "B",
        "E",
        "A"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "A Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.393Z"
    },
    {
      "testId": "test-387",
      "description": "A Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "B",
        "A",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "A Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.393Z"
    },
    {
      "testId": "test-388",
      "description": "A Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "B",
        "A"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "A Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.393Z"
    },
    {
      "testId": "test-389",
      "description": "A Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Amaj7",
        "B",
        "Amaj7"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "A Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.394Z"
    },
    {
      "testId": "test-390",
      "description": "A Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "A",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "A Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.394Z"
    },
    {
      "testId": "test-391",
      "description": "A Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "A",
        "E",
        "A"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.394Z"
    },
    {
      "testId": "test-392",
      "description": "A Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "A",
        "B",
        "E",
        "A"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.395Z"
    },
    {
      "testId": "test-393",
      "description": "A Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "G",
        "D",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.395Z"
    },
    {
      "testId": "test-394",
      "description": "A Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.395Z"
    },
    {
      "testId": "test-395",
      "description": "A Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "A7",
        "D",
        "A7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.396Z"
    },
    {
      "testId": "test-396",
      "description": "A Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "A",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.396Z"
    },
    {
      "testId": "test-397",
      "description": "A Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "A",
        "E",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.396Z"
    },
    {
      "testId": "test-398",
      "description": "A Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "A",
        "G",
        "D",
        "A"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.396Z"
    },
    {
      "testId": "test-399",
      "description": "A Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "F",
        "G",
        "Am"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.398Z"
    },
    {
      "testId": "test-400",
      "description": "A Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "G",
        "Am"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.399Z"
    },
    {
      "testId": "test-401",
      "description": "A Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Am7",
        "F",
        "G",
        "Am7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.399Z"
    },
    {
      "testId": "test-402",
      "description": "A Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Am",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.400Z"
    },
    {
      "testId": "test-403",
      "description": "A Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Am",
        "E7",
        "Am"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.400Z"
    },
    {
      "testId": "test-404",
      "description": "A Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Am",
        "F",
        "G",
        "Am"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.400Z"
    },
    {
      "testId": "test-405",
      "description": "A Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Adim",
        "Bb",
        "Ebm",
        "Adim"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "A Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.400Z"
    },
    {
      "testId": "test-406",
      "description": "A Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Adim",
        "Bb",
        "Adim"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "A Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.401Z"
    },
    {
      "testId": "test-407",
      "description": "A Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Am7b5",
        "Bb",
        "Am7b5"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "A Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.401Z"
    },
    {
      "testId": "test-408",
      "description": "A Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Adim",
        "Bb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "A Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.401Z"
    },
    {
      "testId": "test-409",
      "description": "A Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Adim",
        "E7",
        "Adim"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.402Z"
    },
    {
      "testId": "test-410",
      "description": "A Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Adim",
        "Bb",
        "Ebm",
        "Adim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.402Z"
    },
    {
      "testId": "test-411",
      "description": "Bb Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Bb",
        "Eb",
        "Bb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Bb Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.402Z"
    },
    {
      "testId": "test-412",
      "description": "Bb Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bbmaj7",
        "Ebmaj7",
        "Bbmaj7"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Bb Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.403Z"
    },
    {
      "testId": "test-413",
      "description": "Bb Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bb",
        "Eb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": true,
        "mode": "Bb Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.403Z"
    },
    {
      "testId": "test-414",
      "description": "Bb Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Bb",
        "F",
        "Bb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.403Z"
    },
    {
      "testId": "test-415",
      "description": "Bb Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bbm",
        "Eb",
        "Ab",
        "Bbm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Bb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.404Z"
    },
    {
      "testId": "test-416",
      "description": "Bb Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Bbm",
        "Eb",
        "Bbm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Bb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.404Z"
    },
    {
      "testId": "test-417",
      "description": "Bb Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bbm7",
        "Ebmaj7",
        "Bbm7"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Bb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.404Z"
    },
    {
      "testId": "test-418",
      "description": "Bb Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bbm",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": true,
        "mode": "Bb Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.405Z"
    },
    {
      "testId": "test-419",
      "description": "Bb Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bbm",
        "Ebm",
        "Bbm"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.405Z"
    },
    {
      "testId": "test-420",
      "description": "Bb Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bbm",
        "Eb",
        "Ab",
        "Bbm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.405Z"
    },
    {
      "testId": "test-421",
      "description": "Bb Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bbm",
        "Cb",
        "Ab",
        "Bbm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Bb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.407Z"
    },
    {
      "testId": "test-422",
      "description": "Bb Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bbm",
        "Cb",
        "Bbm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Bb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.408Z"
    },
    {
      "testId": "test-423",
      "description": "Bb Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bbm7",
        "Cb",
        "Bbm7"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Bb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.410Z"
    },
    {
      "testId": "test-424",
      "description": "Bb Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bbm",
        "Cb"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": true,
        "mode": "Bb Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.411Z"
    },
    {
      "testId": "test-425",
      "description": "Bb Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bbm",
        "C",
        "Bbm"
      ],
      "parentKey": "Gb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.412Z"
    },
    {
      "testId": "test-426",
      "description": "Bb Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bbm",
        "Cb",
        "Ab",
        "Bbm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.414Z"
    },
    {
      "testId": "test-427",
      "description": "Bb Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "Bb",
        "C",
        "F",
        "Bb"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "Bb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.414Z"
    },
    {
      "testId": "test-428",
      "description": "Bb Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "Bb",
        "C",
        "Bb",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "Bb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.415Z"
    },
    {
      "testId": "test-429",
      "description": "Bb Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "Bb",
        "C",
        "Bb"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "Bb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.417Z"
    },
    {
      "testId": "test-430",
      "description": "Bb Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bbmaj7",
        "C",
        "Bbmaj7"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "Bb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.418Z"
    },
    {
      "testId": "test-431",
      "description": "Bb Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bb",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "Bb Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.419Z"
    },
    {
      "testId": "test-432",
      "description": "Bb Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Bb",
        "F",
        "Bb"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.419Z"
    },
    {
      "testId": "test-433",
      "description": "Bb Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bb",
        "C",
        "F",
        "Bb"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.422Z"
    },
    {
      "testId": "test-434",
      "description": "Bb Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "Bb",
        "Ab",
        "Eb",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Bb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.424Z"
    },
    {
      "testId": "test-435",
      "description": "Bb Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "Bb",
        "Ab",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Bb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.424Z"
    },
    {
      "testId": "test-436",
      "description": "Bb Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bb7",
        "Eb",
        "Bb7"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Bb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.425Z"
    },
    {
      "testId": "test-437",
      "description": "Bb Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bb",
        "Eb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": true,
        "mode": "Bb Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.426Z"
    },
    {
      "testId": "test-438",
      "description": "Bb Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "Bb",
        "F",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.426Z"
    },
    {
      "testId": "test-439",
      "description": "Bb Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bb",
        "Ab",
        "Eb",
        "Bb"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.437Z"
    },
    {
      "testId": "test-440",
      "description": "Bb Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bbm",
        "Gb",
        "Ab",
        "Bbm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Bb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.438Z"
    },
    {
      "testId": "test-441",
      "description": "Bb Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bbm",
        "Ab",
        "Bbm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Bb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.438Z"
    },
    {
      "testId": "test-442",
      "description": "Bb Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bbm7",
        "Gb",
        "Ab",
        "Bbm7"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Bb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.439Z"
    },
    {
      "testId": "test-443",
      "description": "Bb Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bbm",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": true,
        "mode": "Bb Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.439Z"
    },
    {
      "testId": "test-444",
      "description": "Bb Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bbm",
        "F7",
        "Bbm"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.440Z"
    },
    {
      "testId": "test-445",
      "description": "Bb Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bbm",
        "Gb",
        "Ab",
        "Bbm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.440Z"
    },
    {
      "testId": "test-446",
      "description": "Bb Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Bbdim",
        "B",
        "Em",
        "Bbdim"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Bb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.440Z"
    },
    {
      "testId": "test-447",
      "description": "Bb Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Bbdim",
        "B",
        "Bbdim"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Bb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.441Z"
    },
    {
      "testId": "test-448",
      "description": "Bb Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bbm7b5",
        "B",
        "Bbm7b5"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Bb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.441Z"
    },
    {
      "testId": "test-449",
      "description": "Bb Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bbdim",
        "B"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "Bb Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.441Z"
    },
    {
      "testId": "test-450",
      "description": "Bb Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Bbdim",
        "F7",
        "Bbdim"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.441Z"
    },
    {
      "testId": "test-451",
      "description": "Bb Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bbdim",
        "B",
        "Em",
        "Bbdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.442Z"
    },
    {
      "testId": "test-452",
      "description": "B Ionian I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "B",
        "E",
        "B"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "B Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.442Z"
    },
    {
      "testId": "test-453",
      "description": "B Ionian Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bmaj7",
        "Emaj7",
        "Bmaj7"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "B Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.443Z"
    },
    {
      "testId": "test-454",
      "description": "B Ionian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "B",
        "E"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": true,
        "mode": "B Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.443Z"
    },
    {
      "testId": "test-455",
      "description": "B Ionian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "B",
        "F#",
        "B"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.443Z"
    },
    {
      "testId": "test-456",
      "description": "B Dorian i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "E",
        "A",
        "Bm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.443Z"
    },
    {
      "testId": "test-457",
      "description": "B Dorian i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "E",
        "Bm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.444Z"
    },
    {
      "testId": "test-458",
      "description": "B Dorian i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7",
        "Emaj7",
        "Bm7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.444Z"
    },
    {
      "testId": "test-459",
      "description": "B Dorian i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bm",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.444Z"
    },
    {
      "testId": "test-460",
      "description": "B Dorian i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bm",
        "Em",
        "Bm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.445Z"
    },
    {
      "testId": "test-461",
      "description": "B Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bm",
        "E",
        "A",
        "Bm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.448Z"
    },
    {
      "testId": "test-462",
      "description": "B Phrygian i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "C",
        "A",
        "Bm"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.449Z"
    },
    {
      "testId": "test-463",
      "description": "B Phrygian i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "C",
        "Bm"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.450Z"
    },
    {
      "testId": "test-464",
      "description": "B Phrygian i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7",
        "C",
        "Bm7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.450Z"
    },
    {
      "testId": "test-465",
      "description": "B Phrygian i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bm",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.451Z"
    },
    {
      "testId": "test-466",
      "description": "B Phrygian i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bm",
        "C#",
        "Bm"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.451Z"
    },
    {
      "testId": "test-467",
      "description": "B Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bm",
        "C",
        "A",
        "Bm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.451Z"
    },
    {
      "testId": "test-468",
      "description": "B Lydian I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "B",
        "C#",
        "F#",
        "B"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "B Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.452Z"
    },
    {
      "testId": "test-469",
      "description": "B Lydian I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "B",
        "C#",
        "B",
        "C#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "B Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.452Z"
    },
    {
      "testId": "test-470",
      "description": "B Lydian I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "B",
        "C#",
        "B"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "B Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.452Z"
    },
    {
      "testId": "test-471",
      "description": "B Lydian Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bmaj7",
        "C#",
        "Bmaj7"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "B Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.453Z"
    },
    {
      "testId": "test-472",
      "description": "B Lydian I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "B",
        "C#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": true,
        "mode": "B Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.453Z"
    },
    {
      "testId": "test-473",
      "description": "B Lydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "B",
        "F#",
        "B"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.453Z"
    },
    {
      "testId": "test-474",
      "description": "B Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "B",
        "C#",
        "F#",
        "B"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.454Z"
    },
    {
      "testId": "test-475",
      "description": "B Mixolydian I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "B",
        "A",
        "E",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "B Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.454Z"
    },
    {
      "testId": "test-476",
      "description": "B Mixolydian I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "B",
        "A",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "B Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.454Z"
    },
    {
      "testId": "test-477",
      "description": "B Mixolydian I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "B7",
        "E",
        "B7"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "B Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.455Z"
    },
    {
      "testId": "test-478",
      "description": "B Mixolydian I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "B",
        "E"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": true,
        "mode": "B Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.455Z"
    },
    {
      "testId": "test-479",
      "description": "B Mixolydian I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "B",
        "F#",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.455Z"
    },
    {
      "testId": "test-480",
      "description": "B Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "B",
        "A",
        "E",
        "B"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.456Z"
    },
    {
      "testId": "test-481",
      "description": "B Aeolian i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "G",
        "A",
        "Bm"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.457Z"
    },
    {
      "testId": "test-482",
      "description": "B Aeolian i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "A",
        "Bm"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.458Z"
    },
    {
      "testId": "test-483",
      "description": "B Aeolian i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7",
        "G",
        "A",
        "Bm7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.458Z"
    },
    {
      "testId": "test-484",
      "description": "B Aeolian i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bm",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.459Z"
    },
    {
      "testId": "test-485",
      "description": "B Aeolian i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bm",
        "F#7",
        "Bm"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.459Z"
    },
    {
      "testId": "test-486",
      "description": "B Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bm",
        "G",
        "A",
        "Bm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.459Z"
    },
    {
      "testId": "test-487",
      "description": "B Locrian i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Bdim",
        "C",
        "Fm",
        "Bdim"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.460Z"
    },
    {
      "testId": "test-488",
      "description": "B Locrian i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Bdim",
        "C",
        "Bdim"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.460Z"
    },
    {
      "testId": "test-489",
      "description": "B Locrian iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7b5",
        "C",
        "Bm7b5"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.460Z"
    },
    {
      "testId": "test-490",
      "description": "B Locrian i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bdim",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.461Z"
    },
    {
      "testId": "test-491",
      "description": "B Locrian i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Bdim",
        "F#7",
        "Bdim"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.461Z"
    },
    {
      "testId": "test-492",
      "description": "B Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bdim",
        "C",
        "Fm",
        "Bdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.461Z"
    },
    {
      "testId": "test-493",
      "description": "C major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "C",
        "F",
        "G",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.462Z"
    },
    {
      "testId": "test-494",
      "description": "C major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "C",
        "A",
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.462Z"
    },
    {
      "testId": "test-495",
      "description": "C major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "A",
        "F",
        "C",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.462Z"
    },
    {
      "testId": "test-496",
      "description": "C major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "D",
        "G",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.463Z"
    },
    {
      "testId": "test-497",
      "description": "C major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "C",
        "G",
        "A",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.463Z"
    },
    {
      "testId": "test-498",
      "description": "Db major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "Db",
        "Gb",
        "Ab",
        "Db"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.463Z"
    },
    {
      "testId": "test-499",
      "description": "Db major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "Db",
        "Bb",
        "Gb",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.464Z"
    },
    {
      "testId": "test-500",
      "description": "Db major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "Bb",
        "Gb",
        "Db",
        "Ab"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.465Z"
    },
    {
      "testId": "test-501",
      "description": "Db major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "Eb",
        "Ab",
        "Db"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.466Z"
    },
    {
      "testId": "test-502",
      "description": "Db major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "Db",
        "Ab",
        "Bb",
        "Gb"
      ],
      "parentKey": "Db major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.468Z"
    },
    {
      "testId": "test-503",
      "description": "D major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "D",
        "G",
        "A",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.469Z"
    },
    {
      "testId": "test-504",
      "description": "D major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "D",
        "B",
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.469Z"
    },
    {
      "testId": "test-505",
      "description": "D major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "B",
        "G",
        "D",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.470Z"
    },
    {
      "testId": "test-506",
      "description": "D major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "E",
        "A",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.470Z"
    },
    {
      "testId": "test-507",
      "description": "D major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "D",
        "A",
        "B",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.470Z"
    },
    {
      "testId": "test-508",
      "description": "Eb major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "Eb",
        "Ab",
        "Bb",
        "Eb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.473Z"
    },
    {
      "testId": "test-509",
      "description": "Eb major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "Eb",
        "C",
        "Ab",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.474Z"
    },
    {
      "testId": "test-510",
      "description": "Eb major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "C",
        "Ab",
        "Eb",
        "Bb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.474Z"
    },
    {
      "testId": "test-511",
      "description": "Eb major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "F",
        "Bb",
        "Eb"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.474Z"
    },
    {
      "testId": "test-512",
      "description": "Eb major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "Eb",
        "Bb",
        "C",
        "Ab"
      ],
      "parentKey": "Eb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.475Z"
    },
    {
      "testId": "test-513",
      "description": "E major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "E",
        "A",
        "B",
        "E"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.475Z"
    },
    {
      "testId": "test-514",
      "description": "E major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "E",
        "C#",
        "A",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.475Z"
    },
    {
      "testId": "test-515",
      "description": "E major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "C#",
        "A",
        "E",
        "B"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.476Z"
    },
    {
      "testId": "test-516",
      "description": "E major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "F#",
        "B",
        "E"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.476Z"
    },
    {
      "testId": "test-517",
      "description": "E major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "E",
        "B",
        "C#",
        "A"
      ],
      "parentKey": "E major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.477Z"
    },
    {
      "testId": "test-518",
      "description": "F major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "F",
        "Bb",
        "C",
        "F"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.477Z"
    },
    {
      "testId": "test-519",
      "description": "F major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "F",
        "D",
        "Bb",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.480Z"
    },
    {
      "testId": "test-520",
      "description": "F major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "D",
        "Bb",
        "F",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.480Z"
    },
    {
      "testId": "test-521",
      "description": "F major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "G",
        "C",
        "F"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.482Z"
    },
    {
      "testId": "test-522",
      "description": "F major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "F",
        "C",
        "D",
        "Bb"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.482Z"
    },
    {
      "testId": "test-523",
      "description": "F# major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "F#",
        "B",
        "C#",
        "F#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.483Z"
    },
    {
      "testId": "test-524",
      "description": "F# major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "F#",
        "D#",
        "B",
        "C#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.484Z"
    },
    {
      "testId": "test-525",
      "description": "F# major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "D#",
        "B",
        "F#",
        "C#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.485Z"
    },
    {
      "testId": "test-526",
      "description": "F# major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "G#",
        "C#",
        "F#"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.487Z"
    },
    {
      "testId": "test-527",
      "description": "F# major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "F#",
        "C#",
        "D#",
        "B"
      ],
      "parentKey": "F# major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.490Z"
    },
    {
      "testId": "test-528",
      "description": "G major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "G",
        "C",
        "D",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.490Z"
    },
    {
      "testId": "test-529",
      "description": "G major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "G",
        "E",
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.491Z"
    },
    {
      "testId": "test-530",
      "description": "G major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "E",
        "C",
        "G",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.491Z"
    },
    {
      "testId": "test-531",
      "description": "G major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "A",
        "D",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.492Z"
    },
    {
      "testId": "test-532",
      "description": "G major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "G",
        "D",
        "E",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.492Z"
    },
    {
      "testId": "test-533",
      "description": "Ab major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "Ab",
        "Db",
        "Eb",
        "Ab"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.492Z"
    },
    {
      "testId": "test-534",
      "description": "Ab major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "Ab",
        "F",
        "Db",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.492Z"
    },
    {
      "testId": "test-535",
      "description": "Ab major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "F",
        "Db",
        "Ab",
        "Eb"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.493Z"
    },
    {
      "testId": "test-536",
      "description": "Ab major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "Bb",
        "Eb",
        "Ab"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.493Z"
    },
    {
      "testId": "test-537",
      "description": "Ab major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "Ab",
        "Eb",
        "F",
        "Db"
      ],
      "parentKey": "Ab major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.494Z"
    },
    {
      "testId": "test-538",
      "description": "A major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "A",
        "D",
        "E",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.495Z"
    },
    {
      "testId": "test-539",
      "description": "A major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "A",
        "F#",
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.496Z"
    },
    {
      "testId": "test-540",
      "description": "A major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "F#",
        "D",
        "A",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.496Z"
    },
    {
      "testId": "test-541",
      "description": "A major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "B",
        "E",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.496Z"
    },
    {
      "testId": "test-542",
      "description": "A major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "A",
        "E",
        "F#",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.497Z"
    },
    {
      "testId": "test-543",
      "description": "Bb major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "Bb",
        "Eb",
        "F",
        "Bb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.497Z"
    },
    {
      "testId": "test-544",
      "description": "Bb major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "Bb",
        "G",
        "Eb",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.497Z"
    },
    {
      "testId": "test-545",
      "description": "Bb major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "G",
        "Eb",
        "Bb",
        "F"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.498Z"
    },
    {
      "testId": "test-546",
      "description": "Bb major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "C",
        "F",
        "Bb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.498Z"
    },
    {
      "testId": "test-547",
      "description": "Bb major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "Bb",
        "F",
        "G",
        "Eb"
      ],
      "parentKey": "Bb major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.498Z"
    },
    {
      "testId": "test-548",
      "description": "B major I-IV-V-I functional",
      "category": "functional_clear",
      "chords": [
        "B",
        "E",
        "F#",
        "B"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.499Z"
    },
    {
      "testId": "test-549",
      "description": "B major I-vi-IV-V functional",
      "category": "functional_clear",
      "chords": [
        "B",
        "G#",
        "E",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.499Z"
    },
    {
      "testId": "test-550",
      "description": "B major vi-IV-I-V functional",
      "category": "functional_clear",
      "chords": [
        "G#",
        "E",
        "B",
        "F#"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.500Z"
    },
    {
      "testId": "test-551",
      "description": "B major ii-V-I functional",
      "category": "functional_clear",
      "chords": [
        "C#",
        "F#",
        "B"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.500Z"
    },
    {
      "testId": "test-552",
      "description": "B major I-V-vi-IV functional",
      "category": "functional_clear",
      "chords": [
        "B",
        "F#",
        "G#",
        "E"
      ],
      "parentKey": "B major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.500Z"
    },
    {
      "testId": "test-553",
      "description": "Ambiguous: Could be C major functional or C Ionian modal",
      "category": "ambiguous",
      "chords": [
        "C",
        "F",
        "G",
        "C"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.501Z"
    },
    {
      "testId": "test-554",
      "description": "Ambiguous: Could be A Aeolian or vi-IV-I-V in C",
      "category": "ambiguous",
      "chords": [
        "Am",
        "F",
        "C",
        "G"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.501Z"
    },
    {
      "testId": "test-555",
      "description": "Ambiguous: Could be D major or D Mixolydian in G",
      "category": "ambiguous",
      "chords": [
        "D",
        "G",
        "A",
        "D"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.501Z"
    },
    {
      "testId": "test-556",
      "description": "C Mixolydian with parent key context",
      "category": "ambiguous",
      "chords": [
        "C",
        "A#",
        "F",
        "C"
      ],
      "parentKey": "F major",
      "expected": {
        "modal": true,
        "mode": "C Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.502Z"
    },
    {
      "testId": "test-557",
      "description": "G Mixolydian with parent key context",
      "category": "ambiguous",
      "chords": [
        "G",
        "F",
        "C",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.503Z"
    },
    {
      "testId": "test-558",
      "description": "D Mixolydian with parent key context",
      "category": "ambiguous",
      "chords": [
        "D",
        "C",
        "G",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.504Z"
    },
    {
      "testId": "test-559",
      "description": "A Mixolydian with parent key context",
      "category": "ambiguous",
      "chords": [
        "A",
        "G",
        "D",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.505Z"
    },
    {
      "testId": "test-560",
      "description": "Edge case: Single chord",
      "category": "edge_case",
      "chords": [
        "C"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.505Z"
    },
    {
      "testId": "test-561",
      "description": "Edge case: Repeated chord",
      "category": "edge_case",
      "chords": [
        "G",
        "G",
        "G"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.505Z"
    },
    {
      "testId": "test-562",
      "description": "Edge case: Chromatic progression",
      "category": "edge_case",
      "chords": [
        "C",
        "C#",
        "D"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.506Z"
    },
    {
      "testId": "test-563",
      "description": "Edge case: Enharmonic equivalents",
      "category": "edge_case",
      "chords": [
        "F#",
        "Gb"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.506Z"
    },
    {
      "testId": "test-564",
      "description": "Edge case: Wide interval jumps",
      "category": "edge_case",
      "chords": [
        "C",
        "F#",
        "B",
        "E"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.506Z"
    },
    {
      "testId": "test-565",
      "description": "C Ionian in C major context — I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "F",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "C Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.507Z"
    },
    {
      "testId": "test-566",
      "description": "C Ionian in C major context — Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cmaj7",
        "Fmaj7",
        "Cmaj7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "C Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.507Z"
    },
    {
      "testId": "test-567",
      "description": "C Ionian in C major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "C Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.507Z"
    },
    {
      "testId": "test-568",
      "description": "C Ionian in C major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "C",
        "G",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.507Z"
    },
    {
      "testId": "test-569",
      "description": "D Dorian in C major context — i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "G",
        "C",
        "Dm"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.508Z"
    },
    {
      "testId": "test-570",
      "description": "D Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Dm",
        "G",
        "C",
        "Dm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.508Z"
    },
    {
      "testId": "test-571",
      "description": "D Dorian in C major context — i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Dm",
        "G",
        "Dm"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.508Z"
    },
    {
      "testId": "test-572",
      "description": "D Dorian in C major context — i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dm7",
        "Gmaj7",
        "Dm7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.509Z"
    },
    {
      "testId": "test-573",
      "description": "D Dorian in C major context — i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Dm",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "D Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.509Z"
    },
    {
      "testId": "test-574",
      "description": "D Dorian in C major context — i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Dm",
        "Gm",
        "Dm"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.509Z"
    },
    {
      "testId": "test-575",
      "description": "E Phrygian in C major context — i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "F",
        "D",
        "Em"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.510Z"
    },
    {
      "testId": "test-576",
      "description": "E Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Em",
        "F",
        "D",
        "Em"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.510Z"
    },
    {
      "testId": "test-577",
      "description": "E Phrygian in C major context — i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "F",
        "Em"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.510Z"
    },
    {
      "testId": "test-578",
      "description": "E Phrygian in C major context — i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7",
        "F",
        "Em7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.511Z"
    },
    {
      "testId": "test-579",
      "description": "E Phrygian in C major context — i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Em",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "E Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.512Z"
    },
    {
      "testId": "test-580",
      "description": "E Phrygian in C major context — i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Em",
        "F#",
        "Em"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.513Z"
    },
    {
      "testId": "test-581",
      "description": "F Lydian in C major context — I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "G",
        "C",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.513Z"
    },
    {
      "testId": "test-582",
      "description": "F Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F",
        "G",
        "C",
        "F"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.513Z"
    },
    {
      "testId": "test-583",
      "description": "F Lydian in C major context — I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "G",
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.514Z"
    },
    {
      "testId": "test-584",
      "description": "F Lydian in C major context — I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "F",
        "G",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.514Z"
    },
    {
      "testId": "test-585",
      "description": "F Lydian in C major context — Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Fmaj7",
        "G",
        "Fmaj7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.514Z"
    },
    {
      "testId": "test-586",
      "description": "F Lydian in C major context — I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "F Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.515Z"
    },
    {
      "testId": "test-587",
      "description": "F Lydian in C major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "F",
        "C",
        "F"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.515Z"
    },
    {
      "testId": "test-588",
      "description": "G Mixolydian in C major context — I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "F",
        "C",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.515Z"
    },
    {
      "testId": "test-589",
      "description": "G Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "G",
        "F",
        "C",
        "G"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.516Z"
    },
    {
      "testId": "test-590",
      "description": "G Mixolydian in C major context — I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "F",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.516Z"
    },
    {
      "testId": "test-591",
      "description": "G Mixolydian in C major context — I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "G7",
        "C",
        "G7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.516Z"
    },
    {
      "testId": "test-592",
      "description": "G Mixolydian in C major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "G Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.516Z"
    },
    {
      "testId": "test-593",
      "description": "G Mixolydian in C major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "G",
        "D",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.517Z"
    },
    {
      "testId": "test-594",
      "description": "A Aeolian in C major context — i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "F",
        "G",
        "Am"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.517Z"
    },
    {
      "testId": "test-595",
      "description": "A Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Am",
        "F",
        "G",
        "Am"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.518Z"
    },
    {
      "testId": "test-596",
      "description": "A Aeolian in C major context — i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "G",
        "Am"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.518Z"
    },
    {
      "testId": "test-597",
      "description": "A Aeolian in C major context — i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Am7",
        "F",
        "G",
        "Am7"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.518Z"
    },
    {
      "testId": "test-598",
      "description": "A Aeolian in C major context — i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Am",
        "G"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "A Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.518Z"
    },
    {
      "testId": "test-599",
      "description": "A Aeolian in C major context — i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Am",
        "E7",
        "Am"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.535Z"
    },
    {
      "testId": "test-600",
      "description": "B Locrian in C major context — i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "Bdim",
        "C",
        "Fm",
        "Bdim"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.536Z"
    },
    {
      "testId": "test-601",
      "description": "B Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bdim",
        "C",
        "Fm",
        "Bdim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.536Z"
    },
    {
      "testId": "test-602",
      "description": "B Locrian in C major context — i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "Bdim",
        "C",
        "Bdim"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.537Z"
    },
    {
      "testId": "test-603",
      "description": "B Locrian in C major context — iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7b5",
        "C",
        "Bm7b5"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.537Z"
    },
    {
      "testId": "test-604",
      "description": "B Locrian in C major context — i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bdim",
        "C"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": true,
        "mode": "B Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.538Z"
    },
    {
      "testId": "test-605",
      "description": "B Locrian in C major context — i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "Bdim",
        "F#7",
        "Bdim"
      ],
      "parentKey": "C major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.538Z"
    },
    {
      "testId": "test-606",
      "description": "G Ionian in G major context — I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "C",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "G Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.538Z"
    },
    {
      "testId": "test-607",
      "description": "G Ionian in G major context — Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gmaj7",
        "Cmaj7",
        "Gmaj7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "G Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.539Z"
    },
    {
      "testId": "test-608",
      "description": "G Ionian in G major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "G Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.539Z"
    },
    {
      "testId": "test-609",
      "description": "G Ionian in G major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "G",
        "D",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.539Z"
    },
    {
      "testId": "test-610",
      "description": "A Dorian in G major context — i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "D",
        "G",
        "Am"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.539Z"
    },
    {
      "testId": "test-611",
      "description": "A Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Am",
        "D",
        "G",
        "Am"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.540Z"
    },
    {
      "testId": "test-612",
      "description": "A Dorian in G major context — i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Am",
        "D",
        "Am"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.540Z"
    },
    {
      "testId": "test-613",
      "description": "A Dorian in G major context — i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Am7",
        "Dmaj7",
        "Am7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.540Z"
    },
    {
      "testId": "test-614",
      "description": "A Dorian in G major context — i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Am",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "A Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.541Z"
    },
    {
      "testId": "test-615",
      "description": "A Dorian in G major context — i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Am",
        "Dm",
        "Am"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.542Z"
    },
    {
      "testId": "test-616",
      "description": "B Phrygian in G major context — i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "C",
        "A",
        "Bm"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.543Z"
    },
    {
      "testId": "test-617",
      "description": "B Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bm",
        "C",
        "A",
        "Bm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.544Z"
    },
    {
      "testId": "test-618",
      "description": "B Phrygian in G major context — i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "C",
        "Bm"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.544Z"
    },
    {
      "testId": "test-619",
      "description": "B Phrygian in G major context — i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7",
        "C",
        "Bm7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.544Z"
    },
    {
      "testId": "test-620",
      "description": "B Phrygian in G major context — i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bm",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "B Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.546Z"
    },
    {
      "testId": "test-621",
      "description": "B Phrygian in G major context — i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bm",
        "C#",
        "Bm"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.546Z"
    },
    {
      "testId": "test-622",
      "description": "C Lydian in G major context — I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "D",
        "G",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.547Z"
    },
    {
      "testId": "test-623",
      "description": "C Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "C",
        "D",
        "G",
        "C"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.547Z"
    },
    {
      "testId": "test-624",
      "description": "C Lydian in G major context — I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "D",
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.547Z"
    },
    {
      "testId": "test-625",
      "description": "C Lydian in G major context — I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "C",
        "D",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.548Z"
    },
    {
      "testId": "test-626",
      "description": "C Lydian in G major context — Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Cmaj7",
        "D",
        "Cmaj7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.548Z"
    },
    {
      "testId": "test-627",
      "description": "C Lydian in G major context — I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "C Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.548Z"
    },
    {
      "testId": "test-628",
      "description": "C Lydian in G major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "C",
        "G",
        "C"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.549Z"
    },
    {
      "testId": "test-629",
      "description": "D Mixolydian in G major context — I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "C",
        "G",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.549Z"
    },
    {
      "testId": "test-630",
      "description": "D Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "D",
        "C",
        "G",
        "D"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.549Z"
    },
    {
      "testId": "test-631",
      "description": "D Mixolydian in G major context — I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "C",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.549Z"
    },
    {
      "testId": "test-632",
      "description": "D Mixolydian in G major context — I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "D7",
        "G",
        "D7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.550Z"
    },
    {
      "testId": "test-633",
      "description": "D Mixolydian in G major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "D",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "D Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.550Z"
    },
    {
      "testId": "test-634",
      "description": "D Mixolydian in G major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "D",
        "A",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.550Z"
    },
    {
      "testId": "test-635",
      "description": "E Aeolian in G major context — i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "C",
        "D",
        "Em"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.551Z"
    },
    {
      "testId": "test-636",
      "description": "E Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Em",
        "C",
        "D",
        "Em"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.551Z"
    },
    {
      "testId": "test-637",
      "description": "E Aeolian in G major context — i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "D",
        "Em"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.551Z"
    },
    {
      "testId": "test-638",
      "description": "E Aeolian in G major context — i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7",
        "C",
        "D",
        "Em7"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.553Z"
    },
    {
      "testId": "test-639",
      "description": "E Aeolian in G major context — i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Em",
        "D"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "E Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.553Z"
    },
    {
      "testId": "test-640",
      "description": "E Aeolian in G major context — i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Em",
        "B7",
        "Em"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.554Z"
    },
    {
      "testId": "test-641",
      "description": "F# Locrian in G major context — i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "F#dim",
        "G",
        "Cm",
        "F#dim"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.557Z"
    },
    {
      "testId": "test-642",
      "description": "F# Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#dim",
        "G",
        "Cm",
        "F#dim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.557Z"
    },
    {
      "testId": "test-643",
      "description": "F# Locrian in G major context — i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "F#dim",
        "G",
        "F#dim"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.557Z"
    },
    {
      "testId": "test-644",
      "description": "F# Locrian in G major context — iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7b5",
        "G",
        "F#m7b5"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.558Z"
    },
    {
      "testId": "test-645",
      "description": "F# Locrian in G major context — i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#dim",
        "G"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": true,
        "mode": "F# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.558Z"
    },
    {
      "testId": "test-646",
      "description": "F# Locrian in G major context — i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "F#dim",
        "C#7",
        "F#dim"
      ],
      "parentKey": "G major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.558Z"
    },
    {
      "testId": "test-647",
      "description": "D Ionian in D major context — I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "G",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "D Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.559Z"
    },
    {
      "testId": "test-648",
      "description": "D Ionian in D major context — Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dmaj7",
        "Gmaj7",
        "Dmaj7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "D Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.559Z"
    },
    {
      "testId": "test-649",
      "description": "D Ionian in D major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "D",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "D Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.559Z"
    },
    {
      "testId": "test-650",
      "description": "D Ionian in D major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "D",
        "A",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.559Z"
    },
    {
      "testId": "test-651",
      "description": "E Dorian in D major context — i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "A",
        "D",
        "Em"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.560Z"
    },
    {
      "testId": "test-652",
      "description": "E Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Em",
        "A",
        "D",
        "Em"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.560Z"
    },
    {
      "testId": "test-653",
      "description": "E Dorian in D major context — i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Em",
        "A",
        "Em"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.560Z"
    },
    {
      "testId": "test-654",
      "description": "E Dorian in D major context — i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Em7",
        "Amaj7",
        "Em7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.561Z"
    },
    {
      "testId": "test-655",
      "description": "E Dorian in D major context — i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Em",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "E Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.561Z"
    },
    {
      "testId": "test-656",
      "description": "E Dorian in D major context — i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Em",
        "Am",
        "Em"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.561Z"
    },
    {
      "testId": "test-657",
      "description": "F# Phrygian in D major context — i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "G",
        "E",
        "F#m"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.562Z"
    },
    {
      "testId": "test-658",
      "description": "F# Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#m",
        "G",
        "E",
        "F#m"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.562Z"
    },
    {
      "testId": "test-659",
      "description": "F# Phrygian in D major context — i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "G",
        "F#m"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.562Z"
    },
    {
      "testId": "test-660",
      "description": "F# Phrygian in D major context — i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7",
        "G",
        "F#m7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.563Z"
    },
    {
      "testId": "test-661",
      "description": "F# Phrygian in D major context — i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#m",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "F# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.563Z"
    },
    {
      "testId": "test-662",
      "description": "F# Phrygian in D major context — i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "F#m",
        "G#",
        "F#m"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.563Z"
    },
    {
      "testId": "test-663",
      "description": "G Lydian in D major context — I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "A",
        "D",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.564Z"
    },
    {
      "testId": "test-664",
      "description": "G Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "G",
        "A",
        "D",
        "G"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.565Z"
    },
    {
      "testId": "test-665",
      "description": "G Lydian in D major context — I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "A",
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.565Z"
    },
    {
      "testId": "test-666",
      "description": "G Lydian in D major context — I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "G",
        "A",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.566Z"
    },
    {
      "testId": "test-667",
      "description": "G Lydian in D major context — Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Gmaj7",
        "A",
        "Gmaj7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.566Z"
    },
    {
      "testId": "test-668",
      "description": "G Lydian in D major context — I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "G Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.566Z"
    },
    {
      "testId": "test-669",
      "description": "G Lydian in D major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "G",
        "D",
        "G"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.566Z"
    },
    {
      "testId": "test-670",
      "description": "A Mixolydian in D major context — I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "G",
        "D",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.567Z"
    },
    {
      "testId": "test-671",
      "description": "A Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "A",
        "G",
        "D",
        "A"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.567Z"
    },
    {
      "testId": "test-672",
      "description": "A Mixolydian in D major context — I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "G",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.567Z"
    },
    {
      "testId": "test-673",
      "description": "A Mixolydian in D major context — I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "A7",
        "D",
        "A7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.568Z"
    },
    {
      "testId": "test-674",
      "description": "A Mixolydian in D major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "A",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "A Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.568Z"
    },
    {
      "testId": "test-675",
      "description": "A Mixolydian in D major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "A",
        "E",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.568Z"
    },
    {
      "testId": "test-676",
      "description": "B Aeolian in D major context — i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "G",
        "A",
        "Bm"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.569Z"
    },
    {
      "testId": "test-677",
      "description": "B Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bm",
        "G",
        "A",
        "Bm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.569Z"
    },
    {
      "testId": "test-678",
      "description": "B Aeolian in D major context — i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "A",
        "Bm"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.569Z"
    },
    {
      "testId": "test-679",
      "description": "B Aeolian in D major context — i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7",
        "G",
        "A",
        "Bm7"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.570Z"
    },
    {
      "testId": "test-680",
      "description": "B Aeolian in D major context — i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bm",
        "A"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "B Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.570Z"
    },
    {
      "testId": "test-681",
      "description": "B Aeolian in D major context — i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bm",
        "F#7",
        "Bm"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.570Z"
    },
    {
      "testId": "test-682",
      "description": "C# Locrian in D major context — i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "C#dim",
        "D",
        "Gm",
        "C#dim"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "C# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.577Z"
    },
    {
      "testId": "test-683",
      "description": "C# Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "C#dim",
        "D",
        "Gm",
        "C#dim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.578Z"
    },
    {
      "testId": "test-684",
      "description": "C# Locrian in D major context — i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "C#dim",
        "D",
        "C#dim"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "C# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.578Z"
    },
    {
      "testId": "test-685",
      "description": "C# Locrian in D major context — iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "C#m7b5",
        "D",
        "C#m7b5"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "C# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.578Z"
    },
    {
      "testId": "test-686",
      "description": "C# Locrian in D major context — i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C#dim",
        "D"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": true,
        "mode": "C# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.578Z"
    },
    {
      "testId": "test-687",
      "description": "C# Locrian in D major context — i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "C#dim",
        "G#7",
        "C#dim"
      ],
      "parentKey": "D major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.579Z"
    },
    {
      "testId": "test-688",
      "description": "A Ionian in A major context — I-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "A",
        "D",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "A Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.579Z"
    },
    {
      "testId": "test-689",
      "description": "A Ionian in A major context — Imaj7-IVmaj7-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Amaj7",
        "Dmaj7",
        "Amaj7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "A Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.579Z"
    },
    {
      "testId": "test-690",
      "description": "A Ionian in A major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "A",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "A Ionian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.580Z"
    },
    {
      "testId": "test-691",
      "description": "A Ionian in A major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "A",
        "E",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.580Z"
    },
    {
      "testId": "test-692",
      "description": "B Dorian in A major context — i-IV-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "E",
        "A",
        "Bm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.580Z"
    },
    {
      "testId": "test-693",
      "description": "B Dorian i-IV-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "Bm",
        "E",
        "A",
        "Bm"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.581Z"
    },
    {
      "testId": "test-694",
      "description": "B Dorian in A major context — i-IV-i",
      "category": "modal_characteristic",
      "chords": [
        "Bm",
        "E",
        "Bm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.581Z"
    },
    {
      "testId": "test-695",
      "description": "B Dorian in A major context — i7-IVmaj7-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "Bm7",
        "Emaj7",
        "Bm7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.581Z"
    },
    {
      "testId": "test-696",
      "description": "B Dorian in A major context — i-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "Bm",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "B Dorian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.582Z"
    },
    {
      "testId": "test-697",
      "description": "B Dorian in A major context — i-iv-i (foil)",
      "category": "modal_foil",
      "chords": [
        "Bm",
        "Em",
        "Bm"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.582Z"
    },
    {
      "testId": "test-698",
      "description": "C# Phrygian in A major context — i-bII-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "C#m",
        "D",
        "B",
        "C#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "C# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.582Z"
    },
    {
      "testId": "test-699",
      "description": "C# Phrygian i-bII-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "C#m",
        "D",
        "B",
        "C#m"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.582Z"
    },
    {
      "testId": "test-700",
      "description": "C# Phrygian in A major context — i-bII-i",
      "category": "modal_characteristic",
      "chords": [
        "C#m",
        "D",
        "C#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "C# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.583Z"
    },
    {
      "testId": "test-701",
      "description": "C# Phrygian in A major context — i7-bII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "C#m7",
        "D",
        "C#m7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "C# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.586Z"
    },
    {
      "testId": "test-702",
      "description": "C# Phrygian in A major context — i-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "C#m",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "C# Phrygian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.586Z"
    },
    {
      "testId": "test-703",
      "description": "C# Phrygian in A major context — i-II-i (foil)",
      "category": "modal_foil",
      "chords": [
        "C#m",
        "D#",
        "C#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.586Z"
    },
    {
      "testId": "test-704",
      "description": "D Lydian in A major context — I-II-V-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "E",
        "A",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.586Z"
    },
    {
      "testId": "test-705",
      "description": "D Lydian I-II-V-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "D",
        "E",
        "A",
        "D"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.593Z"
    },
    {
      "testId": "test-706",
      "description": "D Lydian in A major context — I-II-I-II",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "E",
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.593Z"
    },
    {
      "testId": "test-707",
      "description": "D Lydian in A major context — I-II-I",
      "category": "modal_characteristic",
      "chords": [
        "D",
        "E",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.594Z"
    },
    {
      "testId": "test-708",
      "description": "D Lydian in A major context — Imaj7-II-Imaj7",
      "category": "modal_seventh_variant",
      "chords": [
        "Dmaj7",
        "E",
        "Dmaj7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.594Z"
    },
    {
      "testId": "test-709",
      "description": "D Lydian in A major context — I-II (vamp)",
      "category": "modal_vamp",
      "chords": [
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "D Lydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.594Z"
    },
    {
      "testId": "test-710",
      "description": "D Lydian in A major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "D",
        "A",
        "D"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.608Z"
    },
    {
      "testId": "test-711",
      "description": "E Mixolydian in A major context — I-bVII-IV-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "D",
        "A",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.613Z"
    },
    {
      "testId": "test-712",
      "description": "E Mixolydian I-bVII-IV-I (no parent key)",
      "category": "ambiguous",
      "chords": [
        "E",
        "D",
        "A",
        "E"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.613Z"
    },
    {
      "testId": "test-713",
      "description": "E Mixolydian in A major context — I-bVII-I",
      "category": "modal_characteristic",
      "chords": [
        "E",
        "D",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.613Z"
    },
    {
      "testId": "test-714",
      "description": "E Mixolydian in A major context — I7-IV-I7",
      "category": "modal_seventh_variant",
      "chords": [
        "E7",
        "A",
        "E7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.614Z"
    },
    {
      "testId": "test-715",
      "description": "E Mixolydian in A major context — I-IV (vamp)",
      "category": "modal_vamp",
      "chords": [
        "E",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "E Mixolydian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.614Z"
    },
    {
      "testId": "test-716",
      "description": "E Mixolydian in A major context — I-V-I (foil)",
      "category": "modal_foil",
      "chords": [
        "E",
        "B",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.614Z"
    },
    {
      "testId": "test-717",
      "description": "F# Aeolian in A major context — i-bVI-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "D",
        "E",
        "F#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.615Z"
    },
    {
      "testId": "test-718",
      "description": "F# Aeolian i-bVI-bVII-i (no parent key)",
      "category": "ambiguous",
      "chords": [
        "F#m",
        "D",
        "E",
        "F#m"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.615Z"
    },
    {
      "testId": "test-719",
      "description": "F# Aeolian in A major context — i-bVII-i",
      "category": "modal_characteristic",
      "chords": [
        "F#m",
        "E",
        "F#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.615Z"
    },
    {
      "testId": "test-720",
      "description": "F# Aeolian in A major context — i7-bVI-bVII-i7",
      "category": "modal_seventh_variant",
      "chords": [
        "F#m7",
        "D",
        "E",
        "F#m7"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.616Z"
    },
    {
      "testId": "test-721",
      "description": "F# Aeolian in A major context — i-bVII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "F#m",
        "E"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "F# Aeolian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.616Z"
    },
    {
      "testId": "test-722",
      "description": "F# Aeolian in A major context — i-V7-i (foil)",
      "category": "modal_foil",
      "chords": [
        "F#m",
        "C#7",
        "F#m"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.616Z"
    },
    {
      "testId": "test-723",
      "description": "G# Locrian in A major context — i°-bII-v-i°",
      "category": "modal_characteristic",
      "chords": [
        "G#dim",
        "A",
        "Dm",
        "G#dim"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "G# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.617Z"
    },
    {
      "testId": "test-724",
      "description": "G# Locrian i°-bII-v-i° (no parent key)",
      "category": "ambiguous",
      "chords": [
        "G#dim",
        "A",
        "Dm",
        "G#dim"
      ],
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.617Z"
    },
    {
      "testId": "test-725",
      "description": "G# Locrian in A major context — i°-bII-i°",
      "category": "modal_characteristic",
      "chords": [
        "G#dim",
        "A",
        "G#dim"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "G# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.620Z"
    },
    {
      "testId": "test-726",
      "description": "G# Locrian in A major context — iø7-bII-iø7",
      "category": "modal_seventh_variant",
      "chords": [
        "G#m7b5",
        "A",
        "G#m7b5"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "G# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.623Z"
    },
    {
      "testId": "test-727",
      "description": "G# Locrian in A major context — i°-bII (vamp)",
      "category": "modal_vamp",
      "chords": [
        "G#dim",
        "A"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": true,
        "mode": "G# Locrian"
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.623Z"
    },
    {
      "testId": "test-728",
      "description": "G# Locrian in A major context — i°-V7-i° (foil)",
      "category": "modal_foil",
      "chords": [
        "G#dim",
        "D#7",
        "G#dim"
      ],
      "parentKey": "A major",
      "expected": {
        "modal": false
      },
      "actual": {
        "enhanced": {
          "modal": false,
          "confidence": 0
        },
        "local": {
          "modal": false,
          "confidence": 0
        }
      },
      "result": "FAIL",
      "errors": [
        "input.replace is not a function"
      ],
      "timestamp": "2025-08-10T19:40:19.623Z"
    }
  ],
  "failureAnalysis": {
    "totalFailures": 728,
    "commonErrorPatterns": {},
    "sampleFailures": [
      {
        "testId": "test-1",
        "category": "modal_characteristic",
        "description": "C Ionian I-IV-I",
        "chords": "C F C",
        "parentKey": "C major",
        "expected": {
          "modal": true,
          "mode": "C Ionian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-5",
        "category": "modal_characteristic",
        "description": "C Dorian i-IV-bVII-i",
        "chords": "Cm F Bb Cm",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "C Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-6",
        "category": "modal_characteristic",
        "description": "C Dorian i-IV-i",
        "chords": "Cm F Cm",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "C Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-11",
        "category": "modal_characteristic",
        "description": "C Phrygian i-bII-bVII-i",
        "chords": "Cm Db Bb Cm",
        "parentKey": "Ab major",
        "expected": {
          "modal": true,
          "mode": "C Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-12",
        "category": "modal_characteristic",
        "description": "C Phrygian i-bII-i",
        "chords": "Cm Db Cm",
        "parentKey": "Ab major",
        "expected": {
          "modal": true,
          "mode": "C Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-17",
        "category": "modal_characteristic",
        "description": "C Lydian I-II-V-I",
        "chords": "C D G C",
        "parentKey": "G major",
        "expected": {
          "modal": true,
          "mode": "C Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-18",
        "category": "modal_characteristic",
        "description": "C Lydian I-II-I-II",
        "chords": "C D C D",
        "parentKey": "G major",
        "expected": {
          "modal": true,
          "mode": "C Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-19",
        "category": "modal_characteristic",
        "description": "C Lydian I-II-I",
        "chords": "C D C",
        "parentKey": "G major",
        "expected": {
          "modal": true,
          "mode": "C Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-24",
        "category": "modal_characteristic",
        "description": "C Mixolydian I-bVII-IV-I",
        "chords": "C Bb F C",
        "parentKey": "F major",
        "expected": {
          "modal": true,
          "mode": "C Mixolydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-25",
        "category": "modal_characteristic",
        "description": "C Mixolydian I-bVII-I",
        "chords": "C Bb C",
        "parentKey": "F major",
        "expected": {
          "modal": true,
          "mode": "C Mixolydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-30",
        "category": "modal_characteristic",
        "description": "C Aeolian i-bVI-bVII-i",
        "chords": "Cm Ab Bb Cm",
        "parentKey": "Eb major",
        "expected": {
          "modal": true,
          "mode": "C Aeolian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-31",
        "category": "modal_characteristic",
        "description": "C Aeolian i-bVII-i",
        "chords": "Cm Bb Cm",
        "parentKey": "Eb major",
        "expected": {
          "modal": true,
          "mode": "C Aeolian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-36",
        "category": "modal_characteristic",
        "description": "C Locrian i°-bII-v-i°",
        "chords": "Cdim Db Gbm Cdim",
        "parentKey": "Db major",
        "expected": {
          "modal": true,
          "mode": "C Locrian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-37",
        "category": "modal_characteristic",
        "description": "C Locrian i°-bII-i°",
        "chords": "Cdim Db Cdim",
        "parentKey": "Db major",
        "expected": {
          "modal": true,
          "mode": "C Locrian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-42",
        "category": "modal_characteristic",
        "description": "Db Ionian I-IV-I",
        "chords": "Db Gb Db",
        "parentKey": "Db major",
        "expected": {
          "modal": true,
          "mode": "Db Ionian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-46",
        "category": "modal_characteristic",
        "description": "Db Dorian i-IV-bVII-i",
        "chords": "Dbm Gb B Dbm",
        "parentKey": "B major",
        "expected": {
          "modal": true,
          "mode": "Db Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-47",
        "category": "modal_characteristic",
        "description": "Db Dorian i-IV-i",
        "chords": "Dbm Gb Dbm",
        "parentKey": "B major",
        "expected": {
          "modal": true,
          "mode": "Db Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-52",
        "category": "modal_characteristic",
        "description": "Db Phrygian i-bII-bVII-i",
        "chords": "Dbm D B Dbm",
        "parentKey": "A major",
        "expected": {
          "modal": true,
          "mode": "Db Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-53",
        "category": "modal_characteristic",
        "description": "Db Phrygian i-bII-i",
        "chords": "Dbm D Dbm",
        "parentKey": "A major",
        "expected": {
          "modal": true,
          "mode": "Db Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-58",
        "category": "modal_characteristic",
        "description": "Db Lydian I-II-V-I",
        "chords": "Db Eb Ab Db",
        "parentKey": "Ab major",
        "expected": {
          "modal": true,
          "mode": "Db Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-59",
        "category": "modal_characteristic",
        "description": "Db Lydian I-II-I-II",
        "chords": "Db Eb Db Eb",
        "parentKey": "Ab major",
        "expected": {
          "modal": true,
          "mode": "Db Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-60",
        "category": "modal_characteristic",
        "description": "Db Lydian I-II-I",
        "chords": "Db Eb Db",
        "parentKey": "Ab major",
        "expected": {
          "modal": true,
          "mode": "Db Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-65",
        "category": "modal_characteristic",
        "description": "Db Mixolydian I-bVII-IV-I",
        "chords": "Db Cb Gb Db",
        "parentKey": "Gb major",
        "expected": {
          "modal": true,
          "mode": "Db Mixolydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-66",
        "category": "modal_characteristic",
        "description": "Db Mixolydian I-bVII-I",
        "chords": "Db Cb Db",
        "parentKey": "Gb major",
        "expected": {
          "modal": true,
          "mode": "Db Mixolydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-71",
        "category": "modal_characteristic",
        "description": "Db Aeolian i-bVI-bVII-i",
        "chords": "Dbm A B Dbm",
        "parentKey": "E major",
        "expected": {
          "modal": true,
          "mode": "Db Aeolian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-72",
        "category": "modal_characteristic",
        "description": "Db Aeolian i-bVII-i",
        "chords": "Dbm B Dbm",
        "parentKey": "E major",
        "expected": {
          "modal": true,
          "mode": "Db Aeolian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-77",
        "category": "modal_characteristic",
        "description": "Db Locrian i°-bII-v-i°",
        "chords": "Dbdim D Gm Dbdim",
        "parentKey": "D major",
        "expected": {
          "modal": true,
          "mode": "Db Locrian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-78",
        "category": "modal_characteristic",
        "description": "Db Locrian i°-bII-i°",
        "chords": "Dbdim D Dbdim",
        "parentKey": "D major",
        "expected": {
          "modal": true,
          "mode": "Db Locrian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-83",
        "category": "modal_characteristic",
        "description": "D Ionian I-IV-I",
        "chords": "D G D",
        "parentKey": "D major",
        "expected": {
          "modal": true,
          "mode": "D Ionian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-87",
        "category": "modal_characteristic",
        "description": "D Dorian i-IV-bVII-i",
        "chords": "Dm G C Dm",
        "parentKey": "C major",
        "expected": {
          "modal": true,
          "mode": "D Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-88",
        "category": "modal_characteristic",
        "description": "D Dorian i-IV-i",
        "chords": "Dm G Dm",
        "parentKey": "C major",
        "expected": {
          "modal": true,
          "mode": "D Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-93",
        "category": "modal_characteristic",
        "description": "D Phrygian i-bII-bVII-i",
        "chords": "Dm Eb C Dm",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "D Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-94",
        "category": "modal_characteristic",
        "description": "D Phrygian i-bII-i",
        "chords": "Dm Eb Dm",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "D Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-99",
        "category": "modal_characteristic",
        "description": "D Lydian I-II-V-I",
        "chords": "D E A D",
        "parentKey": "A major",
        "expected": {
          "modal": true,
          "mode": "D Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-100",
        "category": "modal_characteristic",
        "description": "D Lydian I-II-I-II",
        "chords": "D E D E",
        "parentKey": "A major",
        "expected": {
          "modal": true,
          "mode": "D Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-101",
        "category": "modal_characteristic",
        "description": "D Lydian I-II-I",
        "chords": "D E D",
        "parentKey": "A major",
        "expected": {
          "modal": true,
          "mode": "D Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-106",
        "category": "modal_characteristic",
        "description": "D Mixolydian I-bVII-IV-I",
        "chords": "D C G D",
        "parentKey": "G major",
        "expected": {
          "modal": true,
          "mode": "D Mixolydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-107",
        "category": "modal_characteristic",
        "description": "D Mixolydian I-bVII-I",
        "chords": "D C D",
        "parentKey": "G major",
        "expected": {
          "modal": true,
          "mode": "D Mixolydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-112",
        "category": "modal_characteristic",
        "description": "D Aeolian i-bVI-bVII-i",
        "chords": "Dm Bb C Dm",
        "parentKey": "F major",
        "expected": {
          "modal": true,
          "mode": "D Aeolian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-113",
        "category": "modal_characteristic",
        "description": "D Aeolian i-bVII-i",
        "chords": "Dm C Dm",
        "parentKey": "F major",
        "expected": {
          "modal": true,
          "mode": "D Aeolian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-118",
        "category": "modal_characteristic",
        "description": "D Locrian i°-bII-v-i°",
        "chords": "Ddim Eb Abm Ddim",
        "parentKey": "Eb major",
        "expected": {
          "modal": true,
          "mode": "D Locrian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-119",
        "category": "modal_characteristic",
        "description": "D Locrian i°-bII-i°",
        "chords": "Ddim Eb Ddim",
        "parentKey": "Eb major",
        "expected": {
          "modal": true,
          "mode": "D Locrian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-124",
        "category": "modal_characteristic",
        "description": "Eb Ionian I-IV-I",
        "chords": "Eb Ab Eb",
        "parentKey": "Eb major",
        "expected": {
          "modal": true,
          "mode": "Eb Ionian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-128",
        "category": "modal_characteristic",
        "description": "Eb Dorian i-IV-bVII-i",
        "chords": "Ebm Ab Db Ebm",
        "parentKey": "Db major",
        "expected": {
          "modal": true,
          "mode": "Eb Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-129",
        "category": "modal_characteristic",
        "description": "Eb Dorian i-IV-i",
        "chords": "Ebm Ab Ebm",
        "parentKey": "Db major",
        "expected": {
          "modal": true,
          "mode": "Eb Dorian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-134",
        "category": "modal_characteristic",
        "description": "Eb Phrygian i-bII-bVII-i",
        "chords": "Ebm E Db Ebm",
        "parentKey": "B major",
        "expected": {
          "modal": true,
          "mode": "Eb Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-135",
        "category": "modal_characteristic",
        "description": "Eb Phrygian i-bII-i",
        "chords": "Ebm E Ebm",
        "parentKey": "B major",
        "expected": {
          "modal": true,
          "mode": "Eb Phrygian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-140",
        "category": "modal_characteristic",
        "description": "Eb Lydian I-II-V-I",
        "chords": "Eb F Bb Eb",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "Eb Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-141",
        "category": "modal_characteristic",
        "description": "Eb Lydian I-II-I-II",
        "chords": "Eb F Eb F",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "Eb Lydian"
        },
        "error": "input.replace is not a function"
      },
      {
        "testId": "test-142",
        "category": "modal_characteristic",
        "description": "Eb Lydian I-II-I",
        "chords": "Eb F Eb",
        "parentKey": "Bb major",
        "expected": {
          "modal": true,
          "mode": "Eb Lydian"
        },
        "error": "input.replace is not a function"
      }
    ]
  }
}
